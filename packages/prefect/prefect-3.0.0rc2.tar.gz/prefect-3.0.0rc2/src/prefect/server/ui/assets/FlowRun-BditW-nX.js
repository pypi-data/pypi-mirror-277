import{d as j,ae as m,f as i,o as t,q as D,m as g,i as d,j as l,bm as E,c as o,bn as q,a as r,bo as N,bp as z,bq as A,ay as G,W as J,br as L,am as Q,bs as W,bt as O,bu as Y,bv as H,g as u,h as k,u as K,ah as h,bw as M,bx as X,by as Z,bz as ee,bA as le,bB as se,bC as ae,bD as te,bE as x,a5 as ne,bl as F,bF as oe}from"./index-D_N-R_rf.js";import{u as ue}from"./usePageTitle-BKRMtrhI.js";const re={class:"flow-run-graphs__graph-panel-container"},ie={class:"flow-run-graphs__graphs"},fe={class:"flow-run-graphs__panel p-background"},pe=j({__name:"FlowRunGraphs",props:{flowRun:{}},setup(T){const v=m(),f=m(!1),e=m(null),w=i(()=>{var p,s;return{root:{"flow-run-graphs--fullscreen":f.value,"flow-run-graphs--show-panel":((p=e.value)==null?void 0:p.kind)==="task-run"||((s=e.value)==null?void 0:s.kind)==="flow-run"}}});return(p,s)=>{var b,_,c;return t(),D("div",{class:G(["flow-run-graphs",w.value.root])},[g("div",re,[g("div",ie,[d(l(E),{fullscreen:f.value,"onUpdate:fullscreen":s[0]||(s[0]=a=>f.value=a),viewport:v.value,"onUpdate:viewport":s[1]||(s[1]=a=>v.value=a),selected:e.value,"onUpdate:selected":s[2]||(s[2]=a=>e.value=a),"flow-run":p.flowRun,class:"flow-run-graphs__flow-run"},null,8,["fullscreen","viewport","selected","flow-run"])]),g("div",fe,[((b=e.value)==null?void 0:b.kind)==="task-run"||((_=e.value)==null?void 0:_.kind)==="flow-run"?(t(),o(l(q),{key:0,selection:e.value,"onUpdate:selection":s[3]||(s[3]=a=>e.value=a),floating:f.value},null,8,["selection","floating"])):r("",!0)])]),e.value&&e.value.kind==="artifacts"?(t(),o(l(N),{key:0,selection:e.value,"onUpdate:selection":s[4]||(s[4]=a=>e.value=a)},null,8,["selection"])):r("",!0),((c=e.value)==null?void 0:c.kind)==="state"?(t(),o(l(z),{key:1,selection:e.value,"onUpdate:selection":s[5]||(s[5]=a=>e.value=a)},null,8,["selection"])):r("",!0),d(l(A),{selection:e.value,"onUpdate:selection":s[6]||(s[6]=a=>e.value=a)},null,8,["selection"])],2)}}}),ve=j({__name:"FlowRun",setup(T){const v=K(),f=J("flowRunId"),{flowRun:e,subscription:w}=L(f,{interval:5e3}),p=i(()=>{var n;return h(((n=e.value)==null?void 0:n.parameters)??{})}),s=i(()=>{var n;return(n=e.value)!=null&&n.stateType?M(e.value.stateType):!0}),b=i(()=>{var n;return h(((n=e.value)==null?void 0:n.jobVariables)??{})}),_=i(()=>[{label:"Logs"},{label:"Task Runs",hidden:s.value},{label:"Subflow Runs",hidden:s.value},{label:"Results",hidden:s.value},{label:"Artifacts",hidden:s.value},{label:"Details"},{label:"Parameters"},{label:"Job Variables"}]),c=Q("tab","Logs"),{tabs:a}=W(_,c),U=i(()=>[f.value]),{filter:C}=O({flowRuns:{parentFlowRunId:U}});function B(){v.push(F.runs())}const I=i(()=>{var n;return(n=e.value)==null?void 0:n.stateType});Y(I);const V=i(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return ue(V),H(()=>{w.error&&oe(w.error).isInRange("clientError")&&v.replace(F[404]())}),(n,y)=>{const R=k("p-code-highlight"),P=k("p-tabs"),S=k("p-layout-default");return t(),o(S,{class:"flow-run"},{header:u(()=>[l(e)?(t(),o(l(X),{key:0,"flow-run-id":l(e).id,onDelete:B},null,8,["flow-run-id"])):r("",!0)]),default:u(()=>[l(e)&&!s.value?(t(),o(pe,{key:0,"flow-run":l(e)},null,8,["flow-run"])):r("",!0),d(P,{selected:l(c),"onUpdate:selected":y[0]||(y[0]=$=>ne(c)?c.value=$:null),tabs:l(a)},{details:u(()=>[l(e)?(t(),o(l(Z),{key:0,"flow-run":l(e)},null,8,["flow-run"])):r("",!0)]),logs:u(()=>[l(e)?(t(),o(l(ee),{key:0,"flow-run":l(e)},null,8,["flow-run"])):r("",!0)]),results:u(()=>[l(e)?(t(),o(l(le),{key:0,"flow-run":l(e)},null,8,["flow-run"])):r("",!0)]),artifacts:u(()=>[l(e)?(t(),o(l(se),{key:0,"flow-run":l(e)},null,8,["flow-run"])):r("",!0)]),"task-runs":u(()=>[l(e)?(t(),o(l(ae),{key:0,"flow-run-id":l(e).id},null,8,["flow-run-id"])):r("",!0)]),"subflow-runs":u(()=>[d(l(te),{filter:l(C)},null,8,["filter"])]),parameters:u(()=>[l(e)?(t(),o(l(x),{key:0,"text-to-copy":p.value},{default:u(()=>[d(R,{lang:"json",text:p.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):r("",!0)]),"job-variables":u(()=>[l(e)?(t(),o(l(x),{key:0,"text-to-copy":b.value},{default:u(()=>[d(R,{lang:"json",text:b.value,class:"flow-run__job-variables"},null,8,["text"])]),_:1},8,["text-to-copy"])):r("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{ve as default};
//# sourceMappingURL=FlowRun-BditW-nX.js.map
