import{c8 as h,d as v,aE as N,W as k,am as x,c9 as F,f as S,j as e,c as b,g as m,a as B,h as D,u as I,o as J,i as p,ca as O,cb as P,cc as T,cd as V,bl as d,$ as i,G as $}from"./index-D_N-R_rf.js";import{u as Q}from"./usePageTitle-BKRMtrhI.js";class U extends h{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const A=v({__name:"FlowRunCreate",setup(y){const t=N(),r=k("deploymentId"),c=I(),f=x("parameters",U,void 0),{deployment:o}=F(r),w=async l=>{var u,a;try{const n=await t.deployments.createDeploymentFlowRunV2(r.value,l),s=((a=(u=l.state)==null?void 0:u.stateDetails)==null?void 0:a.scheduledTime)??void 0,C=!s,g=T(V,{flowRun:n,flowRunRoute:d.flowRun,router:c,immediate:C,startTime:s});i(g,"success"),c.push(d.deployment(r.value))}catch(n){const s=$(n,"Something went wrong trying to create a flow run");i(s,"error"),console.error(n)}},R=()=>{c.back()},_=S(()=>o.value?`Create Flow Run for Deployment: ${o.value.name}`:"Create Flow Run for Deployment");return Q(_),(l,u)=>{const a=D("p-layout-default");return e(o)?(J(),b(a,{key:0},{header:m(()=>[p(e(O),{deployment:e(o)},null,8,["deployment"])]),default:m(()=>[p(e(P),{deployment:e(o),parameters:e(f),onSubmit:w,onCancel:R},null,8,["deployment","parameters"])]),_:1})):B("",!0)}}});export{A as default};
//# sourceMappingURL=FlowRunCreate-yOAoF2TL.js.map
