function miniumRequestStack(){if(!global.__minium__.request_stack){const e=global.__minium__.request_stack=new Map;global.__minium__.wait_util=function(t=0,a=20){var n=(getCurrentPages().pop()||{}).__wxWebviewId__;return new Promise((r=>{var s=2*a,i=setInterval((()=>{s--;var a=e.has(n)?e.get(n).size:0;console.debug("[minitest] current stack size: ",a),a<=t?(clearInterval(i),r(!0)):s<=0&&(clearInterval(i),r(!1))}),500)}))};const t=new Map;return global.__minium__.setCall("request","requestStack",{before:function(a,n){if("https://weapp.tencent.com/jscov_driver/CollectCovTimer"!=a.url){var r,s=(getCurrentPages().pop()||{}).__wxWebviewId__;if(s)e.has(s)?r=e.get(s):(r=new Map,e.set(s,r)),r.set(n,Date.now()),t.set(n,{pageId:s,requestMap:r})}},callback:function(a,n){if(!t.has(n))return;const{pageId:r,requestMap:s}=t.get(n);t.delete(n),s.delete(n),0===s.size&&e.delete(r)}},!0),!0}return!1}
