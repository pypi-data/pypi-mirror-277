import{bn as D,R as k,bu as y,bm as S,r as o,j as e,an as j,bo as H,bq as P,br as I,bs as T,bt as K,dK as V,I as R,aa as z,u as X,c as U,B as w,dN as M,dO as W,cF as G,dP as Q,dQ as Z,dR as J,dS as Y,dT as ee,dU as te}from"./index-d317a0cb.js";import{I as A}from"./input-45d38007.js";import{L as _,T as ne}from"./textarea-a66d3242.js";function Ce(t){const a=t+"CollectionProvider",[s,p]=D(a),[i,c]=s(a,{collectionRef:{current:null},itemMap:new Map}),r=l=>{const{scope:m,children:$}=l,n=k.useRef(null),u=k.useRef(new Map).current;return k.createElement(i,{scope:m,itemMap:u,collectionRef:n},$)},d=t+"CollectionSlot",x=k.forwardRef((l,m)=>{const{scope:$,children:n}=l,u=c(d,$),E=y(m,u.collectionRef);return k.createElement(S,{ref:E},n)}),b=t+"CollectionItemSlot",C="data-radix-collection-item",f=k.forwardRef((l,m)=>{const{scope:$,children:n,...u}=l,E=k.useRef(null),h=y(m,E),g=c(b,$);return k.useEffect(()=>(g.itemMap.set(E,{ref:E,...u}),()=>void g.itemMap.delete(E))),k.createElement(S,{[C]:"",ref:h},n)});function v(l){const m=c(t+"CollectionConsumer",l);return k.useCallback(()=>{const n=m.collectionRef.current;if(!n)return[];const u=Array.from(n.querySelectorAll(`[${C}]`));return Array.from(m.itemMap.values()).sort((g,q)=>u.indexOf(g.ref.current)-u.indexOf(q.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:r,Slot:x,ItemSlot:f},v,p]}const oe=o.createContext(void 0);function ve(t){const a=o.useContext(oe);return t||a||"ltr"}const se=({name:t,invalidNameList:a,description:s,endpointName:p,maxLength:i=50,setName:c,setDescription:r,setEndpointName:d})=>{const[x,b]=o.useState(!1),[C,f]=o.useState(!0),v=n=>{const{value:u}=n.target;u.length>=i?b(!0):b(!1),c(u)},l=n=>{r(n.target.value)},m=n=>{const u=/^[a-zA-Z0-9_-]+$/.test(n.target.value)&&n.target.value.length<=i||n.target.value.length===0;f(u),d(n.target.value)},$=n=>n.target.select();return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs("div",{className:"edit-flow-arrangement",children:[e.jsxs("span",{className:"font-medium",children:["Name",c?"":":"]})," ",x&&e.jsx("span",{className:"edit-flow-span",children:"Character limit reached"})]}),c?e.jsx(A,{className:"nopan nodelete nodrag noundo nocopy mt-2 font-normal",onChange:v,type:"text",name:"name",value:t??"",placeholder:"Flow name",id:"name",maxLength:i,onDoubleClickCapture:n=>{$(n)}}):e.jsx("span",{className:"font-normal text-muted-foreground word-break-break-word",children:t})]}),e.jsxs(_,{children:[e.jsx("div",{className:"edit-flow-arrangement mt-3",children:e.jsxs("span",{className:"font-medium ",children:["Description",r?" (optional)":":"]})}),r?e.jsx(ne,{name:"description",id:"description",onChange:l,value:s,placeholder:"Flow description",className:"mt-2 max-h-[100px] resize-none font-normal",rows:3,onDoubleClickCapture:n=>{$(n)}}):e.jsx("span",{className:j("font-normal text-muted-foreground word-break-break-word",s===""?"font-light italic":""),children:s===""?"No description":s})]}),d&&e.jsxs(_,{children:[e.jsxs("div",{className:"edit-flow-arrangement mt-3",children:[e.jsx("span",{className:"font-medium",children:"Endpoint Name"}),!C&&e.jsxs("span",{className:"edit-flow-span",children:["Invalid endpoint name. Use only letters, numbers, hyphens, and underscores (",i," characters max)."]})]}),e.jsx(A,{className:"nopan nodelete nodrag noundo nocopy mt-2 font-normal",onChange:m,type:"text",name:"endpoint_name",value:p??"",placeholder:"An alternative name to run the endpoint",maxLength:i,id:"endpoint_name",onDoubleClickCapture:n=>{$(n)}})]})]})},ae=se;function re(t){const a=o.useRef({value:t,previous:t});return o.useMemo(()=>(a.current.value!==t&&(a.current.previous=a.current.value,a.current.value=t),a.current.previous),[t])}const O="Checkbox",[ce,ge]=D(O),[le,ie]=ce(O),de=o.forwardRef((t,a)=>{const{__scopeCheckbox:s,name:p,checked:i,defaultChecked:c,required:r,disabled:d,value:x="on",onCheckedChange:b,...C}=t,[f,v]=o.useState(null),l=y(a,h=>v(h)),m=o.useRef(!1),$=f?!!f.closest("form"):!0,[n=!1,u]=H({prop:i,defaultProp:c,onChange:b}),E=o.useRef(n);return o.useEffect(()=>{const h=f==null?void 0:f.form;if(h){const g=()=>u(E.current);return h.addEventListener("reset",g),()=>h.removeEventListener("reset",g)}},[f,u]),o.createElement(le,{scope:s,state:n,disabled:d},o.createElement(P.button,I({type:"button",role:"checkbox","aria-checked":N(n)?"mixed":n,"aria-required":r,"data-state":F(n),"data-disabled":d?"":void 0,disabled:d,value:x},C,{ref:l,onKeyDown:T(t.onKeyDown,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:T(t.onClick,h=>{u(g=>N(g)?!0:!g),$&&(m.current=h.isPropagationStopped(),m.current||h.stopPropagation())})})),$&&o.createElement(me,{control:f,bubbles:!m.current,name:p,value:x,checked:n,required:r,disabled:d,style:{transform:"translateX(-100%)"}}))}),ue="CheckboxIndicator",fe=o.forwardRef((t,a)=>{const{__scopeCheckbox:s,forceMount:p,...i}=t,c=ie(ue,s);return o.createElement(K,{present:p||N(c.state)||c.state===!0},o.createElement(P.span,I({"data-state":F(c.state),"data-disabled":c.disabled?"":void 0},i,{ref:a,style:{pointerEvents:"none",...t.style}})))}),me=t=>{const{control:a,checked:s,bubbles:p=!0,...i}=t,c=o.useRef(null),r=re(s),d=V(a);return o.useEffect(()=>{const x=c.current,b=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(b,"checked").set;if(r!==s&&f){const v=new Event("click",{bubbles:p});x.indeterminate=N(s),f.call(x,N(s)?!1:s),x.dispatchEvent(v)}},[r,s,p]),o.createElement("input",I({type:"checkbox","aria-hidden":!0,defaultChecked:N(s)?!1:s},i,{tabIndex:-1,ref:c,style:{...t.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function N(t){return t==="indeterminate"}function F(t){return N(t)?"indeterminate":t?"checked":"unchecked"}const L=de,pe=fe,B=o.forwardRef(({className:t,...a},s)=>e.jsx(L,{ref:s,className:j("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:e.jsx(pe,{className:j("flex items-center justify-center text-current"),children:e.jsx(R,{name:"Check",className:"h-4 w-4 stroke-2"})})}));B.displayName=L.displayName;const ke=({className:t="",checked:a})=>e.jsx("div",{className:j(t,"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a?"bg-primary text-primary-foreground":""),children:a&&e.jsx("div",{className:"flex items-center justify-center text-current",children:e.jsx(R,{name:"Check",className:"h-4 w-4"})})}),be=o.forwardRef((t,a)=>{const s=z(l=>l.version),p=X(l=>l.setNoticeData),[i,c]=o.useState(!1),r=U(l=>l.currentFlow);o.useEffect(()=>{x(r.name),C(r.description)},[r.name,r.description]);const[d,x]=o.useState(r.name),[b,C]=o.useState(r.description),[f,v]=o.useState(!1);return e.jsxs(w,{size:"smaller-h-full",open:f,setOpen:v,onSubmit:()=>{i?(M({id:r.id,data:r.data,description:b,name:d,last_tested_version:s,is_component:!1},d,b),p({title:W})):M(G({id:r.id,data:r.data,description:b,name:d,last_tested_version:s,is_component:!1}),d,b),v(!1)},children:[e.jsx(w.Trigger,{asChild:!0,children:t.children}),e.jsxs(w.Header,{description:Q,children:[e.jsx("span",{className:"pr-2",children:"Export"}),e.jsx(R,{name:"Download",className:"h-6 w-6 pl-1 text-foreground","aria-hidden":"true"})]}),e.jsxs(w.Content,{children:[e.jsx(ae,{name:d,description:b,setName:x,setDescription:C}),e.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[e.jsx(B,{id:"terms",checked:i,onCheckedChange:l=>{c(l)}}),e.jsx("label",{htmlFor:"terms",className:"export-modal-save-api text-sm ",children:Z})]}),e.jsx("span",{className:" text-xs text-destructive ",children:J})]}),e.jsx(w.Footer,{submit:{label:"Download Flow"}})]})}),Ee=be;function Ne({content:t,side:a,asChild:s=!0,children:p,styleClasses:i,delayDuration:c=500}){return e.jsxs(Y,{delayDuration:c,children:[e.jsx(ee,{asChild:s,children:p}),e.jsx(te,{className:j(i,"max-w-96"),side:a,avoidCollisions:!1,sticky:"always",children:t})]})}export{Ce as $,B as C,Ee as E,Ne as S,ke as a,ve as b,ae as c,re as d};
