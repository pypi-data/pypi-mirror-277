import{bt as D,X as k,bA as _,bs as S,r as o,j as e,J as j,bu as V,bw as P,bx as I,by as T,bz as q,dL as z,I as R,aj as K,u as X,h as U,B as w,dO as A,dP as W,cH as G,dQ as J,dR as Q,dS as Z,dT as Y,dU as ee,dV as te}from"./index-ab0e1d9a.js";import{I as M}from"./input-0d11281d.js";import{L as y,T as ne}from"./textarea-79496fcd.js";function Ce(t){const a=t+"CollectionProvider",[s,m]=D(a),[i,c]=s(a,{collectionRef:{current:null},itemMap:new Map}),r=l=>{const{scope:p,children:$}=l,n=k.useRef(null),u=k.useRef(new Map).current;return k.createElement(i,{scope:p,itemMap:u,collectionRef:n},$)},d=t+"CollectionSlot",h=k.forwardRef((l,p)=>{const{scope:$,children:n}=l,u=c(d,$),E=_(p,u.collectionRef);return k.createElement(S,{ref:E},n)}),b=t+"CollectionItemSlot",C="data-radix-collection-item",f=k.forwardRef((l,p)=>{const{scope:$,children:n,...u}=l,E=k.useRef(null),x=_(p,E),g=c(b,$);return k.useEffect(()=>(g.itemMap.set(E,{ref:E,...u}),()=>void g.itemMap.delete(E))),k.createElement(S,{[C]:"",ref:x},n)});function v(l){const p=c(t+"CollectionConsumer",l);return k.useCallback(()=>{const n=p.collectionRef.current;if(!n)return[];const u=Array.from(n.querySelectorAll(`[${C}]`));return Array.from(p.itemMap.values()).sort((g,H)=>u.indexOf(g.ref.current)-u.indexOf(H.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:r,Slot:h,ItemSlot:f},v,m]}const oe=o.createContext(void 0);function ve(t){const a=o.useContext(oe);return t||a||"ltr"}const se=({name:t,invalidNameList:a,description:s,endpointName:m,maxLength:i=50,setName:c,setDescription:r,setEndpointName:d})=>{const[h,b]=o.useState(!1),[C,f]=o.useState(!0),v=n=>{const{value:u}=n.target;u.length>=i?b(!0):b(!1),c(u)},l=n=>{r(n.target.value)},p=n=>{const u=/^[a-zA-Z0-9_-]+$/.test(n.target.value)&&n.target.value.length<=i||n.target.value.length===0;f(u),d(n.target.value)},$=n=>n.target.select();return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsxs("div",{className:"edit-flow-arrangement",children:[e.jsxs("span",{className:"font-medium",children:["Name",c?"":":"]})," ",h&&e.jsx("span",{className:"edit-flow-span",children:"Character limit reached"})]}),c?e.jsx(M,{className:"nopan nodelete nodrag noundo nocopy mt-2 font-normal",onChange:v,type:"text",name:"name",value:t??"",placeholder:"Flow name",id:"name",maxLength:i,onDoubleClickCapture:n=>{$(n)}}):e.jsx("span",{className:"font-normal text-muted-foreground word-break-break-word",children:t})]}),e.jsxs(y,{children:[e.jsx("div",{className:"edit-flow-arrangement mt-3",children:e.jsxs("span",{className:"font-medium ",children:["Description",r?" (optional)":":"]})}),r?e.jsx(ne,{name:"description",id:"description",onChange:l,value:s,placeholder:"Flow description",className:"mt-2 max-h-[100px] resize-none font-normal",rows:3,onDoubleClickCapture:n=>{$(n)}}):e.jsx("span",{className:j("font-normal text-muted-foreground word-break-break-word",s===""?"font-light italic":""),children:s===""?"No description":s})]}),d&&e.jsxs(y,{children:[e.jsxs("div",{className:"edit-flow-arrangement mt-3",children:[e.jsx("span",{className:"font-medium",children:"Endpoint Name"}),!C&&e.jsxs("span",{className:"edit-flow-span",children:["Invalid endpoint name. Use only letters, numbers, hyphens, and underscores (",i," characters max)."]})]}),e.jsx(M,{className:"nopan nodelete nodrag noundo nocopy mt-2 font-normal",onChange:p,type:"text",name:"endpoint_name",value:m??"",placeholder:"An alternative name to run the endpoint",maxLength:i,id:"endpoint_name",onDoubleClickCapture:n=>{$(n)}})]})]})},ae=se;function re(t){const a=o.useRef({value:t,previous:t});return o.useMemo(()=>(a.current.value!==t&&(a.current.previous=a.current.value,a.current.value=t),a.current.previous),[t])}const O="Checkbox",[ce,ge]=D(O),[le,ie]=ce(O),de=o.forwardRef((t,a)=>{const{__scopeCheckbox:s,name:m,checked:i,defaultChecked:c,required:r,disabled:d,value:h="on",onCheckedChange:b,...C}=t,[f,v]=o.useState(null),l=_(a,x=>v(x)),p=o.useRef(!1),$=f?!!f.closest("form"):!0,[n=!1,u]=V({prop:i,defaultProp:c,onChange:b}),E=o.useRef(n);return o.useEffect(()=>{const x=f==null?void 0:f.form;if(x){const g=()=>u(E.current);return x.addEventListener("reset",g),()=>x.removeEventListener("reset",g)}},[f,u]),o.createElement(le,{scope:s,state:n,disabled:d},o.createElement(P.button,I({type:"button",role:"checkbox","aria-checked":N(n)?"mixed":n,"aria-required":r,"data-state":F(n),"data-disabled":d?"":void 0,disabled:d,value:h},C,{ref:l,onKeyDown:T(t.onKeyDown,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:T(t.onClick,x=>{u(g=>N(g)?!0:!g),$&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})),$&&o.createElement(pe,{control:f,bubbles:!p.current,name:m,value:h,checked:n,required:r,disabled:d,style:{transform:"translateX(-100%)"}}))}),ue="CheckboxIndicator",fe=o.forwardRef((t,a)=>{const{__scopeCheckbox:s,forceMount:m,...i}=t,c=ie(ue,s);return o.createElement(q,{present:m||N(c.state)||c.state===!0},o.createElement(P.span,I({"data-state":F(c.state),"data-disabled":c.disabled?"":void 0},i,{ref:a,style:{pointerEvents:"none",...t.style}})))}),pe=t=>{const{control:a,checked:s,bubbles:m=!0,...i}=t,c=o.useRef(null),r=re(s),d=z(a);return o.useEffect(()=>{const h=c.current,b=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(b,"checked").set;if(r!==s&&f){const v=new Event("click",{bubbles:m});h.indeterminate=N(s),f.call(h,N(s)?!1:s),h.dispatchEvent(v)}},[r,s,m]),o.createElement("input",I({type:"checkbox","aria-hidden":!0,defaultChecked:N(s)?!1:s},i,{tabIndex:-1,ref:c,style:{...t.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function N(t){return t==="indeterminate"}function F(t){return N(t)?"indeterminate":t?"checked":"unchecked"}const L=de,me=fe,B=o.forwardRef(({className:t,...a},s)=>e.jsx(L,{ref:s,className:j("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:e.jsx(me,{className:j("flex items-center justify-center text-current"),children:e.jsx(R,{name:"Check",className:"h-4 w-4 stroke-2"})})}));B.displayName=L.displayName;const ke=({className:t="",checked:a})=>e.jsx("div",{className:j(t,"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a?"bg-primary text-primary-foreground":""),children:a&&e.jsx("div",{className:"flex items-center justify-center text-current",children:e.jsx(R,{name:"Check",className:"h-4 w-4"})})}),be=o.forwardRef((t,a)=>{const s=K(l=>l.version),m=X(l=>l.setNoticeData),[i,c]=o.useState(!1),r=U(l=>l.currentFlow);o.useEffect(()=>{h(r.name),C(r.description)},[r.name,r.description]);const[d,h]=o.useState(r.name),[b,C]=o.useState(r.description),[f,v]=o.useState(!1);return e.jsxs(w,{size:"smaller-h-full",open:f,setOpen:v,onSubmit:()=>{i?(A({id:r.id,data:r.data,description:b,name:d,last_tested_version:s,is_component:!1},d,b),m({title:W})):A(G({id:r.id,data:r.data,description:b,name:d,last_tested_version:s,is_component:!1}),d,b),v(!1)},children:[e.jsx(w.Trigger,{asChild:!0,children:t.children}),e.jsxs(w.Header,{description:J,children:[e.jsx("span",{className:"pr-2",children:"Export"}),e.jsx(R,{name:"Download",className:"h-6 w-6 pl-1 text-foreground","aria-hidden":"true"})]}),e.jsxs(w.Content,{children:[e.jsx(ae,{name:d,description:b,setName:h,setDescription:C}),e.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[e.jsx(B,{id:"terms",checked:i,onCheckedChange:l=>{c(l)}}),e.jsx("label",{htmlFor:"terms",className:"export-modal-save-api text-sm ",children:Q})]}),e.jsx("span",{className:" text-xs text-destructive ",children:Z})]}),e.jsx(w.Footer,{submit:{label:"Download Flow"}})]})}),Ee=be;function Ne({content:t,side:a,asChild:s=!0,children:m,styleClasses:i,delayDuration:c=500}){return e.jsxs(Y,{defaultOpen:!m,delayDuration:c,children:[e.jsx(ee,{asChild:s,children:m}),e.jsx(te,{className:j(i,"max-w-96"),side:a,avoidCollisions:!1,sticky:"always",children:t})]})}export{Ce as $,B as C,Ee as E,Ne as S,ke as a,ve as b,ae as c,re as d};
