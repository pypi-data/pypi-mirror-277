import{r as l,u as T,ag as E,aX as j,j as a,B as t,I as G,b as N,de as O}from"./index-71c35d0b.js";import{I as h}from"./index-6658e47c.js";import{I as A}from"./input-8d6f9961.js";import{L as n,T as B}from"./textarea-d0c5be10.js";function k(i){return i.sort((r,o)=>r.localeCompare(o))}function K({children:i}){const[r,o]=l.useState(""),[d,c]=l.useState(""),[p,b]=l.useState("Generic"),[u,f]=l.useState([]),[v,m]=l.useState(!1),y=T(e=>e.setErrorData),C=E(e=>e.ComponentFields),g=new Set(Object.keys(j(e=>e.unavaliableFields))),S=()=>{const e=Array.from(C).filter(s=>!g.has(s));return k(e)},w=j(e=>e.addGlobalVariable);function V(){O({name:r,type:p,value:d,default_fields:u}).then(s=>{const{name:x,id:I,type:F}=s.data;w(x,I,F,u),o(""),c(""),b(""),f([]),m(!1)}).catch(s=>{y({title:"Error creating variable",list:[s.response.data.detail??"Unknown error"]})})}return a.jsxs(t,{open:v,setOpen:m,size:"x-small",children:[a.jsxs(t.Header,{description:"This variable will be encrypted and will be available for you to use in any of your projects.",children:[a.jsx("span",{className:"pr-2",children:" Create Variable "}),a.jsx(G,{name:"Globe",className:"h-6 w-6 pl-1 text-primary ","aria-hidden":"true"})]}),a.jsx(t.Trigger,{children:i}),a.jsx(t.Content,{children:a.jsxs("div",{className:"flex h-full w-full flex-col gap-4 align-middle",children:[a.jsx(n,{children:"Variable Name"}),a.jsx(A,{value:r,onChange:e=>{o(e.target.value)},placeholder:"Insert a name for the variable..."}),a.jsx(n,{children:"Type (optional)"}),a.jsx(h,{setSelectedOption:e=>{b(e)},selectedOption:p,password:!1,options:["Generic","Credential"],placeholder:"Choose a type for the variable...",id:"type-global-variables"}),a.jsx(n,{children:"Value"}),p==="Credential"?a.jsx(h,{password:!0,value:d,onChange:e=>{c(e)},placeholder:"Insert a value for the variable..."}):a.jsx(B,{value:d,onChange:e=>{c(e.target.value)},placeholder:"Insert a value for the variable...",className:"w-full resize-none custom-scroll"}),a.jsx(n,{children:"Apply To Fields (optional)"}),a.jsx(h,{setSelectedOptions:e=>f(e),selectedOptions:u,options:S(),password:!1,placeholder:"Choose a field for the variable...",id:"apply-to-fields"})]})}),a.jsx(t.Footer,{children:a.jsx(N,{onClick:V,children:"Save Variable"})})]})}export{K as A};
