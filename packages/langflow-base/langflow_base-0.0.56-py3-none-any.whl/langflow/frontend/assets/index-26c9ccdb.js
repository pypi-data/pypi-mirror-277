import{j as e,aO as p,c as O,r as i,aP as k,A as m,u as f,I as F,av as w,aQ as j,ay as g,ax as C,aw as S,aR as v,b as y,aS as U,aT as G,aU as M,aV as N,aW as P,i as H,m as V}from"./index-71c35d0b.js";import{$ as E,e as R,a as _,d as b}from"./index-86bb14e4.js";import{I as T}from"./index-6658e47c.js";import"./index-f9760e62.js";import"./input-8d6f9961.js";function W({value:o,onChange:d}){return e.jsx("div",{className:"flex flex-wrap items-center justify-start gap-2",children:p.map((r,c)=>e.jsx("div",{onClick:()=>{d(r)},className:"duration-400 h-12 w-12 cursor-pointer rounded-full transition-all "+r+(o===r?" shadow-lg ring-2 ring-primary":"")},c))})}function K(){const o=O(a=>a.setCurrentFlowId),[d,r]=i.useState(k),{autoLogin:c}=i.useContext(m);i.useEffect(()=>{o("")},[]);const h=f(a=>a.setSuccessData),u=f(a=>a.setErrorData),{userData:s,setUserData:A}=i.useContext(m),{password:l,cnfPassword:x,gradient:t}=d;async function $(){if(l!==x){u({title:U,list:[G]});return}try{l!==""&&await M(s.id,{password:l}),n({target:{name:"password",value:""}}),n({target:{name:"cnfPassword",value:""}}),h({title:N})}catch(a){u({title:P,list:[a.response.data.detail]})}}async function I(){try{if(t!==""&&await H(s.id,{profile_image:t}),t!==""){let a=V.cloneDeep(s);a.profile_image=t,A(a)}h({title:N})}catch(a){u({title:P,list:[a.response.data.detail]})}}function n({target:{name:a,value:D}}){r(L=>({...L,[a]:D}))}return e.jsxs("div",{className:"flex h-full w-full flex-col gap-6",children:[e.jsx("div",{className:"flex w-full items-center justify-between gap-4 space-y-0.5",children:e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("h2",{className:"flex items-center text-lg font-semibold tracking-tight",children:["General",e.jsx(F,{name:"SlidersHorizontal",className:"ml-2 h-5 w-5 text-primary"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage settings related to Langflow and your account."})]})}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(E,{onSubmit:a=>{I(),a.preventDefault()},children:e.jsxs(w,{"x-chunk":"dashboard-04-chunk-1",children:[e.jsxs(j,{children:[e.jsx(g,{children:"Profile Gradient"}),e.jsx(C,{children:"Choose the gradient that appears as your profile picture."})]}),e.jsx(S,{children:e.jsx("div",{className:"py-2",children:e.jsx(W,{value:t==""?(s==null?void 0:s.profile_image)??p[parseInt((s==null?void 0:s.id)??"",30)%p.length]:t,onChange:a=>{n({target:{name:"gradient",value:a}})}})})}),e.jsx(v,{className:"border-t px-6 py-4",children:e.jsx(R,{asChild:!0,children:e.jsx(y,{type:"submit",children:"Save"})})})]})}),!c&&e.jsx(E,{onSubmit:a=>{$(),a.preventDefault()},children:e.jsxs(w,{"x-chunk":"dashboard-04-chunk-2",children:[e.jsxs(j,{children:[e.jsx(g,{children:"Password"}),e.jsx(C,{children:"Type your new password and confirm it."})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsxs(_,{name:"password",className:"w-full",children:[e.jsx(T,{id:"pasword",onChange:a=>{n({target:{name:"password",value:a}})},value:l,isForm:!0,password:!0,placeholder:"Password",className:"w-full"}),e.jsx(b,{match:"valueMissing",className:"field-invalid",children:"Please enter your password"})]}),e.jsxs(_,{name:"cnfPassword",className:"w-full",children:[e.jsx(T,{id:"cnfPassword",onChange:a=>{n({target:{name:"cnfPassword",value:a}})},value:x,isForm:!0,password:!0,placeholder:"Confirm Password",className:"w-full"}),e.jsx(b,{className:"field-invalid",match:"valueMissing",children:"Please confirm your password"})]})]})}),e.jsx(v,{className:"border-t px-6 py-4",children:e.jsx(R,{asChild:!0,children:e.jsx(y,{type:"submit",children:"Save"})})})]})})]})]})}export{K as default};
