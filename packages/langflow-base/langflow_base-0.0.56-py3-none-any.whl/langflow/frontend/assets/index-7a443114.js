import{bl as D,R as k,bs as _,bk as S,r as o,j as e,an as j,bm as q,bo as P,bp as I,bq as T,br as H,dL as K,I as R,aa as z,u as X,c as G,B as w,dO as U,dP as W,dQ as Q,b as Z,dR as M,dS as J,cG as Y,dT as ee,dU as te,dV as ne}from"./index-71c35d0b.js";import{I as A}from"./input-8d6f9961.js";import{L as y,T as oe}from"./textarea-d0c5be10.js";function ve(t){const r=t+"CollectionProvider",[s,m]=D(r),[l,c]=s(r,{collectionRef:{current:null},itemMap:new Map}),a=i=>{const{scope:p,children:C}=i,n=k.useRef(null),u=k.useRef(new Map).current;return k.createElement(l,{scope:p,itemMap:u,collectionRef:n},C)},d=t+"CollectionSlot",b=k.forwardRef((i,p)=>{const{scope:C,children:n}=i,u=c(d,C),E=_(p,u.collectionRef);return k.createElement(S,{ref:E},n)}),h=t+"CollectionItemSlot",$="data-radix-collection-item",f=k.forwardRef((i,p)=>{const{scope:C,children:n,...u}=i,E=k.useRef(null),x=_(p,E),g=c(h,C);return k.useEffect(()=>(g.itemMap.set(E,{ref:E,...u}),()=>void g.itemMap.delete(E))),k.createElement(S,{[$]:"",ref:x},n)});function v(i){const p=c(t+"CollectionConsumer",i);return k.useCallback(()=>{const n=p.collectionRef.current;if(!n)return[];const u=Array.from(n.querySelectorAll(`[${$}]`));return Array.from(p.itemMap.values()).sort((g,V)=>u.indexOf(g.ref.current)-u.indexOf(V.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:a,Slot:b,ItemSlot:f},v,m]}const se=o.createContext(void 0);function ge(t){const r=o.useContext(se);return t||r||"ltr"}const re=({name:t,invalidNameList:r,description:s,endpointName:m,maxLength:l=50,setName:c,setDescription:a,setEndpointName:d})=>{const[b,h]=o.useState(!1),[$,f]=o.useState(!0),v=n=>{const{value:u}=n.target;u.length>=l?h(!0):h(!1),c(u)},i=n=>{a(n.target.value)},p=n=>{const u=/^[a-zA-Z0-9_-]+$/.test(n.target.value)&&n.target.value.length<=l||n.target.value.length===0;f(u),d(n.target.value)},C=n=>n.target.select();return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsxs("div",{className:"edit-flow-arrangement",children:[e.jsxs("span",{className:"font-medium",children:["Name",c?"":":"]})," ",b&&e.jsx("span",{className:"edit-flow-span",children:"Character limit reached"})]}),c?e.jsx(A,{className:"nopan nodelete nodrag noundo nocopy mt-2 font-normal",onChange:v,type:"text",name:"name",value:t??"",placeholder:"Flow name",id:"name",maxLength:l,onDoubleClickCapture:n=>{C(n)}}):e.jsx("span",{className:"font-normal text-muted-foreground word-break-break-word",children:t})]}),e.jsxs(y,{children:[e.jsx("div",{className:"edit-flow-arrangement mt-3",children:e.jsxs("span",{className:"font-medium ",children:["Description",a?" (optional)":":"]})}),a?e.jsx(oe,{name:"description",id:"description",onChange:i,value:s,placeholder:"Flow description",className:"mt-2 max-h-[100px] resize-none font-normal",rows:3,onDoubleClickCapture:n=>{C(n)}}):e.jsx("span",{className:j("font-normal text-muted-foreground word-break-break-word",s===""?"font-light italic":""),children:s===""?"No description":s})]}),d&&e.jsxs(y,{children:[e.jsxs("div",{className:"edit-flow-arrangement mt-3",children:[e.jsx("span",{className:"font-medium",children:"Endpoint name:"}),!$&&e.jsxs("span",{className:"edit-flow-span",children:["Invalid endpoint name. Use only letters, numbers, hyphens, and underscores (",l," characters max)."]})]}),e.jsx(A,{className:"nopan nodelete nodrag noundo nocopy mt-2 font-normal",onChange:p,type:"text",name:"endpoint_name",value:m??"",placeholder:"An alternative name for the run endpoint",maxLength:l,id:"endpoint_name",onDoubleClickCapture:n=>{C(n)}})]})]})},ae=re;function ce(t){const r=o.useRef({value:t,previous:t});return o.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}const O="Checkbox",[ie,ke]=D(O),[le,de]=ie(O),ue=o.forwardRef((t,r)=>{const{__scopeCheckbox:s,name:m,checked:l,defaultChecked:c,required:a,disabled:d,value:b="on",onCheckedChange:h,...$}=t,[f,v]=o.useState(null),i=_(r,x=>v(x)),p=o.useRef(!1),C=f?!!f.closest("form"):!0,[n=!1,u]=q({prop:l,defaultProp:c,onChange:h}),E=o.useRef(n);return o.useEffect(()=>{const x=f==null?void 0:f.form;if(x){const g=()=>u(E.current);return x.addEventListener("reset",g),()=>x.removeEventListener("reset",g)}},[f,u]),o.createElement(le,{scope:s,state:n,disabled:d},o.createElement(P.button,I({type:"button",role:"checkbox","aria-checked":N(n)?"mixed":n,"aria-required":a,"data-state":F(n),"data-disabled":d?"":void 0,disabled:d,value:b},$,{ref:i,onKeyDown:T(t.onKeyDown,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:T(t.onClick,x=>{u(g=>N(g)?!0:!g),C&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})),C&&o.createElement(me,{control:f,bubbles:!p.current,name:m,value:b,checked:n,required:a,disabled:d,style:{transform:"translateX(-100%)"}}))}),fe="CheckboxIndicator",pe=o.forwardRef((t,r)=>{const{__scopeCheckbox:s,forceMount:m,...l}=t,c=de(fe,s);return o.createElement(H,{present:m||N(c.state)||c.state===!0},o.createElement(P.span,I({"data-state":F(c.state),"data-disabled":c.disabled?"":void 0},l,{ref:r,style:{pointerEvents:"none",...t.style}})))}),me=t=>{const{control:r,checked:s,bubbles:m=!0,...l}=t,c=o.useRef(null),a=ce(s),d=K(r);return o.useEffect(()=>{const b=c.current,h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(a!==s&&f){const v=new Event("click",{bubbles:m});b.indeterminate=N(s),f.call(b,N(s)?!1:s),b.dispatchEvent(v)}},[a,s,m]),o.createElement("input",I({type:"checkbox","aria-hidden":!0,defaultChecked:N(s)?!1:s},l,{tabIndex:-1,ref:c,style:{...t.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function N(t){return t==="indeterminate"}function F(t){return N(t)?"indeterminate":t?"checked":"unchecked"}const L=ue,he=pe,B=o.forwardRef(({className:t,...r},s)=>e.jsx(L,{ref:s,className:j("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(he,{className:j("flex items-center justify-center text-current"),children:e.jsx(R,{name:"Check",className:"h-4 w-4 stroke-2"})})}));B.displayName=L.displayName;const Ee=({className:t="",checked:r})=>e.jsx("div",{className:j(t,"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r?"bg-primary text-primary-foreground":""),children:r&&e.jsx("div",{className:"flex items-center justify-center text-current",children:e.jsx(R,{name:"Check",className:"h-4 w-4"})})}),xe=o.forwardRef((t,r)=>{const s=z(i=>i.version),m=X(i=>i.setNoticeData),[l,c]=o.useState(!0),a=G(i=>i.currentFlow);o.useEffect(()=>{b(a.name),$(a.description)},[a.name,a.description]);const[d,b]=o.useState(a.name),[h,$]=o.useState(a.description),[f,v]=o.useState(!1);return e.jsxs(w,{size:"smaller-h-full",open:f,setOpen:v,children:[e.jsx(w.Trigger,{asChild:!0,children:t.children}),e.jsxs(w.Header,{description:U,children:[e.jsx("span",{className:"pr-2",children:"Export"}),e.jsx(R,{name:"Download",className:"h-6 w-6 pl-1 text-foreground","aria-hidden":"true"})]}),e.jsxs(w.Content,{children:[e.jsx(ae,{name:d,description:h,setName:b,setDescription:$}),e.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[e.jsx(B,{id:"terms",checked:l,onCheckedChange:i=>{c(i)}}),e.jsx("label",{htmlFor:"terms",className:"export-modal-save-api text-sm ",children:W})]}),e.jsx("span",{className:" text-xs text-destructive ",children:Q})]}),e.jsx(w.Footer,{children:e.jsx(Z,{onClick:()=>{l?(M({id:a.id,data:a.data,description:h,name:d,last_tested_version:s,is_component:!1},d,h),m({title:J})):M(Y({id:a.id,data:a.data,description:h,name:d,last_tested_version:s,is_component:!1}),d,h),v(!1)},type:"submit",children:"Download Flow"})})]})}),Ne=xe;function we({content:t,side:r,asChild:s=!0,children:m,styleClasses:l,delayDuration:c=500}){return e.jsxs(ee,{delayDuration:c,children:[e.jsx(te,{asChild:s,children:m}),e.jsx(ne,{className:j(l,"max-w-96"),side:r,avoidCollisions:!1,sticky:"always",children:t})]})}export{ve as $,B as C,Ne as E,we as S,Ee as a,ge as b,ae as c,ce as d};
