import{aX as t,u as v,r,j as a,I as i,b as d,an as N,av as V,aw as y,aY as E,aZ as S}from"./index-71c35d0b.js";import{A as C}from"./addNewVariableButton-f20ab845.js";import{D as k}from"./index-0e38933a.js";import{T as D}from"./index-a9178689.js";import"./index-6658e47c.js";import"./index-86bb14e4.js";import"./index-f9760e62.js";import"./input-8d6f9961.js";import"./textarea-d0c5be10.js";function O(){const n=t(e=>e.globalVariablesEntries),m=t(e=>e.removeGlobalVariable),c=t(e=>e.globalVariables),b=v(e=>e.setErrorData),f=t(e=>e.getVariableId),u=e=>e.value!==""?a.jsx("div",{children:a.jsx(E,{variant:"outline",size:"md",className:"font-normal",children:e.value})}):a.jsx("div",{}),[x,p]=r.useState([]);r.useEffect(()=>{const e=[];n!==void 0&&(n.forEach(l=>{const s=c[l];e.push({type:s.type,id:s.id,default_fields:(s.default_fields??[]).join(", "),name:l})}),p(e))},[c]);const h=({options:e,value:l,onValueChange:s})=>a.jsx(k,{options:e,value:l,onSelect:s,children:a.jsx("div",{className:"-mt-1.5 w-full"})}),[g,G]=r.useState([{headerCheckboxSelection:!0,checkboxSelection:!0,showDisabledCheckboxes:!0,headerName:"Variable Name",field:"name",flex:2},{field:"type",cellRenderer:u,cellEditor:h,cellEditorParams:{options:["Generic","Credential"]},flex:1,editable:!1},{headerName:"Apply To Fields",field:"default_fields",flex:1,editable:!1,resizable:!1}]),[o,j]=r.useState([]);async function w(){const e=o.map(async l=>{const s=f(l);await S(s)});Promise.all(e).then(()=>{o.forEach(l=>{m(l)})}).catch(()=>{b({title:"Error deleting global variables."})})}return a.jsxs("div",{className:"flex h-full w-full flex-col justify-between gap-6",children:[a.jsxs("div",{className:"flex w-full items-center justify-between gap-4 space-y-0.5",children:[a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsxs("h2",{className:"flex items-center text-lg font-semibold tracking-tight",children:["Global Variables",a.jsx(i,{name:"Globe",className:"ml-2 h-5 w-5 text-primary"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage global variables and assign them to fields."})]}),a.jsxs("div",{className:"flex flex-shrink-0 items-center gap-2",children:[a.jsx(d,{"data-testid":"api-key-button-store",variant:"primary",className:"group px-2",disabled:o.length===0,onClick:w,children:a.jsx(i,{name:"Trash2",className:N("h-5 w-5 text-destructive group-disabled:text-primary")})}),a.jsx(C,{children:a.jsxs(d,{"data-testid":"api-key-button-store",variant:"primary",children:[a.jsx(i,{name:"Plus",className:"mr-2 w-4"}),"Add New"]})})]})]}),a.jsx("div",{className:"flex h-full w-full flex-col justify-between pb-8",children:a.jsx(V,{"x-chunk":"dashboard-04-chunk-2",className:"h-full pt-4",children:a.jsx(y,{className:"h-full",children:a.jsx(D,{overlayNoRowsTemplate:"No data available",onSelectionChanged:e=>{j(e.api.getSelectedRows().map(l=>l.name))},rowSelection:"multiple",suppressRowClickSelection:!0,pagination:!0,columnDefs:g,rowData:x})})})})]})}export{O as default};
