import{R as I,N as Fe,O as q,P as z,r as p,Q as pe,T as B,V as ee,W as Me,X,Y as Ke,Z as te,_ as J,$ as se,a0 as Pe,a1 as We,a2 as He,j as t,a3 as De,a4 as Ue,A as Xe,m as Q,B as W,a5 as Je,I as E,a6 as K,a7 as R,c as N,a8 as S,a9 as Ve,aa as Ae,ab as G,ac as Ye,ad as qe,ae as ze,af as M,ag as me,u as Qe,n as L,ah as H,ai as he,aj as Ge,ak as Ze,al as Be,s as et}from"./index-71c35d0b.js";import{C as tt,I as st}from"./index-5f664ee1.js";import{S as Ie,a as nt,b as at,c as rt,d as fe,P as ot}from"./index-da0a3414.js";import{S as Z}from"./tabs-996f42ed.js";import{H as it}from"./index-4aa4df2b.js";import{E as lt,S as ge}from"./index-7a443114.js";import{I as ct}from"./input-8d6f9961.js";import"./index-a9178689.js";import"./index-e80662d6.js";import"./textarea-d0c5be10.js";import"./index-f9760e62.js";import"./select-a3c7a073.js";import"./index-cbab13d3.js";import"./index-0e38933a.js";import"./index-6658e47c.js";import"./index-86bb14e4.js";import"./table-73ee088b.js";import"./index-90962ffa.js";import"./index-9e31ddd7.js";import"./addNewVariableButton-f20ab845.js";import"./index-946f00bf.js";import"./index-c9c9f065.js";var xe;let Ne=(xe=I.useId)!=null?xe:function(){let e=Fe(),[s,n]=I.useState(e?()=>q.nextId():null);return z(()=>{s===null&&n(q.nextId())},[s]),s!=null?""+s:void 0};function dt(e){return q.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function ye(e){var s;if(e.type)return e.type;let n=(s=e.as)!=null?s:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function ut(e,s){let[n,r]=p.useState(()=>ye(e));return z(()=>{r(ye(e))},[e.type,e.as]),z(()=>{n||s.current&&s.current instanceof HTMLButtonElement&&!s.current.hasAttribute("type")&&r("button")},[n,s]),n}function pt(e){let s=e.parentElement,n=null;for(;s&&!(s instanceof HTMLFieldSetElement);)s instanceof HTMLLegendElement&&(n=s),s=s.parentElement;let r=(s==null?void 0:s.getAttribute("disabled"))==="";return r&&mt(n)?!1:r}function mt(e){if(!e)return!1;let s=e.previousElementSibling;for(;s!==null;){if(s instanceof HTMLLegendElement)return!1;s=s.previousElementSibling}return!0}var $=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))($||{}),be;let ht=(be=I.startTransition)!=null?be:function(e){e()};var ft=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ft||{}),gt=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(gt||{});let xt={0:e=>({...e,disclosureState:te(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,s){return e.buttonId===s.buttonId?e:{...e,buttonId:s.buttonId}},3(e,s){return e.panelId===s.panelId?e:{...e,panelId:s.panelId}}},ne=p.createContext(null);ne.displayName="DisclosureContext";function ae(e){let s=p.useContext(ne);if(s===null){let n=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ae),n}return s}let re=p.createContext(null);re.displayName="DisclosureAPIContext";function Le(e){let s=p.useContext(re);if(s===null){let n=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Le),n}return s}let oe=p.createContext(null);oe.displayName="DisclosurePanelContext";function yt(){return p.useContext(oe)}function bt(e,s){return te(s.type,xt,e,s)}let jt=p.Fragment;function kt(e,s){let{defaultOpen:n=!1,...r}=e,u=p.useRef(null),i=ee(s,Me(a=>{u.current=a},e.as===void 0||e.as===p.Fragment)),m=p.useRef(null),f=p.useRef(null),c=p.useReducer(bt,{disclosureState:n?0:1,linkedPanel:!1,buttonRef:f,panelRef:m,buttonId:null,panelId:null}),[{disclosureState:l,buttonId:x},y]=c,j=X(a=>{y({type:1});let g=dt(u);if(!g||!x)return;let o=(()=>a?a instanceof HTMLElement?a:a.current instanceof HTMLElement?a.current:g.getElementById(x):g.getElementById(x))();o==null||o.focus()}),C=p.useMemo(()=>({close:j}),[j]),T=p.useMemo(()=>({open:l===0,close:j}),[l,j]),P={ref:i};return I.createElement(ne.Provider,{value:c},I.createElement(re.Provider,{value:C},I.createElement(Ke,{value:te(l,{0:J.Open,1:J.Closed})},se({ourProps:P,theirProps:r,slot:T,defaultTag:jt,name:"Disclosure"}))))}let vt="button";function wt(e,s){let n=Ne(),{id:r=`headlessui-disclosure-button-${n}`,...u}=e,[i,m]=ae("Disclosure.Button"),f=yt(),c=f===null?!1:f===i.panelId,l=p.useRef(null),x=ee(l,s,c?null:i.buttonRef),y=Pe();p.useEffect(()=>{if(!c)return m({type:2,buttonId:r}),()=>{m({type:2,buttonId:null})}},[r,m,c]);let j=X(o=>{var d;if(c){if(i.disclosureState===1)return;switch(o.key){case $.Space:case $.Enter:o.preventDefault(),o.stopPropagation(),m({type:0}),(d=i.buttonRef.current)==null||d.focus();break}}else switch(o.key){case $.Space:case $.Enter:o.preventDefault(),o.stopPropagation(),m({type:0});break}}),C=X(o=>{switch(o.key){case $.Space:o.preventDefault();break}}),T=X(o=>{var d;pt(o.currentTarget)||e.disabled||(c?(m({type:0}),(d=i.buttonRef.current)==null||d.focus()):m({type:0}))}),P=p.useMemo(()=>({open:i.disclosureState===0}),[i]),a=ut(e,l),g=c?{ref:x,type:a,onKeyDown:j,onClick:T}:{ref:x,id:r,type:a,"aria-expanded":i.disclosureState===0,"aria-controls":i.linkedPanel?i.panelId:void 0,onKeyDown:j,onKeyUp:C,onClick:T};return se({mergeRefs:y,ourProps:g,theirProps:u,slot:P,defaultTag:vt,name:"Disclosure.Button"})}let Ct="div",Ot=pe.RenderStrategy|pe.Static;function Et(e,s){let n=Ne(),{id:r=`headlessui-disclosure-panel-${n}`,...u}=e,[i,m]=ae("Disclosure.Panel"),{close:f}=Le("Disclosure.Panel"),c=Pe(),l=ee(s,i.panelRef,T=>{ht(()=>m({type:T?4:5}))});p.useEffect(()=>(m({type:3,panelId:r}),()=>{m({type:3,panelId:null})}),[r,m]);let x=We(),y=(()=>x!==null?(x&J.Open)===J.Open:i.disclosureState===0)(),j=p.useMemo(()=>({open:i.disclosureState===0,close:f}),[i,f]),C={ref:l,id:r};return I.createElement(oe.Provider,{value:i.panelId},se({mergeRefs:c,ourProps:C,theirProps:u,slot:j,defaultTag:Ct,features:Ot,visible:y,name:"Disclosure.Panel"}))}let Tt=B(kt),_t=B(wt),Pt=B(Et),F=Object.assign(Tt,{Button:_t,Panel:Pt});const U=He((e,s)=>({tweak:[],setTweak:n=>e({tweak:n}),tweaksList:[],setTweaksList:n=>e({tweaksList:n})}));function Dt(e){return t.jsx("div",{className:"w-[200px]",children:t.jsx("span",{children:e!=null&&e!=""?e:"None"})})}function je(e){return e.data.nodes.reduce((s,n)=>(s[n.data.id]={},s),{})}const At=(e,s)=>e.data.node.template[s]&&s.charAt(0)!=="_"&&e.data.node.template[s].show&&De.has(e.data.node.template[s].type)&&s!=="code",It=(e,s)=>(typeof e=="string"&&s.type==="float"&&(e=parseFloat(e)),typeof e=="string"&&s.type==="int"&&(e=parseInt(e)),s.list===!0&&Array.isArray(e)&&(e=e==null?void 0:e.filter(n=>n!=="")),s.type==="dict"&&Array.isArray(e)&&(e=Ue(e)),s.type==="NestedDict"&&(e=JSON.stringify(e)),e);function ke(e,s,n,r){const u=n[0];return`curl -X POST \\
    "${window.location.protocol}//${window.location.host}/api/v1/run/${r||e}?stream=false" \\
    -H 'Content-Type: application/json'\\${s?"":`
  -H 'x-api-key: <your api key>'\\`}
    -d '{"input_value": "message",
    "output_type": "chat",
    "input_type": "chat",
    "tweaks": ${JSON.stringify(u,null,2)}}'
    `}function Nt(e,s,n){return`curl -X POST \\
  "${window.location.protocol}//${window.location.host}/api/v1/webhook/${n||e}" \\
  -H 'Content-Type: application/json'\\${s?"":`
  -H 'x-api-key: <your api key>'\\`}
  -d '{"any": "data"}'
  `}const Lt=e=>{let s=[];return e.data.nodes.forEach(r=>{r.data.node.template&&Object.keys(r.data.node.template).filter(u=>u.charAt(0)!=="_"&&r.data.node.template[u].show&&De.has(r.data.node.template[u].type)).map((u,i)=>{s.push(r.id)})}),s.filter((r,u,i)=>i.indexOf(r)===u)};function ve(e,s,n){const r=n[0];return`import requests
from typing import Optional

BASE_API_URL = "${window.location.protocol}//${window.location.host}/api/v1/run"
FLOW_ID = "${e}"
# You can tweak the flow by adding a tweaks dictionary
# e.g {"OpenAI-XXXXX": {"model_name": "gpt-4"}}
TWEAKS = ${JSON.stringify(r,null,2)}

def run_flow(message: str,
  flow_id: str,
  output_type: str = "chat",
  input_type: str = "chat",
  tweaks: Optional[dict] = None,
  api_key: Optional[str] = None) -> dict:
    """
    Run a flow with a given message and optional tweaks.

    :param message: The message to send to the flow
    :param flow_id: The ID of the flow to run
    :param tweaks: Optional tweaks to customize the flow
    :return: The JSON response from the flow
    """
    api_url = f"{BASE_API_URL}/{flow_id}"

    payload = {
        "input_value": message,
        "output_type": output_type,
        "input_type": input_type,
    }
    headers = None
    if tweaks:
        payload["tweaks"] = tweaks
    if api_key:
        headers = {"x-api-key": api_key}
    response = requests.post(api_url, json=payload, headers=headers)
    return response.json()

# Setup any tweaks you want to apply to the flow
message = "message"
${s?"":'api_key = "<your api key>"'}
print(run_flow(message=message, flow_id=FLOW_ID, tweaks=TWEAKS${s?"":", api_key=api_key"}))`}function we(e,s){const n=s[0];return`from langflow.load import run_flow_from_json
TWEAKS = ${JSON.stringify(n,null,2)}

result = run_flow_from_json(flow="${e}.json",
                            input_value="message",
                            fallback_to_env_vars=True, # False by default
                            tweaks=TWEAKS)`}const $t=(e,s,n,r)=>{let u=e??"";if(r.length>0)for(const i of r)Object.keys(i).forEach(m=>{const f=i[m];m==s.id&&Object.keys(f).forEach(c=>{c==n.name&&(u=f[c])})});else return e??"";return u};function Ce(e,s,n){return`<script src="https://cdn.jsdelivr.net/gh/langflow-ai/langflow-embedded-chat@1.0_alpha/dist/build/static/js/bundle.min.js"><\/script>

  <langflow-chat
    window_title="${s}"
    flow_id="${e}"
    host_url="http://localhost:7860"${n?"":`
    api_key="..."`}

  ></langflow-chat>`}function Y(e,s=!1,n=!1){const r=[{name:"Run cURL",mode:"bash",image:"https://curl.se/logo/curl-symbol-transparent.png",language:"sh",code:e[0]},{name:"Python API",mode:"python",image:"https://images.squarespace-cdn.com/content/v1/5df3d8c5d2be5962e4f87890/1628015119369-OY4TV3XJJ53ECO0W2OLQ/Python+API+Training+Logo.png?format=1000w",language:"py",code:e[2]},{name:"Python Code",mode:"python",image:"https://cdn-icons-png.flaticon.com/512/5968/5968350.png",language:"py",code:e[3]},{name:"Chat Widget HTML",description:"Insert this code anywhere in your &lt;body&gt; tag. To use with react and other libs, check our <a class='link-color' href='https://langflow.org/guidelines/widget'>documentation</a>.",mode:"html",image:"https://cdn-icons-png.flaticon.com/512/5968/5968350.png",language:"html",code:e[4]}];return s&&r.splice(1,0,{name:"Webhook cURL",mode:"bash",image:"https://curl.se/logo/curl-symbol-transparent.png",language:"sh",code:e[1]}),n&&r.push({name:"Tweaks",mode:"python",image:"https://cdn-icons-png.flaticon.com/512/5968/5968350.png",language:"py",code:e[5]}),r}const Rt=p.forwardRef(({flow:e,children:s},n)=>{const r=U(b=>b.tweak),u=U(b=>b.setTweak),i=U(b=>b.setTweaksList),m=U(b=>b.tweaksList),[f,c]=p.useState(!1),{autoLogin:l}=p.useContext(Xe),[x,y]=p.useState(!1),[j,C]=p.useState("0"),T=ve(e==null?void 0:e.id,l,r),P=ke(e==null?void 0:e.id,l,r,e==null?void 0:e.endpoint_name),a=Nt(e==null?void 0:e.id,l,e==null?void 0:e.endpoint_name),g=we(e==null?void 0:e.name,r),o=Ce(e==null?void 0:e.id,e==null?void 0:e.name,l);console.log("flow",e);const d=e.webhook,_=je(e),k=[P,a,T,g,o,g],[h,v]=p.useState(Y(k,d)),$e=e&&e.data&&e.data.nodes&&r&&(r==null?void 0:r.length)>0&&f===!0,ie=()=>{const b=[],O=je(e);b.push(O),u(b),ce(b)};p.useEffect(()=>{e.data.nodes.length==0?(u([]),i([])):ie(),Re(),Object.keys(_).length>0&&C("0"),v(Y(k,d,!0))},[e.data.nodes,x]),p.useEffect(()=>{$e?e.data.nodes.forEach(O=>{const D=O.id,A=O.data.node.template;Object.keys(A).forEach(w=>{At(O,w)&&le(D,O.data.node.template[w].value,O.data.node.template[w])})}):ie()},[f]);const Re=()=>{i(Lt(e))};async function le(b,O,D){O=It(O,D);const A=r.find(w=>w.hasOwnProperty(b));if(A)A[b][D.name]=O,A[b][D.name]==D.value&&r.forEach(w=>{var de;if(w[b]&&((de=Object.keys(w[b]))==null?void 0:de.length)===0){const Se=r.filter(ue=>{const V=ue[Object.keys(ue)[0]].prop;return V!=null&&V!==""});u(Se)}});else{const w={[b]:{[D.name]:O}};r.push(w)}if(r&&r.length>0){const w=Q.cloneDeep(r);ce(w),u(w)}}const ce=b=>{const O=ve(e==null?void 0:e.id,l,b),D=ke(e==null?void 0:e.id,l,b,e==null?void 0:e.endpoint_name),A=we(e==null?void 0:e.name,b),w=Ce(e==null?void 0:e.id,e==null?void 0:e.name,l);h&&(h==null?void 0:h.length)>0&&(h[0].code=D,h[1].code=O,h[2].code=A,h[3].code=w)};return t.jsxs(W,{open:x,setOpen:y,children:[t.jsx(W.Trigger,{asChild:!0,children:s}),t.jsxs(W.Header,{description:Je,children:[t.jsx("span",{className:"pr-2",children:"API"}),t.jsx(E,{name:"Code2",className:"h-6 w-6 pl-1 text-gray-800 dark:text-white","aria-hidden":"true"})]}),t.jsx(W.Content,{children:t.jsx(tt,{flow:e,tabs:h,activeTab:j,setActiveTab:C,tweaks:{tweak:r,tweaksList:m,buildContent:Dt,buildTweakObject:le,getValue:$t},activeTweaks:f,setActiveTweaks:c,allowExport:!0})})]})}),St=Rt;function Ft(){const[e,s]=p.useState(!1),n=K(c=>c.hasIO),r=R(c=>c.hasStore),u=R(c=>c.validApiKey),i=R(c=>c.hasApiKey),m=N(c=>c.currentFlow);p.useEffect(()=>{const c=l=>{(l.key==="K"||l.key==="k")&&(l.metaKey||l.ctrlKey)&&K.getState().hasIO&&(l.preventDefault(),s(x=>!x))};return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[]),p.useRef();const f=p.useMemo(()=>t.jsx(Ie,{is_component:!1,component:m,disabled:!i||!u||!r,children:t.jsxs("button",{disabled:!i||!u||!r,className:S("relative inline-flex h-full w-full items-center justify-center gap-[4px] bg-muted px-5 py-3 text-sm font-semibold text-foreground transition-all duration-150 ease-in-out hover:bg-background hover:bg-hover ",!i||!u||!r?" button-disable text-muted-foreground  ":""),children:[t.jsx(E,{name:"Share3",className:S("-m-0.5 -ml-1 h-6 w-6",!i||!u||!r?"extra-side-bar-save-disable":"")}),"Share"]})}),[i,u,m,r]);return t.jsx(t.Fragment,{children:t.jsx(Ve,{show:!0,appear:!0,enter:"transition ease-out duration-300",enterFrom:"translate-y-96",enterTo:"translate-y-0",leave:"transition ease-in duration-300",leaveFrom:"translate-y-0",leaveTo:"translate-y-96",children:t.jsx("div",{className:"shadow-round-btn-shadow hover:shadow-round-btn-shadow message-button-position flex items-center justify-center gap-7 rounded-sm  border bg-muted shadow-md transition-all",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex h-full w-full  gap-1 rounded-sm transition-all",children:n?t.jsx(st,{open:e,setOpen:s,disable:!n,children:t.jsxs("div",{className:"relative inline-flex w-full items-center justify-center   gap-1 px-5 py-3 text-sm font-semibold transition-all duration-500 ease-in-out hover:bg-hover",children:[t.jsx(E,{name:"BotMessageSquareIcon",className:" h-5 w-5 transition-all"}),"Playground"]})}):t.jsxs("div",{className:"relative inline-flex w-full cursor-not-allowed items-center justify-center gap-1 px-5 py-3 text-sm font-semibold text-muted-foreground transition-all duration-150 ease-in-out ease-in-out",children:[t.jsx(E,{name:"BotMessageSquareIcon",className:" h-5 w-5 transition-all"}),"Playground"]})}),t.jsx("div",{children:t.jsx(Z,{orientation:"vertical"})}),t.jsx("div",{className:"flex cursor-pointer items-center gap-2",children:m&&m.data&&t.jsx(St,{flow:m,children:t.jsxs("div",{className:S("relative inline-flex w-full items-center justify-center gap-1 px-5 py-3 text-sm font-semibold text-foreground transition-all duration-150 ease-in-out hover:bg-hover"),children:[t.jsx(E,{name:"Code2",className:" h-5 w-5"}),"API"]})})}),t.jsx("div",{children:t.jsx(Z,{orientation:"vertical"})}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{className:`side-bar-button ${!i||!u||!r?" cursor-not-allowed":" cursor-pointer"}`,children:f})})]})})})})}function Oe({button:{title:e,Icon:s,buttons:n=[]},isChild:r=!0,children:u,openDisc:i}){return t.jsx(F,{as:"div",defaultOpen:i,children:({open:m})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsxs(F.Button,{className:r?"components-disclosure-arrangement-child":"components-disclosure-arrangement","data-testid":`disclosure-${e.toLocaleLowerCase()}`,children:[t.jsxs("div",{className:"flex gap-4"+(r?" pl-2":""),children:[t.jsx(s,{strokeWidth:1.5,size:22,className:"text-primary"}),t.jsx("span",{className:"components-disclosure-title",children:e})]}),t.jsxs("div",{className:"components-disclosure-div",children:[n.map((f,c)=>t.jsx("button",{onClick:f.onClick,children:f.Icon},c)),t.jsx("div",{children:t.jsx(E,{name:"ChevronRight",className:`${m||i?"rotate-90 transform":""} h-4 w-4 text-foreground`})})]})]})}),t.jsx(F.Panel,{as:"div",children:u})]})},e)}function Mt({button:{title:e,Icon:s,buttons:n=[]},children:r,openDisc:u,testId:i}){return t.jsx(F,{as:"div",defaultOpen:u,children:({open:m})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsxs(F.Button,{className:"parent-disclosure-arrangement","data-testid":i,children:[t.jsx("div",{className:"flex gap-4",children:t.jsx("span",{className:"parent-disclosure-title ",children:e})}),t.jsxs("div",{className:"components-disclosure-div",children:[n.map((f,c)=>t.jsx("button",{onClick:f.onClick,children:f.Icon},c)),t.jsx("div",{children:t.jsx(E,{name:"ChevronsUpDownIcon",className:" h-4 w-4 text-foreground"})})]})]})}),t.jsx(F.Panel,{as:"div",children:r})]})},e)}const Kt=p.forwardRef(({sectionName:e,display_name:s,itemName:n,error:r,color:u,onDragStart:i,apiClass:m,official:f},c)=>{const[l,x]=p.useState(!1),y=N(o=>o.deleteComponent),j=Ae(o=>o.version),[C,T]=p.useState({x:0,y:0}),P=p.useRef(null),a=o=>{var d;if(!l){const _=((d=P.current)==null?void 0:d.getBoundingClientRect())??{left:0,top:0};T({x:o.clientX-_.left,y:o.clientY-_.top})}};function g(o){switch(o){case"share":break;case"download":const d=G(n);Ye(qe({id:ze(d),type:d,node:m},j));break;case"delete":y(s);break}}return t.jsx(nt,{onValueChange:g,onOpenChange:o=>x(o),open:l,children:t.jsx("div",{onPointerDown:a,onContextMenuCapture:o=>{o.preventDefault(),x(!0)},"data-tooltip-id":n,children:t.jsx("div",{draggable:!r,className:"side-bar-components-border bg-background"+(r?" cursor-not-allowed select-none":""),style:{borderLeftColor:u},onDragStart:i,onDragEnd:()=>{document.body.removeChild(document.getElementsByClassName("cursor-grabbing")[0])},children:t.jsxs("div",{"data-testid":e+s,id:e+s,className:"side-bar-components-div-form",children:[t.jsx("span",{className:"side-bar-components-text",children:s}),t.jsxs("div",{ref:P,children:[t.jsx(E,{name:"Menu",className:"side-bar-components-icon "}),t.jsx(at,{}),t.jsxs(rt,{position:"popper",side:"bottom",sideOffset:-25,style:{position:"absolute",left:C.x,top:C.y},children:[t.jsxs(fe,{value:"download",children:[t.jsxs("div",{className:"flex",children:[t.jsx(E,{name:"Download",className:"relative top-0.5 mr-2 h-4 w-4"})," ","Download"," "]})," "]}),!f&&t.jsxs(fe,{value:"delete",children:[t.jsxs("div",{className:"flex",children:[t.jsx(E,{name:"Trash2",className:"relative top-0.5 mr-2 h-4 w-4"})," ","Delete"," "]})," "]})]})]})]})})},n)},n)}),Ee=Kt;function Te(e,s){const n=M.indexOf(e.toLowerCase()),r=M.indexOf(s.toLowerCase());return n!==-1&&r!==-1?n-r:n!==-1?-1:r!==-1?1:e.localeCompare(s)}function _e(e,s){const n=/(.+) \((\w+)\)/,r=e.match(n),u=s.match(n);if(r&&u){const i=r[1],m=u[1];if(i!==m)return i.localeCompare(m);const f=parseInt(r[2]),c=parseInt(u[2]);return f-c}else return e.localeCompare(s)}function Wt(){const e=me(a=>a.data),s=me(a=>a.templates),n=K(a=>a.getFilterEdge),r=K(a=>a.setFilterEdge);N(a=>a.uploadFlow);const u=N(a=>a.currentFlow),i=R(a=>a.hasStore),m=R(a=>a.hasApiKey),f=R(a=>a.validApiKey),c=Qe(a=>a.setErrorData),[l,x]=p.useState(e),[y,j]=p.useState("");function C(a,g){var o=a.currentTarget.cloneNode(!0);o.style.position="absolute",o.style.top="-500px",o.style.right="-500px",o.classList.add("cursor-grabbing"),document.body.appendChild(o),a.dataTransfer.setDragImage(o,0,0),a.dataTransfer.setData("nodedata",JSON.stringify(g))}function T(a){if(a===""){x(e);return}x(g=>{let o={};return Object.keys(e).forEach((d,_)=>{o[d]={},Object.keys(e[d]).filter(h=>{var v;return h.toLowerCase().includes(a.toLowerCase())||((v=e[d][h].display_name)==null?void 0:v.toLowerCase().includes(a.toLowerCase()))}).forEach(h=>{o[d][h]=e[d][h]})}),o})}p.useEffect(()=>{let a=[];Object.keys(s).forEach(g=>{s[g].error&&a.push(g)}),a.length>0&&c({title:" Components with errors: ",list:a})},[]);function P(){(!y&&y===""||y==="search")&&(x(e),r([]),j(""))}return p.useEffect(()=>{n.length!==0&&j(""),n.length===0&&y===""&&(j(""),x(e))},[n,e]),p.useEffect(()=>{T(y)},[e]),p.useEffect(()=>{(n==null?void 0:n.length)>0&&x(a=>{let g=Q.cloneDeep(e),o={};return Object.keys(g).forEach((d,_)=>{if(o[d]={},n.some(k=>k.family===d)){o[d]=g[d];const k=n.filter(h=>h.family===d).pop().type.split(",");for(let h=0;h<k.length;h++)k[h]=k[h].trimStart();if(k.some(h=>h!=="")){let h=Object.keys(g[d]).filter(v=>k.includes(v));Object.keys(g[d]).forEach(v=>{h.includes(v)||delete o[d][v]})}}}),j(""),o})},[n]),p.useEffect(()=>{(n==null?void 0:n.length)>0&&x(a=>{let g=Q.cloneDeep(e),o={};return Object.keys(g).forEach((d,_)=>{if(o[d]={},n.some(k=>k.family===d)){o[d]=g[d];const k=n.filter(h=>h.family===d).pop().type.split(",");for(let h=0;h<k.length;h++)k[h]=k[h].trimStart();if(k.some(h=>h!=="")){let h=Object.keys(g[d]).filter(v=>k.includes(v));Object.keys(g[d]).forEach(v=>{h.includes(v)||delete o[d][v]})}}}),j(""),o})},[n,e]),p.useMemo(()=>t.jsx(Ie,{is_component:!1,component:u,disabled:!m||!f||!i,children:t.jsxs("button",{disabled:!m||!f||!i,className:S("extra-side-bar-buttons gap-[4px] text-sm font-semibold",!m||!f||!i?"button-disable  cursor-default text-muted-foreground":""),children:[t.jsx(E,{name:"Share3",className:S("-m-0.5 -ml-1 h-6 w-6",!m||!f||!i?"extra-side-bar-save-disable":"")}),"Share"]})}),[m,f,u,i]),p.useMemo(()=>t.jsx(lt,{children:t.jsx("button",{className:S("extra-side-bar-buttons"),children:t.jsx(E,{name:"FileDown",className:"side-bar-button-size"})})}),[]),p.useMemo(()=>a=>{if(L[a])return t.jsx(E,{name:a,strokeWidth:1.5,className:"w-[22px] text-primary"})},[]),t.jsxs("div",{className:"side-bar-arrangement",children:[t.jsxs("div",{className:"side-bar-search-div-placement",children:[t.jsx(ct,{onFocusCapture:()=>P(),value:y,type:"text",name:"search",id:"search",placeholder:"Search",className:"nopan nodelete nodrag noundo nocopy input-search",onChange:a=>{T(a.target.value),j(a.target.value)}}),t.jsx("div",{className:"search-icon ",onClick:()=>{y&&(x(e),j(""))},children:t.jsx(E,{name:y?"X":"Search",className:`h-5 w-5 stroke-[1.5] text-primary ${y?"cursor-pointer":"cursor-default"}`,"aria-hidden":"true"})})]}),t.jsx(Z,{}),t.jsxs("div",{className:"side-bar-components-div-arrangement",children:[t.jsx("div",{className:"parent-disclosure-arrangement",children:t.jsx("div",{className:"flex items-center gap-4 align-middle",children:t.jsx("span",{className:"parent-disclosure-title",children:"Basic Components"})})}),Object.keys(l).sort(Te).filter(a=>M.includes(a)).map((a,g)=>Object.keys(l[a]).length>0?t.jsx(t.Fragment,{children:t.jsx(Oe,{openDisc:n.length!==0||y.length!==0,isChild:!1,button:{title:H[a]??H.unknown,Icon:L[a]??L.unknown},children:t.jsx("div",{className:"side-bar-components-gap",children:Object.keys(l[a]).sort((o,d)=>_e(l[a][o].display_name,l[a][d].display_name)).map((o,d)=>t.jsx(ge,{content:l[a][o].display_name,side:"right",children:t.jsx(Ee,{sectionName:a,apiClass:l[a][o],onDragStart:_=>C(_,{type:G(o),node:l[a][o]}),color:he[a],itemName:o,error:!!l[a][o].error,display_name:l[a][o].display_name,official:l[a][o].official!==!1},d+o)},d))})},g+y+JSON.stringify(n))}):t.jsx("div",{},g))," ",t.jsx(Mt,{openDisc:!1,button:{title:"Advanced",Icon:L.unknown},testId:"extended-disclosure",children:Object.keys(l).sort(Te).filter(a=>!M.includes(a)).map((a,g)=>Object.keys(l[a]).length>0?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{isChild:!1,openDisc:n.length!==0||y.length!==0,button:{title:H[a]??H.unknown,Icon:L[a]??L.unknown},children:t.jsx("div",{className:"side-bar-components-gap",children:Object.keys(l[a]).sort((o,d)=>_e(l[a][o].display_name,l[a][d].display_name)).map((o,d)=>t.jsx(ge,{content:l[a][o].display_name,side:"right",children:t.jsx(Ee,{sectionName:a,apiClass:l[a][o],onDragStart:_=>C(_,{type:G(o),node:l[a][o]}),color:he[a],itemName:o,error:!!l[a][o].error,display_name:l[a][o].display_name,official:l[a][o].official!==!1},d)},d))})},g+y+JSON.stringify(n)),g===Object.keys(l).length-M.length+1&&t.jsx(t.Fragment,{children:t.jsxs("a",{target:"_blank",href:"https://langflow.store",className:"components-disclosure-arrangement",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx(Ge,{strokeWidth:1.5,className:"w-[22px] text-primary"}),t.jsx("span",{className:"components-disclosure-title",children:"Discover More"})]}),t.jsx("div",{className:"components-disclosure-div",children:t.jsx("div",{children:t.jsx(Ze,{className:"h-4 w-4 text-foreground"})})})]})})]}):t.jsx("div",{},g))},"Advanced")]})]})}function ds({view:e}){const s=N(c=>c.setCurrentFlowId),n=Ae(c=>c.version),r=K(c=>c.setOnFlowPage),u=N(c=>c.currentFlow),{id:i}=Be(),m=et(),f=N(c=>c.flows);return p.useEffect(()=>{if(!f.some(l=>l.id===i)){m("/all");return}return s(i),r(!0),()=>{r(!1)}},[i]),t.jsxs(t.Fragment,{children:[t.jsx(it,{}),t.jsxs("div",{className:"flow-page-positioning",children:[u&&t.jsxs("div",{className:"flex h-full overflow-hidden",children:[!e&&t.jsx(Wt,{}),t.jsxs("main",{className:"flex flex-1",children:[t.jsx("div",{className:"h-full w-full",children:t.jsx(ot,{flow:u})}),!e&&t.jsx(Ft,{})]})]}),t.jsxs("a",{target:"_blank",href:"https://medium.com/logspace/langflow-datastax-better-together-1b7462cebc4d",className:"langflow-page-icon",children:[n&&t.jsx("div",{className:"mt-1",children:"Langflow 🤝 DataStax"}),t.jsxs("div",{className:n?"mt-2":"mt-1",children:["⛓️ v",n]})]})]})]})}export{ds as default};
