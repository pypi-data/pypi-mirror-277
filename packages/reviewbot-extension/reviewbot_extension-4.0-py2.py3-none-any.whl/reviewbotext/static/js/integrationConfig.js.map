{"version":3,"file":"integrationConfig.js","names":["$","$tool","$toolOptions","noValidate","length","$itemAboveOptions","prev","changeToolVisibility","selectedTool","parseInt","val","$lastVisibleChild","find","each","i","el","$el","data","show","hide","css","change"],"sources":["../../../../../reviewbotext/static/js/integrationConfig.es6.js"],"sourcesContent":["$(function() {\n    const $tool = $('#id_tool');\n    const $toolOptions = $('#row-tool_options');\n\n    /*\n     * Until we can update to use the subform support in Review Board 4.0, turn\n     * off all client-side validation for the form. This is required because\n     * Chrome will still attempt to validate hidden tool options inputs, and\n     * fail the form submission.\n     *\n     * For some reason, using jquery's .prop() doesn't work, so just use the\n     * bare DOM API.\n     */\n    $('#integrationconfig_form')[0].noValidate = true;\n\n    if ($tool.length === 1 && $toolOptions.length === 1) {\n        const $itemAboveOptions = $toolOptions.prev();\n\n        function changeToolVisibility() {\n            const selectedTool = parseInt($tool.val(), 10);\n            let $lastVisibleChild = null;\n\n            $toolOptions.find('.form-row').each((i, el) => {\n                const $el = $(el);\n\n                if ($el.data('tool-id') === selectedTool) {\n                    $el.show();\n                    $lastVisibleChild = $el;\n                } else {\n                    $el.hide();\n                }\n            });\n\n            /*\n             * Normally, the :last-child rule would hide this border. Instead,\n             * we have to override it because the parent has a bunch of other\n             * children after the last one that happen to be hidden.\n             */\n            if ($lastVisibleChild !== null) {\n                $lastVisibleChild.css('border-bottom', 0);\n                $itemAboveOptions.css('border-bottom', '');\n            } else {\n                $itemAboveOptions.css('border-bottom', 0);\n            }\n        }\n\n        $tool.change(() => changeToolVisibility());\n        changeToolVisibility();\n    }\n});\n"],"mappings":";;AAAAA,CAAC,CAAC,YAAW;EACT,MAAMC,KAAK,GAAGD,CAAC,CAAC,UAAU,CAAC;EAC3B,MAAME,YAAY,GAAGF,CAAC,CAAC,mBAAmB,CAAC;;EAE3C;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIA,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAACG,UAAU,GAAG,IAAI;EAEjD,IAAIF,KAAK,CAACG,MAAM,KAAK,CAAC,IAAIF,YAAY,CAACE,MAAM,KAAK,CAAC,EAAE;IACjD,MAAMC,iBAAiB,GAAGH,YAAY,CAACI,IAAI,CAAC,CAAC;IAE7C,SAASC,oBAAoBA,CAAA,EAAG;MAC5B,MAAMC,YAAY,GAAGC,QAAQ,CAACR,KAAK,CAACS,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC;MAC9C,IAAIC,iBAAiB,GAAG,IAAI;MAE5BT,YAAY,CAACU,IAAI,CAAC,WAAW,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,EAAE,KAAK;QAC3C,MAAMC,GAAG,GAAGhB,CAAC,CAACe,EAAE,CAAC;QAEjB,IAAIC,GAAG,CAACC,IAAI,CAAC,SAAS,CAAC,KAAKT,YAAY,EAAE;UACtCQ,GAAG,CAACE,IAAI,CAAC,CAAC;UACVP,iBAAiB,GAAGK,GAAG;QAC3B,CAAC,MAAM;UACHA,GAAG,CAACG,IAAI,CAAC,CAAC;QACd;MACJ,CAAC,CAAC;;MAEF;AACZ;AACA;AACA;AACA;MACY,IAAIR,iBAAiB,KAAK,IAAI,EAAE;QAC5BA,iBAAiB,CAACS,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC;QACzCf,iBAAiB,CAACe,GAAG,CAAC,eAAe,EAAE,EAAE,CAAC;MAC9C,CAAC,MAAM;QACHf,iBAAiB,CAACe,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC;MAC7C;IACJ;IAEAnB,KAAK,CAACoB,MAAM,CAAC,MAAMd,oBAAoB,CAAC,CAAC,CAAC;IAC1CA,oBAAoB,CAAC,CAAC;EAC1B;AACJ,CAAC,CAAC","ignoreList":[]}