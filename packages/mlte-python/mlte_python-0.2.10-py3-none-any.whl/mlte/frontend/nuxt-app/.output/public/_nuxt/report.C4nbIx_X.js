import{_ as le,a as ae,b as ne}from"./add-button.FP0ZwroX.js";import{n as se,u as ie,r as D,q as g,s as re,z as w,A as N,w as a,B as ue,o as m,b as l,v as u,D as de,d as o,C as ce,a as e,c as _,x as k,t as b,F as C,y as me}from"./entry.wJW_9yny.js";import{u as pe,i as G}from"./artifact-validation.BsEUN-vZ.js";import{r as O,a as L,d as _e,c as he,s as fe}from"./form-methods.CS9pXFl6.js";import{f as ve}from"./util.CT5keIQ-.js";const be=e("h1",{class:"section-header"},"MLTE REPORT",-1),Ve=e("br",null,null,-1),ye=e("h2",{class:"section-header"},"Model Summary",-1),ge=e("p",null,"A summary of the model under evaluation.",-1),Ue=e("h2",{class:"section-header"},"Performance",-1),ke=e("p",null,"Model performance evaluation.",-1),Ce={class:"input-group"},Ae=e("h3",null,"Goals",-1),qe=e("p",null,"Goals or objectives that the model is going to help satisfy.",-1),De=e("h3",{class:"no-margin-sub-header"},"Metrics",-1),we={class:"inline-input-left"},xe=e("br",null,null,-1),Se=e("br",null,null,-1),Re={class:"inline-input-right"},Ee=e("br",null,null,-1),Pe=e("br",null,null,-1),Te=e("br",null,null,-1),Fe={class:"inline-button"},Me=e("hr",null,null,-1),$e=e("h3",null,"MLTE Evaluation",-1),Be={class:"table usa-table usa-table--borderless"},Ne=e("thead",null,[e("tr",null,[e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Status"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Property"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Measurement"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Evidence ID"),e("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Message")])],-1),Ge={key:0,style:{"background-color":"rgba(210, 232, 221, 255)"}},Oe={key:1,style:{"background-color":"rgba(255, 243, 205, 255)"}},Le={key:2,style:{"background-color":"rgba(248, 216, 219, 255)"}},je={key:3},ze=e("h2",{class:"section-header"},"Intended Use",-1),Ie=e("p",null,"A description of how the model is intended to be used.",-1),He={class:"input-group",style:{"margin-top":"1em"}},Je=e("h3",null,"Production Compute Resources",-1),Qe=e("p",null," Describe the hardware and software requirements including amount of compute resources needed for inference. ",-1),Xe={class:"inline-input-left"},Ke={class:"inline-input-right"},We={class:"inline-input-left"},Ye={class:"inline-input-right"},Ze=e("h2",{class:"section-header"},"Risks",-1),et=e("h2",{class:"section-header"},"Data",-1),tt=e("p",null,"A description of the data used to train the model.",-1),ot=e("h2",{class:"section-header"},"Data",-1),lt=e("p",null," Details of the data that will influence development efforts; fill out all that are known. For access / availability, record what needs to happen to access the data, such as accounts that need to be created or methods for data transportation. ",-1),at={class:"input-group"},nt={class:"inline-input-left"},st={class:"inline-input-right"},it={class:"input-group",style:{"margin-top":"1em"}},rt={class:"inline-input-left"},ut={class:"inline-input-right"},dt={class:"inline-button"},ct={class:"input-group",style:{"margin-top":"1em"}},mt={class:"no-margin-sub-header"},pt={class:"inline-input-left"},_t={class:"inline-input-right"},ht={class:"inline-input-left"},ft={class:"inline-input-right"},vt={class:"inline-input-left"},bt={class:"inline-input-right"},Vt=e("hr",null,null,-1),yt=e("hr",null,null,-1),gt=e("h3",null,"Comments",-1),Ut=e("p",null,"Free-form comments from model developers and system integrators.",-1),kt=e("h3",null,"Quantitative Analysis",-1),Ct=e("p",null,"No quantitative analysis included with this report.",-1),At={style:{"text-align":"right","margin-top":"1em"}},Et=se({__name:"report",async setup(qt){let T,F;const M=me(),R=ie("token"),j=D([{href:"/",text:"Artifact Store"},{href:"/here",text:"Report"}]),x=D(""),$=D(g().query.artifactId!==void 0),B=D(null),i=D({artifact_type:"report",summary:{problem_type:"classification",task:""},performance:{goals:[{description:"",metrics:[{description:"",baseline:""}]}],validated_spec_id:null},intended_use:{usage_context:"",production_requirements:{integration:"",interface:{input:{description:""},output:{description:""}},resources:{cpu:"",gpu:"",memory:"",storage:""}}},risks:{fp:"",fn:"",other:""},data:[{access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""}],comments:[{content:""}],quantitative_analysis:{}}),E=[{value:"classification",text:"Classification"},{value:"clustering",text:"Clustering"},{value:"detection",text:"Detection"},{value:"trend",text:"Trend"},{value:"alert",text:"Alert"},{value:"forecasting",text:"Forecasting"},{value:"content_generation",text:"Content Generation"},{value:"benchmarking",text:"Benchmarking"},{value:"goals",text:"Goals"},{value:"other",text:"Other"}],P=[{value:"unclassified",text:"Unclassified"},{value:"cui",text:"Controlled Unclassified Information (CUI)"},{value:"pii",text:"Personally Identifiable Information (PII)"},{value:"phi",text:"Protected Health Information (PHI)"},{value:"other",text:"Other"}];if(g().query.artifactId!==void 0){const d=g().query.model,n=g().query.version,V=g().query.artifactId;[T,F]=re(async()=>pe(M.public.apiPath+"/model/"+d+"/version/"+n+"/artifact/"+V,{retry:0,method:"GET",headers:{Authorization:"Bearer "+R.value},onRequestError(){O()},async onResponse({response:p}){var r,f;if(G(p._data)){i.value=p._data.body;const y=p._data.body.summary.problem_type;if(((r=E.find(v=>v.value===y))==null?void 0:r.value)!==void 0&&(i.value.summary.problem_type=(f=E.find(v=>v.value===y))==null?void 0:f.value),p._data.body.data.forEach(v=>{var A,S;const q=v.classification;((A=P.find(t=>t.value===q))==null?void 0:A.value)!==void 0&&(v.classification=(S=P.find(t=>t.value===q))==null?void 0:S.value)}),p._data.body.performance.validated_spec_id){i.value.performance.validated_spec_id=p._data.body.performance.validated_spec_id;const v=await ve(R.value,d,n,i.value.performance.validated_spec_id);B.value=I(v)}}},onResponseError(){L()}},"$mTrCeNnnXI")),await T,F()}async function z(){var r;const d=g().query.model,n=g().query.version;let V="";g().query.artifactId===void 0?V=x.value:V=(r=g().query.artifactId)==null?void 0:r.toString();const p={header:{identifier:V,type:"report",timestamp:-1,creator:""},body:i.value};if(G(p))try{await $fetch(M.public.apiPath+"/model/"+d+"/version/"+n+"/artifact",{retry:0,method:"POST",headers:{Authorization:"Bearer "+R.value},body:{artifact:p,force:$.value,parents:!1},onRequestError(){O()},onResponseError({response:f}){f.status===409?he():L()}}),fe("report",V),$.value=!0}catch(f){console.log("Error in fetch."),console.log(f)}else console.log("Invalid report.")}function I(d){const n=[],V=JSON.parse(JSON.stringify(d));return V.body.spec.properties.forEach(p=>{new Map(Object.entries(V.body.results[p.name])).forEach(f=>{const y={status:f.type,property:p.name,measurement:f.metadata.measurement_type,evidence_id:f.metadata.identifier.name,message:f.message};n.push(y)})}),n}function H(){alert("Report export is not currently implemented.")}function J(){i.value.performance.goals.push({description:"",metrics:[{description:"",baseline:""}]})}function Q(d){confirm("Are you sure you want to delete this goal?")&&i.value.performance.goals.splice(d,1)}function X(d){i.value.performance.goals[d].metrics.push({description:"",baseline:""})}function K(d,n){confirm("Are you sure you want to delete this metric?")&&i.value.performance.goals[d].metrics.splice(n,1)}function W(){i.value.data.push({access:"",description:"",source:"",classification:"unclassified",labels:[{description:"",percentage:0}],fields:[{name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""}],rights:"",policies:"",identifiable_information:""})}function Y(d){confirm("Are you sure you want to delete this data item?")&&i.value.data.splice(d,1)}function Z(d){i.value.data[d].labels.push({description:"",percentage:0})}function ee(d,n){confirm("Are you sure you want to delete this label?")&&i.value.data[d].labels.splice(n,1)}function te(d){i.value.data[d].fields.push({name:"",description:"",type:"",expected_values:"",missing_values:"",special_values:""})}function oe(d,n){confirm("Are you sure you want to delete this field?")&&i.value.data[d].fields.splice(n,1)}return(d,n)=>{const V=w("UsaBreadcrumb"),p=le,r=w("UsaTextInput"),f=w("UsaSelect"),y=ae,v=ne,q=w("UsaTextarea"),A=w("UsaButton"),S=ue;return m(),N(S,{name:"base-layout"},{default:a(()=>[l(V,{items:u(j)},null,8,["items"]),be,("useRoute"in d?d.useRoute:u(g))().query.artifactId===void 0?(m(),N(r,{key:0,modelValue:u(x),"onUpdate:modelValue":n[0]||(n[0]=t=>de(x)?x.value=t:null)},{label:a(()=>[o(" Artifact ID "),l(p,null,{default:a(()=>[o(" The Artifact ID this negotiation card "),Ve,o(" will be saved under upon submission. ")]),_:1})]),_:1},8,["modelValue"])):ce("",!0),ye,ge,l(f,{modelValue:u(i).summary.problem_type,"onUpdate:modelValue":n[1]||(n[1]=t=>u(i).summary.problem_type=t),options:E},{label:a(()=>[o(" Problem Type "),l(p,null,{default:a(()=>[o(" Type of ML problem the model is intended to solve ")]),_:1})]),_:1},8,["modelValue"]),l(r,{"model-value":u(i).summary.task},{label:a(()=>[o(" Task ")]),_:1},8,["model-value"]),Ue,ke,e("div",Ce,[Ae,qe,(m(!0),_(C,null,k(u(i).performance.goals,(t,h)=>(m(),_("div",{key:h},[e("h3",null,"Goal "+b(h+1),1),l(r,{modelValue:t.description,"onUpdate:modelValue":s=>t.description=s},{label:a(()=>[o(" Goal Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),De,(m(!0),_(C,null,k(t.metrics,(s,U)=>(m(),_("div",{key:U},[e("div",we,[l(r,{modelValue:s.description,"onUpdate:modelValue":c=>s.description=c},{label:a(()=>[o(" Description "),l(p,null,{default:a(()=>[o(" For each goal, select a performance metric that captures the system's "),xe,o(" ability to accomplish that goal; e.g., acceptance criteria for determining "),Se,o(" that the model is performing correctly. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",Re,[l(r,{modelValue:s.baseline,"onUpdate:modelValue":c=>s.baseline=c},{label:a(()=>[o(" Baseline "),l(p,null,{default:a(()=>[o(" Select a baseline for each performance metric, which means a measurement that "),Ee,o(" evaluates whether or not the model will/can achieve the main goal for which it is being created. "),Pe,o(" If the goal cannot be measured directly, select a reasonable proxy and justify how that will "),Te,o(" reliably predict the model’s performance in achieving its goal. ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",Fe,[l(y,{onClick:c=>K(h,U)},{default:a(()=>[o(" Delete Metric ")]),_:2},1032,["onClick"])])]))),128)),l(v,{class:"margin-button",onClick:s=>X(h)},{default:a(()=>[o(" Add Metric ")]),_:2},1032,["onClick"]),l(y,{onClick:s=>Q(h)},{default:a(()=>[o(" Delete goal ")]),_:2},1032,["onClick"]),Me]))),128)),l(v,{class:"margin-button",onClick:n[2]||(n[2]=t=>J())},{default:a(()=>[o(" Add goal ")]),_:1})]),$e,e("table",Be,[Ne,e("tbody",null,[(m(!0),_(C,null,k(u(B),t=>(m(),_("tr",{key:t.evidence_id},[t.status=="Success"?(m(),_("td",Ge,b(t.status),1)):t.status=="Ignore"?(m(),_("td",Oe,b(t.status),1)):t.status=="Failure"?(m(),_("td",Le,b(t.status),1)):(m(),_("td",je,b(t.status),1)),e("td",null,b(t.property),1),e("td",null,b(t.measurement),1),e("td",null,b(t.evidence_id),1),e("td",null,b(t.message),1)]))),128))])]),ze,Ie,l(q,{"model-value":u(i).intended_use.usage_context},null,8,["model-value"]),l(q,{modelValue:u(i).intended_use.production_requirements.integration,"onUpdate:modelValue":n[3]||(n[3]=t=>u(i).intended_use.production_requirements.integration=t)},{label:a(()=>[o(" A description of model integration practices. ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).intended_use.production_requirements.interface.input.description,"onUpdate:modelValue":n[4]||(n[4]=t=>u(i).intended_use.production_requirements.interface.input.description=t)},{label:a(()=>[o(" Model input description. ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).intended_use.production_requirements.interface.output.description,"onUpdate:modelValue":n[5]||(n[5]=t=>u(i).intended_use.production_requirements.interface.output.description=t)},{label:a(()=>[o(" Mode output description. ")]),_:1},8,["modelValue"]),e("div",He,[Je,Qe,e("div",null,[e("div",Xe,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.gpu,"onUpdate:modelValue":n[6]||(n[6]=t=>u(i).intended_use.production_requirements.resources.gpu=t)},{label:a(()=>[o(" GPU ")]),_:1},8,["modelValue"])]),e("div",Ke,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.cpu,"onUpdate:modelValue":n[7]||(n[7]=t=>u(i).intended_use.production_requirements.resources.cpu=t)},{label:a(()=>[o(" CPU ")]),_:1},8,["modelValue"])])]),e("div",null,[e("div",We,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.memory,"onUpdate:modelValue":n[8]||(n[8]=t=>u(i).intended_use.production_requirements.resources.memory=t)},{label:a(()=>[o(" Memory ")]),_:1},8,["modelValue"])]),e("div",Ye,[l(r,{modelValue:u(i).intended_use.production_requirements.resources.storage,"onUpdate:modelValue":n[9]||(n[9]=t=>u(i).intended_use.production_requirements.resources.storage=t)},{label:a(()=>[o(" Storage ")]),_:1},8,["modelValue"])])])]),Ze,l(r,{modelValue:u(i).risks.fp,"onUpdate:modelValue":n[10]||(n[10]=t=>u(i).risks.fp=t)},{label:a(()=>[o(" False Positive Risk ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).risks.fn,"onUpdate:modelValue":n[11]||(n[11]=t=>u(i).risks.fn=t)},{label:a(()=>[o(" False Negative Risk ")]),_:1},8,["modelValue"]),l(r,{modelValue:u(i).risks.other,"onUpdate:modelValue":n[12]||(n[12]=t=>u(i).risks.other=t)},{label:a(()=>[o(" Other risks of producing incorrect results ")]),_:1},8,["modelValue"]),et,tt,ot,lt,e("div",at,[(m(!0),_(C,null,k(u(i).data,(t,h)=>(m(),_("div",{key:h},[e("h3",null,"Data Item "+b(h+1),1),l(r,{modelValue:t.access,"onUpdate:modelValue":s=>t.access=s},{label:a(()=>[o(" Account Access / Account Availability ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",null,[e("div",nt,[l(r,{modelValue:t.description,"onUpdate:modelValue":s=>t.description=s},{label:a(()=>[o(" Data Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",st,[l(r,{modelValue:t.source,"onUpdate:modelValue":s=>t.source=s},{label:a(()=>[o(" Source Data Location ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),l(f,{modelValue:t.classification,"onUpdate:modelValue":s=>t.classification=s,options:P},{label:a(()=>[o(" Data Classification ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),e("div",it,[(m(!0),_(C,null,k(t.labels,(s,U)=>(m(),_("div",{key:U},[e("div",rt,[l(r,{modelValue:s.description,"onUpdate:modelValue":c=>s.description=c},{label:a(()=>[o(" Label Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",ut,[l(r,{modelValue:s.percentage,"onUpdate:modelValue":c=>s.percentage=c,type:"number"},{label:a(()=>[o(" Percentage ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",dt,[l(y,{onClick:c=>ee(h,U)},{default:a(()=>[o(" Delete label ")]),_:2},1032,["onClick"])])]))),128)),l(v,{class:"margin-button",onClick:s=>Z(h)},{default:a(()=>[o(" Add additional label ")]),_:2},1032,["onClick"])]),e("div",ct,[(m(!0),_(C,null,k(t.fields,(s,U)=>(m(),_("div",{key:U},[e("h3",mt," Data Schema "+b(h+1)+" - "+b(U+1),1),e("div",null,[e("div",pt,[l(r,{modelValue:s.name,"onUpdate:modelValue":c=>s.name=c},{label:a(()=>[o(" Field Name ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",_t,[l(r,{modelValue:s.description,"onUpdate:modelValue":c=>s.description=c},{label:a(()=>[o(" Field Description ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",ht,[l(r,{modelValue:s.type,"onUpdate:modelValue":c=>s.type=c},{label:a(()=>[o(" Field Type ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",ft,[l(r,{modelValue:s.expected_values,"onUpdate:modelValue":c=>s.expected_values=c},{label:a(()=>[o(" Expected Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),e("div",null,[e("div",vt,[l(r,{modelValue:s.missing_values,"onUpdate:modelValue":c=>s.missing_values=c},{label:a(()=>[o(" Missing Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),e("div",bt,[l(r,{modelValue:s.special_values,"onUpdate:modelValue":c=>s.special_values=c},{label:a(()=>[o(" Special Values ")]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),l(y,{class:"margin-button",onClick:c=>oe(h,U)},{default:a(()=>[o(" Delete schema ")]),_:2},1032,["onClick"]),Vt]))),128)),l(v,{class:"margin-button",onClick:s=>te(h)},{default:a(()=>[o(" Add additional schema ")]),_:2},1032,["onClick"])]),l(r,{modelValue:t.rights,"onUpdate:modelValue":s=>t.rights=s},{label:a(()=>[o(" Data Rights "),l(p,null,{default:a(()=>[o(" Are there particular ways in which the data can and cannot be used? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(r,{modelValue:t.policies,"onUpdate:modelValue":s=>t.policies=s},{label:a(()=>[o(" Data Policies "),l(p,null,{default:a(()=>[o(" Are there policies that govern the data and its use, such as Personally Identifiable Information [PII]? ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(r,{modelValue:t.identifiable_information,"onUpdate:modelValue":s=>t.identifiable_information=s},{label:a(()=>[o(" Identifiable Information ")]),_:2},1032,["modelValue","onUpdate:modelValue"]),l(y,{class:"margin-button",onClick:s=>Y(h)},{default:a(()=>[o(" Delete data item ")]),_:2},1032,["onClick"]),yt]))),128)),l(v,{class:"margin-button",onClick:n[13]||(n[13]=t=>W())},{default:a(()=>[o(" Add data item ")]),_:1})]),gt,Ut,(m(!0),_(C,null,k(u(i).comments,(t,h)=>(m(),_("div",{key:h},[l(r,{modelValue:t.content,"onUpdate:modelValue":s=>t.content=s},null,8,["modelValue","onUpdate:modelValue"])]))),128)),kt,Ct,e("div",At,[l(A,{class:"secondary-button",onClick:n[14]||(n[14]=t=>("cancelFormSubmission"in d?d.cancelFormSubmission:u(_e))("/"))},{default:a(()=>[o(" Cancel ")]),_:1}),l(A,{class:"primary-button",disabled:"",onClick:n[15]||(n[15]=t=>H())},{default:a(()=>[o(" Export ")]),_:1}),l(A,{class:"primary-button",onClick:n[16]||(n[16]=t=>z())},{default:a(()=>[o(" Save ")]),_:1})])]),_:1})}}});export{Et as default};
