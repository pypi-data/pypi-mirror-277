!function(){"use strict";$(function(){const e=$("#id_asana_access_token");var a=$("#id_asana_workspace");const n=$('<div class="errorlist">').insertAfter(e).hide(),s=(a.selectize({create:!1,dropdownParent:"body",searchField:"name",valueField:"id",labelField:"name",render:{option(e,a){return`<div>${a(e.name)}</div>`}},onChange(e){$("#id_asana_workspace_name").val(this.options[e].name)}}),a[0].selectize);function t(e){n.html(`<span class="rb-icon rb-icon-warning"></span>
`+_.escape(e)).show()}s.$control.width($("#id_name").width()),s.disable();let r=null;a=_.throttle(()=>{const a=e.val().trim();r!==a&&(r=a,n.hide(),s.disable(),0!==a.length)&&s.load(r=>{var e=$.param({api_key:a});$.ajax({url:SITE_ROOT+"rbintegrations/asana/workspaces/?"+e,type:"GET",success(e){"success"===e.result?(s.enable(),r(e.data)):("error"===e.result?t(e.error):(console.error("Unexpected error when fetching Asana workspace list",e),t("Unable to communicate with Asana")),r())},error(e,a,n){console.error("Unexpected error when fetching Asana workspace list",e),t("Unable to communicate with Asana"),r()}})})},100);e.on("change keyup",a),a()})}.call(this);
