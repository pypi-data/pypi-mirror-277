import{_ as ne,a as ie,b as se,c as ue,d as de,e as re,f as me,g as pe,P as ce,h as ve}from"../../../js/ProjectNav-MLx8rs_K.js";import{d as z,o as i,n as r,w as a,a as l,cu as W,cw as H,cx as ye,b$ as I,V as y,b as C,cv as K,g as h,i as V,ct as Q,M as $,l as x,f as p,t as k,z as B,c3 as G,c as v,cg as A,s as M,v as c,B as D,N as P,cy as F,cz as N,P as R,h as E,m as S,F as w,r as _,aW as ee,O as L,y as fe,C as ke,cA as be,cB as ge,b3 as J,Q as q,ak as le,cC as Z,aY as Ve,cf as we,aV as Ce,cm as ae,A as Se,q as _e,cq as he,bg as $e,G as ze,e as j,c8 as X,k as Pe}from"../../../js/index-BVJsRopY.js";import{C as O}from"../../../js/Card-C71V8nCJ.js";import{b as U,_ as te,a as Y}from"../../../js/ValueSlider-BUK9fza5.js";import{_ as oe}from"../../../js/NodeAvatar-D6erhJ_g.js";import{_ as xe}from"../../../js/ModelDoc-Ch7JcFIl.js";import{_ as Ue}from"../../../js/ConnectionAvatar-Cs5Pj1Cw.js";import{_ as Te}from"../../../js/NodeMenu-DNsYLf0J.js";import"../../../js/NodeMenu-ts0KZ1zN.js";import"../../../js/networkGraphStore-CEH2xUNT.js";const je=z({__name:"ActivityAnimationController",props:{graph:{}},setup(g){return(u,e)=>(i(),r(O,{class:"ma-1",color:"primary"},{default:a(()=>[l(Q,{class:"pa-0",variant:"accordion"},{default:a(()=>[l(W,{density:"compact"},{default:a(()=>[l(H,{class:"expansion-panel-title d-flex align-center pl-0 pr-2"},{default:a(()=>[l(ye,{onClick:e[9]||(e[9]=I(()=>{},["stop"])),mandatory:"",variant:"text"},{default:a(()=>[l(y,{onClick:e[0]||(e[0]=t=>u.graph.setFirstFrame()),icon:"mdi:mdi-skip-backward",title:"set first frame"}),l(y,{active:u.graph.state.frames.speed<-1,onClick:e[1]||(e[1]=t=>u.graph.decrementFrameSpeed()),icon:"",title:"speed down"},{default:a(()=>[l(C,{class:"mdi-rotate-180",icon:"mdi:mdi-fast-forward"})]),_:1},8,["active"]),l(y,{active:u.graph.state.frames.speed===-1,onClick:e[2]||(e[2]=t=>u.graph.playBackwardFrameAnimation()),icon:"",title:"play backward"},{default:a(()=>[l(C,{class:"mdi-rotate-180",icon:"mdi:mdi-play"})]),_:1},8,["active"]),l(y,{onClick:e[3]||(e[3]=t=>u.graph.stepBackwardFrame()),icon:"mdi:mdi-step-backward",title:"step backward"}),l(y,{active:u.graph.state.frames.speed===0,onClick:e[4]||(e[4]=t=>u.graph.pauseFrameAnimation()),icon:"mdi:mdi-pause",title:"pause"},null,8,["active"]),l(y,{onClick:e[5]||(e[5]=t=>u.graph.stepForwardFrame()),icon:"mdi:mdi-step-forward",title:"step forward"}),l(y,{active:u.graph.state.frames.speed===1,onClick:e[6]||(e[6]=t=>u.graph.playFrameAnimation()),icon:"mdi:mdi-play",title:"play forward"},null,8,["active"]),l(y,{active:u.graph.state.frames.speed>1,onClick:e[7]||(e[7]=t=>u.graph.incrementFrameSpeed()),icon:"mdi:mdi-fast-forward",title:"speed up"},null,8,["active"]),l(y,{onClick:e[8]||(e[8]=t=>u.graph.setLastFrame()),icon:"mdi:mdi-skip-forward",title:"set last frame"})]),_:1})]),_:1}),l(K,{class:"ma-1"},{default:a(()=>[l(h,null,{default:a(()=>[l(V,null,{default:a(()=>[l(U,{disabled:u.graph.state.nSamples===0,max:u.graph.state.nSamples,min:0,readonly:u.graph.state.frames.speed!==0,unit:"ms",label:"Current time",modelValue:u.graph.frameIdx,"onUpdate:modelValue":e[10]||(e[10]=t=>u.graph.frameIdx=t)},null,8,["disabled","max","readonly","modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(U,{max:60,min:1,label:"Frame rate",unit:"fps",modelValue:u.graph.state.frames.rate,"onUpdate:modelValue":e[11]||(e[11]=t=>u.graph.state.frames.rate=t)},null,8,["modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(U,{max:20,min:1,label:"Grid divisions",modelValue:u.graph.state.grid.divisions,"onUpdate:modelValue":e[12]||(e[12]=t=>u.graph.state.grid.divisions=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ie={key:0},Re={style:{"font-size":"12px"}},Be={key:0},Ge={style:{"font-size":"12px"}},Me={key:0},Ne=["src"],De=["src"],Ee=z({__name:"ActivityAnimationControllerLayer",props:{layer:{}},setup(g){const u=["BrBG","PRGn","PiYG","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral","Blues","Greens","Greys","Oranges","Purples","Reds","Turbo","Viridis","Inferno","Magma","Plasma","Cividis","Warm","Cool","CubehelixDefault","BuGn","BuPu","GnBu","OrRd","PuBuGn","PuBu","PuRd","RdPu","YlGnBu","YlGn","YlOrBr","YlOrRd","Rainbow","Sinebow"];return(e,t)=>(i(),r(W,{density:"compact",elevation:"1",tile:""},{default:a(()=>[l(H,null,{actions:a(()=>[l(C,{onClick:t[0]||(t[0]=I(()=>e.layer.state.visible=!e.layer.state.visible,["stop"])),icon:e.layer.state.visible?"mdi-eye":"mdi-eye-off"},null,8,["icon"])]),default:a(()=>[l($,{class:"text-button"},{default:a(()=>[l(oe,{node:e.layer.activity.recorder},null,8,["node"]),l(x),p(" "+k(e.layer.activity.recorder.model.label)+" ",1),l(x)]),_:1})]),_:1}),l(K,{class:"px-1 py-0"},{default:a(()=>{var f;return[l(B,{flat:"",tile:""},{default:a(()=>[l(G,{items:e.layer.models,class:"my-2",density:"compact","hide-details":"",label:"Select geometry model","prepend-inner-icon":"mdi-shape","return-object":"",modelValue:e.layer.modelSelected,"onUpdate:modelValue":t[1]||(t[1]=d=>e.layer.modelSelected=d),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),e.layer.activity.recorder.model.isAnalogRecorder?(i(),r(B,{key:0,flat:"",rounded:"0"},{default:a(()=>[e.layer.state.records.length>0?(i(),v("span",Ie,[l(G,{items:e.layer.state.records,onChange:t[2]||(t[2]=()=>{e.layer.graph.update()}),attach:"",chips:"",class:"pa-1 pt-3",density:"compact","hide-details":"","item-value":"groupId",label:"Recorded events","persistent-hint":"","return-object":"",size:"small",modelValue:e.layer.state.record,"onUpdate:modelValue":t[3]||(t[3]=d=>e.layer.state.record=d)},{selection:a(({item:d})=>[l(A,{color:d.raw.color,class:"mx-2","disable-lookup":"",label:"",size:"small",variant:"outlined"},{default:a(()=>[p(k(d.raw.id),1)]),_:2},1032,["color"]),M("div",Re,[p(k(d.raw.label)+" ",1),d.raw.unit?(i(),v("span",Be," ("+k(d.raw.unit)+")",1)):c("",!0)])]),item:a(({item:d})=>[l(A,{color:d.raw.color,class:"mx-2",label:"",size:"small",variant:"outlined"},{default:a(()=>[p(k(d.raw.id),1)]),_:2},1032,["color"]),M("div",Ge,[p(k(d.raw.label)+" ",1),d.raw.unit?(i(),v("span",Me," ("+k(d.raw.unit)+")",1)):c("",!0)])]),_:1},8,["items","modelValue"])])):c("",!0),e.layer.state.record?(i(),r(B,{key:1,flat:"",tile:""},{default:a(()=>[l(D,{class:"px-1 py-0"},{default:a(()=>[l($,{"no-gutters":""},{default:a(()=>[l(P,{class:"py-0",cols:"2"},{default:a(()=>[l(F,{label:`min (${e.layer.state.record.unit})`,step:.1,"hide-details":"",style:{"font-size":"13px"},type:"number",modelValue:e.layer.state.record.colorMap.min,"onUpdate:modelValue":t[4]||(t[4]=d=>e.layer.state.record.colorMap.min=d)},null,8,["label","modelValue"])]),_:1}),l(x),l(P,{class:"py-0",cols:"6"},{default:a(()=>[l(G,{items:u,"hide-details":"",style:{"font-size":"13px"},modelValue:e.layer.state.record.colorMap.scale,"onUpdate:modelValue":t[5]||(t[5]=d=>e.layer.state.record.colorMap.scale=d)},{item:a(({item:d})=>[l($,{style:{width:"200px"}},{default:a(()=>[l(P,{class:"py-0",cols:"4"},{default:a(()=>[M("img",{src:require(`@/assets/img/colorscales/${d}.png`),height:"20",width:"100%"},null,8,Ne)]),_:2},1024),l(P,{class:"py-0",cols:"8"},{default:a(()=>[p(k(d),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:1}),l(x),l(P,{class:"py-0",cols:"2"},{default:a(()=>[l(F,{label:`max (${e.layer.state.record.unit})`,step:.1,"hide-details":"",style:{"font-size":"13px"},type:"number",modelValue:e.layer.state.record.colorMap.max,"onUpdate:modelValue":t[6]||(t[6]=d=>e.layer.state.record.colorMap.max=d)},null,8,["label","modelValue"])]),_:1}),M("img",{src:require(`@/assets/img/colorscales/${e.layer.state.record.colorMap.scale}.png`),height:"8",width:"100%"},null,8,De)]),_:1}),l(N,{color:"accent",density:"compact",label:"Reverse colormap",modelValue:e.layer.state.record.colorMap.reverse,"onUpdate:modelValue":t[7]||(t[7]=d=>e.layer.state.record.colorMap.reverse=d)},null,8,["modelValue"])]),_:1})]),_:1})):c("",!0)]),_:1})):c("",!0),l(B,{flat:"",rounded:"0"},{default:a(()=>[l(D,{class:"pa-0"},{default:a(()=>[l(U,{max:10,min:1,step:.1,value:e.layer.state.object.size,label:"Object size"},null,8,["value"]),l(U,{max:1,min:0,step:.01,value:e.layer.state.object.opacity,label:"Object opacity"},null,8,["value"])]),_:1})]),_:1}),e.layer.activity.recorder.model.isSpikeRecorder?(i(),r(B,{key:1,flat:"",title:"Trail"},{default:a(()=>[l(h,null,{default:a(()=>[l(V,null,{default:a(()=>[l(U,{max:e.layer.graph.state.frames.sampleRate*50,min:0,step:e.layer.graph.state.frames.sampleRate,label:"Trail length",modelValue:e.layer.state.trail.length,"onUpdate:modelValue":t[8]||(t[8]=d=>e.layer.state.trail.length=d)},null,8,["max","step","modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(N,{"hide-details":"",label:"Trail fading",modelValue:e.layer.state.trail.fading,"onUpdate:modelValue":t[9]||(t[9]=d=>e.layer.state.trail.fading=d)},null,8,["modelValue"])]),_:1}),l(V,null,{default:a(()=>[l(G,{items:["off","growing","shrinking"],class:"mt-2",density:"compact","hide-details":"",label:"Trail mode",modelValue:e.layer.state.trail.mode,"onUpdate:modelValue":t[10]||(t[10]=d=>e.layer.state.trail.mode=d),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):c("",!0),(f=e.layer.modelSelected)!=null&&f.value.includes("box")?(i(),r(B,{key:2,flat:"",subtitle:"Box style"},{default:a(()=>[l(D,{class:"py-0"},{default:a(()=>[l(N,{"hide-details":"",density:"compact",label:"Flatten height",modelValue:e.layer.state.object.flatHeight,"onUpdate:modelValue":t[11]||(t[11]=d=>e.layer.state.object.flatHeight=d)},null,8,["modelValue"]),l(N,{"hide-details":"",density:"compact",label:"Flying planes",modelValue:e.layer.state.object.flyingBoxes,"onUpdate:modelValue":t[12]||(t[12]=d=>e.layer.state.object.flyingBoxes=d)},null,8,["modelValue"])]),_:1})]),_:1})):c("",!0)]}),_:1})]),_:1}))}}),Ae=z({__name:"ModelParamEditor",props:{param:{}},setup(g){const u=g,e=R(()=>u.param),t=d=>{e.value.value=d,e.value.changes()},f=[{icon:"custom:dice-multiple-outline",onClick:()=>{e.value.state.random=!e.value.state.random,e.value.changes()},title:"Toggle view"},{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",onClick:()=>{e.value.reset(),e.value.changes()},title:"Set default value"},{icon:"mdi:mdi-eye-off-outline",iconClass:"",onClick:()=>{e.value.hide(),e.value.changes()},title:"Hide parameter"}];return(d,m)=>u.param?(i(),r(V,{key:0,class:"param pl-0 pr-1"},{append:a(()=>[l(E,null,{activator:a(({props:o})=>[l(y,S({color:"primary",class:"menu align-center justify-center my-auto",icon:"mdi:mdi-dots-vertical",size:"x-small"},o,{variant:"text"}),null,16)]),default:a(()=>[l(h,{density:"compact"},{default:a(()=>[(i(),v(w,null,_(f,(o,n)=>l(V,{key:n,title:o.title,onClick:s=>o.onClick()},{prepend:a(()=>[l(C,{class:ee(o.iconClass),icon:o.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"])),64))]),_:1})]),_:1})]),default:a(()=>[l($,{"no-gutters":""},{default:a(()=>[e.value.state.random?(i(),r(ne,{key:0,param:e.value},null,8,["param"])):e.value.options.component==="arrayInput"?(i(),r(ie,S({key:1,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):e.value.options.component==="rangeSlider"?(i(),r(te,S({key:2,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):e.value.options.component==="tickSlider"?(i(),r(Y,S({key:3,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):e.value.options.component==="valueSlider"?(i(),r(U,S({key:4,"model-value":e.value.value,"onUpdate:modelValue":t},e.value.options),null,16,["model-value"])):c("",!0)]),_:1})]),_:1})):c("",!0)}}),Fe={key:0},Oe=z({__name:"CopyModelMenu",props:{model:{}},setup(g){const u=g,e=R(()=>u.model),t=L({content:void 0,dialog:!1,show:!1,spatialNode:!1}),f=[{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",id:"resetParams",onClick:()=>{e.value.resetParams()},append:!1,show:()=>!0,title:"Reset all parameters"},{icon:"mdi:mdi-information-outline",iconClass:"",id:"modelDoc",onClick:()=>{t.dialog=!0},show:()=>e.value.existingModelId!=="voltmeter",title:"Model documentation"},{icon:"mdi:mdi-trash-can-outline",iconClass:"",id:"copyModelDelete",onClick:()=>{ge({title:"Delete copied model?",text:"Are you sure to delete copied model?",buttons:[{title:"no",key:"no"},{title:"yes",key:"yes"}]}).then(d=>{d==="yes"&&e.value.remove()})},show:()=>!0,title:"Delete copied model"}];return(d,m)=>(i(),r(E,{"close-on-content-click":!1,activator:"parent",modelValue:t.show,"onUpdate:modelValue":m[0]||(m[0]=o=>t.show=o)},{default:a(()=>[l(B,{flat:"",style:{"min-width":"300px"}},{default:a(()=>[t.content==null?(i(),v("span",Fe,[l(h,{density:"compact"},{default:a(()=>[(i(),v(w,null,_(f,(o,n)=>fe(l(V,{key:n,title:o.title,onClick:o.onClick},{append:a(()=>[o.append?(i(),r(C,{key:0,icon:"mdi:mdi-menu-right",size:"small"})):c("",!0)]),prepend:a(()=>[l(C,{class:ee(o.iconClass),icon:o.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"]),[[ke,o.show()]])),64))]),_:1})])):c("",!0),M("span",null,[l(be,{value:t.dialog,width:"80%"},{default:a(()=>[l(xe,{id:e.value.existingModelId},null,8,["id"])]),_:1},8,["value"])])]),_:1})]),_:1},8,["modelValue"]))}}),Le={class:"d-print-none menu"},qe=z({__name:"CopyModelEditor",props:{model:{}},setup(g){const u=g,e=R(()=>u.model),t=L({elementType:"",items:[],menu:!1,panelIdx:null}),f=[{title:"neuron",value:"neuron"},{title:"recorder",value:"recorder"},{title:"stimulator",value:"stimulator"}],d=(m,o)=>{["neuron","recorder","stimulator"].includes(m.value)?(t.elementType=m.value,t.items=e.value.network.project.modelDBStore.getModelsByElementType(m.value)):e.value.existingModelId=m.value,o&&o()};return J(()=>{t.items=e.value.models,t.elementType=e.value.elementType}),(m,o)=>e.value.show?(i(),r(O,{key:0,class:"ma-1"},{default:a(()=>[l(q,{class:"model-title"},{default:a(()=>[l(G,{"item-props":!0,items:t.items,label:t.elementType+" model",class:"model-select text-primary",density:"compact","hide-details":"","item-title":"label","item-value":"id",modelValue:e.value.existingModelId,"onUpdate:modelValue":o[6]||(o[6]=n=>e.value.existingModelId=n),variant:"outlined"},le({append:a(()=>[M("div",Le,[l(E,{"close-on-content-click":!1,modelValue:t.menu,"onUpdate:modelValue":o[4]||(o[4]=n=>t.menu=n)},{activator:a(({props:n})=>[l(y,S({color:"primary",icon:"mdi:mdi-order-bool-ascending-variant",size:"small"},n,{variant:"text"}),null,16)]),default:a(()=>[l(B,null,{default:a(()=>[l(D,null,{default:a(()=>[e.value.params?(i(!0),v(w,{key:0},_(Object.values(e.value.params),(n,s)=>(i(),r(N,{key:s,label:n.label,value:n.id,density:"compact","hide-details":"",modelValue:e.value.paramsVisible,"onUpdate:modelValue":o[0]||(o[0]=b=>e.value.paramsVisible=b)},{append:a(()=>[p(k(n.id)+": "+k(n.value)+" "+k(n.unit),1)]),_:2},1032,["label","value","modelValue"]))),128)):c("",!0)]),_:1}),l(Z,null,{default:a(()=>[l(y,{onClick:o[1]||(o[1]=I(()=>e.value.showAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" all ")]),_:1}),l(y,{onClick:o[2]||(o[2]=I(()=>e.value.hideAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" none ")]),_:1}),l(x),l(y,{onClick:o[3]||(o[3]=I(n=>t.menu=!1,["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(y,{color:"primary",icon:"",size:"small",variant:"text"},{default:a(()=>[l(C,{icon:"mdi:mdi-dots-vertical"}),l(Oe,{model:e.value},null,8,["model"])]),_:1})])]),item:a(({props:n})=>[l(V,{onClick:s=>d(n),class:"model-item"},{append:a(()=>[t.elementType?(i(),r(y,{key:0,onClick:I(s=>d(n,()=>t.menu=!0),["stop"]),class:"icon",icon:"mdi:mdi-menu-right",size:"x-small",variant:"outlined"},null,8,["onClick"])):c("",!0)]),default:a(()=>[p(k(n.title)+" ",1)]),_:2},1032,["onClick"])]),_:2},[t.elementType?{name:"prepend-item",fn:a(()=>[l(V,{onClick:o[5]||(o[5]=()=>{t.elementType="",t.items=f})},{prepend:a(()=>[l(C,{icon:"mdi:mdi-menu-left"})]),default:a(()=>[p(" Other element types ")]),_:1})]),key:"0"}:void 0]),1032,["items","label","modelValue"])]),_:1}),l(D,null,{default:a(()=>[l(F,{class:"ma-1",density:"compact","hide-details":"",label:"New label",modelValue:e.value.newModelId,"onUpdate:modelValue":o[7]||(o[7]=n=>e.value.newModelId=n),variant:"outlined"},null,8,["modelValue"]),e.value.paramsVisible.length>0?(i(),r(h,{key:0,class:"py-0"},{default:a(()=>[(i(!0),v(w,null,_(e.value.paramsVisible,(n,s)=>(i(),r(Ae,{key:s,param:e.value.params[n]},null,8,["param"]))),128))]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0)}}),Ye=z({__name:"NodeRecordSelect",props:{node:{}},setup(g){return(u,e)=>(i(),v("div",null,[l(G,{items:u.node.recordables,"onUpdate:modelValue":[e[1]||(e[1]=t=>u.node.changes()),e[2]||(e[2]=t=>u.node.records=t)],"base-color":"primary",chips:"",class:"pa-1",clearable:"","closable-chips":"",color:"primary",density:"compact","hide-details":"","item-title":"title","item-value":"groupId",label:"Record from",multiple:"","persistent-hint":"","return-object":"",modelValue:u.node.records,variant:"outlined"},{chip:a(({item:t})=>[l(se,{nodeRecord:t.raw,onClick:e[0]||(e[0]=I(()=>{},["prevent"]))},null,8,["nodeRecord"])]),_:1},8,["items","modelValue"])]))}}),We=z({__name:"SynapseParamEditor",props:{param:{}},setup(g){const u=g,e=R(()=>u.param),t=d=>{e.value.value=d,e.value.changes()},f=[{title:"Set default value",icon:"mdi:mdi-reload",onclick:()=>{e.value.reset(),e.value.changes()}},{title:"Hide parameter",icon:"mdi:mdi-eye-off-outline",onclick:()=>{e.value.hide(),e.value.changes()}}];return(d,m)=>u.param?(i(),r(V,{key:0,class:"param pl-0 pr-1"},{default:a(()=>[l($,{"no-gutters":""},{default:a(()=>[e.value.options.component==="rangeSlider"?(i(),r(te,S({key:0,"model-value":e.value.value,"thumb-color":e.value.synapse.connection.sourceNode.view.color,"onUpdate:modelValue":t},e.value.options),null,16,["model-value","thumb-color"])):e.value.options.component==="tickSlider"?(i(),r(Y,S({key:1,"model-value":e.value.value,"thumb-color":e.value.synapse.connection.sourceNode.view.color,"onUpdate:modelValue":t},e.value.options),null,16,["model-value","thumb-color"])):e.value.options.component==="valueSlider"?(i(),r(U,S({key:2,"model-value":e.value.value,"thumb-color":e.value.synapse.connection.sourceNode.view.color,"onUpdate:modelValue":t},e.value.options),null,16,["model-value","thumb-color"])):c("",!0),l(E,{"close-on-content-click":!1},{activator:a(({props:o})=>[l(y,S({class:"d-print-none menu align-center justify-center my-auto",color:"primary",icon:"mdi:mdi-dots-vertical",size:"x-small"},o),null,16)]),default:a(()=>[l(h,{density:"compact"},{default:a(()=>[(i(),v(w,null,_(f,(o,n)=>l(V,{key:n,icon:o.icon,onClick:o.onclick},{prepend:a(()=>[l(C,{icon:o.icon},null,8,["icon"])]),default:a(()=>[p(" "+k(o.title),1)]),_:2},1032,["icon","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0)}}),He={class:"d-print-none menu align-center justify-center my-auto mx-1"},Ke=z({__name:"SynapseSpecEditor",props:{synapse:{}},setup(g){const u=g,e=R(()=>u.synapse),t=[{id:"paramsReset",icon:"mdi:mdi-restart",title:"Reset synapse params",onClick:()=>{e.value.reset()},show:()=>!0},{id:"weightInverse",icon:"mdi:mdi-contrast",title:"Inverse synaptic weight",onClick:()=>{e.value.inverseWeight()}}];return(f,d)=>(i(),v(w,null,[e.value.connection.view.connectRecorder()?c("",!0):(i(),r($,{key:0,class:"syn-spec mx-1","no-gutters":""},{default:a(()=>[l(G,{disabled:e.value.models.length<2,items:e.value.models,class:"pa-1",density:"compact","hide-details":"","item-title":"label","item-value":"id",label:"Synapse model",modelValue:e.value.modelId,"onUpdate:modelValue":d[0]||(d[0]=m=>e.value.modelId=m),variant:"outlined"},null,8,["disabled","items","modelValue"]),M("div",He,[l(E,{"close-on-content-click":!1},{activator:a(({props:m})=>[l(y,S({color:"primary",icon:"mdi:mdi-order-bool-ascending-variant",size:"small"},m,{variant:"text"}),null,16)]),default:a(()=>[l(B,null,{default:a(()=>[l(D,null,{default:a(()=>[(i(!0),v(w,null,_(Object.values(e.value.modelParams),(m,o)=>(i(),r(N,{color:e.value.connection.sourceNode.view.color,key:o,label:m.label,value:m.id,density:"compact","hide-details":"",modelValue:e.value.paramsVisible,"onUpdate:modelValue":d[1]||(d[1]=n=>e.value.paramsVisible=n)},{append:a(()=>[p(k(m.id)+": "+k(m.value)+" "+k(m.unit),1)]),_:2},1032,["color","label","value","modelValue"]))),128))]),_:1})]),_:1})]),_:1}),l(E,null,{activator:a(({props:m})=>[l(y,S({color:"primary",icon:"mdi:mdi-dots-vertical",size:"small",variant:"text"},m),null,16)]),default:a(()=>[l(h,{density:"compact"},{default:a(()=>[(i(),v(w,null,_(t,(m,o)=>l(V,{key:o,onClick:m.onClick},{prepend:a(()=>[l(C,{icon:m.icon},null,8,["icon"])]),default:a(()=>[p(" "+k(m.title),1)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})])]),_:1})),e.value.paramsVisible.length>0?(i(),r(h,{key:1,density:"compact"},{default:a(()=>[(i(!0),v(w,null,_(e.value.filteredParams,(m,o)=>(i(),r(We,{key:o,param:m},null,8,["param"]))),128))]),_:1})):c("",!0)],64))}}),Qe={class:"d-flex flex-column justify-center align-center text-grey"},Je={key:0},Xe=z({__name:"ConnectionEditor",props:{connection:{}},setup(g){const u=g,e=R(()=>u.connection),t=R(()=>e.value.synapse),f=[{id:"connectionReset",icon:"mdi:mdi-restart",title:"Reset connection",onClick:()=>{e.value.reset(),t.value.reset(),t.value.hideAllParams()}},{id:"connectionReverse",icon:"mdi:mdi-rotate-3d-variant",title:"Reverse connection",onClick:()=>{e.value.reverse(),e.value.changes()}},{id:"weightInverse",icon:"mdi:mdi-contrast",title:"Inverse synaptic weight",onClick:()=>{t.value.inverseWeight()}},{id:"connectionDelete",icon:"mdi:mdi-trash-can-outline",title:"Delete connection",onClick:()=>{e.value.remove()},append:!0}];return(d,m)=>(i(),r(W,{style:Ve({opacity:e.value.view.opacity?1:.3}),onMouseenter:m[0]||(m[0]=o=>e.value.state.focus()),onMouseleave:m[1]||(m[1]=o=>e.value.connections.unfocusConnection()),elevation:"0",rounded:"0"},{default:a(()=>[l(H,{class:"expansion-panel-title"},{default:a(()=>[l($,{"no-gutters":""},{default:a(()=>[l(Ue,{connection:e.value},null,8,["connection"]),l(x),M("div",Qe,[p(k(e.value.rule.value)+" ",1),e.value.view.connectOnlyNeurons()?(i(),v("div",Je,k(e.value.synapse.modelId),1)):c("",!0)]),l(x),l(E,null,{activator:a(({props:o})=>[l(y,S({class:"menu",color:"primary",icon:"mdi:mdi-dots-vertical",size:"small",variant:"text"},o),null,16)]),default:a(()=>[l(h,{density:"compact"},{default:a(()=>[(i(),v(w,null,_(f,(o,n)=>l(V,{icon:o.icon,key:n,onClick:o.onClick},{prepend:a(()=>[l(C,{icon:o.icon},null,8,["icon"])]),default:a(()=>[p(" "+k(o.title),1)]),_:2},1032,["icon","onClick"])),64))]),_:1})]),_:1})]),_:1})]),_:1}),l(K,{class:"ma-1"},{default:a(()=>[l(ue,{connection:e.value},null,8,["connection"]),l(Ke,{synapse:t.value},null,8,["synapse"])]),_:1})]),_:1},8,["style"]))}}),Ze=M("span",{class:"my-1"},"Positions",-1),el=z({__name:"NodePositionTitle",props:{nodeSpatial:{}},setup(g){return(u,e)=>u.nodeSpatial.positions?(i(),r($,{key:0,class:"my-auto","no-gutters":""},{default:a(()=>[Ze,l(x),l(A,{title:u.nodeSpatial.positions.name+" positions",class:"mx-1",label:"",size:"x-small",variant:"outlined"},{default:a(()=>{var t;return[l(C,{icon:((t=u.nodeSpatial.positions)==null?void 0:t.name)==="grid"?"custom:dots-grid":"custom:dice-multiple-outline"},null,8,["icon"])]}),_:1},8,["title"]),u.nodeSpatial.positions.name==="free"?(i(),r(A,{key:0,class:"mx-1",label:"",size:"x-small",title:"dimensions",variant:"outlined"},{default:a(()=>[p(k(u.nodeSpatial.positions.numDimensions)+"D ",1)]),_:1})):c("",!0),u.nodeSpatial.positions.name==="grid"?(i(),r(A,{key:1,class:"mx-1",label:"",size:"x-small",title:"shape",variant:"outlined"},{default:a(()=>[p(k(u.nodeSpatial.positions.shape),1)]),_:1})):c("",!0),u.nodeSpatial.positions.name==="free"?(i(),r(A,{key:2,class:"mx-1",label:"",size:"x-small",title:"size",variant:"outlined"},{default:a(()=>[p(k(u.nodeSpatial.node.size),1)]),_:1})):c("",!0),u.nodeSpatial.positions.edgeWrap?(i(),r(A,{key:3,class:"mx-1",label:"",size:"x-small",title:"edge wrap",variant:"outlined"},{default:a(()=>[l(C,{icon:"mdi:mdi-format-text-wrapping-wrap",size:"small"})]),_:1})):c("",!0)]),_:1})):c("",!0)}}),ll={key:0},al={key:1},tl=z({__name:"NodePosition",props:{nodeSpatial:{}},setup(g){const u=g,e=R(()=>u.nodeSpatial),t=L({numDimensions:!1,positions:[{title:"Free positions",value:"free"},{title:"Grid positions",value:"grid"}],selectedPositions:"free",sizeOptions:{input:"valueSlider",label:"population size",max:1e3,rules:[["value > 0","The value must be strictly positive.","error"],["value < 1000","Large values generate many data points and can put quite a load on your browser.","warning"]],value:1}}),f=()=>{Ce(()=>{e.value.init({positions:t.selectedPositions})})},d=()=>{e.value.changes()};return J(()=>{var m;t.selectedPositions=((m=e.value.positions)==null?void 0:m.name)||"free"}),(m,o)=>e.value.positions?(i(),r(Q,{key:0,variant:"accordion"},{default:a(()=>[l(W,{density:"compact",elevation:"0",tile:""},{default:a(()=>[l(H,{class:"expansion-panel-title"},{default:a(()=>[(i(),r(el,{key:e.value.hash,nodeSpatial:e.value},null,8,["nodeSpatial"]))]),_:1}),l(K,null,{default:a(()=>[l(G,{items:t.positions,"onUpdate:modelValue":[o[0]||(o[0]=n=>f()),o[1]||(o[1]=n=>t.selectedPositions=n)],density:"compact","hide-details":"",modelValue:t.selectedPositions,variant:"outlined"},null,8,["items","modelValue"]),l(we,{inset:"",max:"3",min:"2","true-icon":"mdi:mdi-numeric-3","false-icon":"mdi:mdi-numeric-2","show-ticks":"always",step:"1","onUpdate:modelValue":[o[2]||(o[2]=n=>e.value.updatePositionParams({numDimensions:n?3:2})),o[3]||(o[3]=n=>t.numDimensions=n)],modelValue:t.numDimensions,label:"number of dimensions"},null,8,["modelValue"]),e.value.positions.name==="free"?(i(),v("span",ll,[l(U,{"thumb-color":e.value.node.view.color,"onUpdate:modelValue":[o[4]||(o[4]=n=>e.value.changes()),o[5]||(o[5]=n=>e.value.node.size=n)],id:"n","input-label":"n",label:"population size",modelValue:e.value.node.size},null,8,["thumb-color","modelValue"])])):c("",!0),e.value.positions.name==="grid"?(i(),v("span",al,[l($,null,{default:a(()=>[l(P,{class:"ma-auto",cols:"3"},{default:a(()=>[p("shape")]),_:1}),l(x),(i(!0),v(w,null,_(e.value.positions.shape,(n,s)=>(i(),r(P,{key:s,cols:"3"},{default:a(()=>[l(F,{label:(e.value.positions.numDimensions===2?["rows","columns"]:["x","y","z"])[s],min:1,"model-value":n,"onUpdate:modelValue":b=>{if(e.value.positions){const T=e.value.positions.shape;T[s]=parseInt(b),e.value.updatePositionParams({shape:T})}},density:"compact","hide-details":"",type:"number",variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1}),l($,null,{default:a(()=>[l(P,{class:"ma-auto",cols:"3"},{default:a(()=>[p("center")]),_:1}),l(x),(i(!0),v(w,null,_(e.value.positions.center,(n,s)=>(i(),r(P,{key:s,cols:"3"},{default:a(()=>[l(F,{label:["x","y","z"][s],"model-value":n,step:.1,"onUpdate:modelValue":b=>{if(e.value.positions){const T=e.value.positions.center;T[s]=parseFloat(b),e.value.updatePositionParams({center:T})}},density:"compact","hide-details":"",type:"number",variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1}),l($,null,{default:a(()=>[l(P,{class:"ma-auto",cols:"3",title:""},{default:a(()=>[p("extent")]),_:1}),l(x),(i(!0),v(w,null,_(e.value.positions.extent,(n,s)=>(i(),r(P,{key:s,cols:"3"},{default:a(()=>[l(F,{label:["x","y","z"][s],min:0,"model-value":n,step:.1,"onUpdate:modelValue":b=>{if(e.value.positions){const T=e.value.positions.extent;T[s]=parseFloat(b),e.value.updatePositionParams({extent:T})}},density:"compact","hide-details":"",type:"number",variant:"outlined"},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})])):c("",!0),l($,null,{default:a(()=>[l(P,{class:"py-0"},{default:a(()=>[l(N,{class:"ma-0",color:"accent",label:"Edge wrap",modelValue:e.value.positions.edgeWrap,"onUpdate:modelValue":o[6]||(o[6]=n=>e.value.positions.edgeWrap=n)},null,8,["modelValue"])]),_:1})]),_:1}),l(y,{onClick:o[7]||(o[7]=n=>d()),size:"small",variant:"outlined"},{default:a(()=>[p(" Update positions ")]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0)}}),ol={class:"d-print-none menu"},nl=z({__name:"NodeEditor",props:{node:{}},setup(g){const u=g,e=R(()=>u.node),t=L({elementType:"",items:[],menu:!1,panelIdx:null}),f=[{title:"copied model",value:"copied"},{title:"neuron",value:"neuron"},{title:"recorder",value:"recorder"},{title:"stimulator",value:"stimulator"}],d=[{icon:"mdi:mdi-reload",iconClass:"mdi-flip-h",onClick:()=>{e.value.size=1},title:"Set default size"},{icon:"mdi:mdi-axis-arrow",iconClass:"",onClick:()=>{e.value.toggleSpatial()},title:"Toggle spatial mode"}],m=(o,n)=>{["neuron","recorder","stimulator","copied"].includes(o.value)?(t.elementType=o.value,o.value==="copied"?t.items=e.value.network.modelsCopied.filterByGeneralElementType("node"):t.items=e.value.network.project.modelDBStore.getModelsByElementType(o.value)):e.value.modelId=o.value,n&&n()};return J(()=>{t.items=e.value.models,t.elementType=e.value.elementType}),(o,n)=>e.value.show?(i(),r(O,{key:0,color:e.value.view.color,onMouseenter:n[12]||(n[12]=s=>e.value.view.focus()),onMouseleave:n[13]||(n[13]=s=>e.value.nodes.unfocusNode()),class:"ma-1"},{default:a(()=>[l(q,{class:"node-title mt-2 ml-10"},{default:a(()=>[l(G,{"item-props":!0,items:t.items,label:t.elementType+" model",class:"model-select text-primary",density:"compact","hide-details":"","item-title":"label","item-value":"id",modelValue:e.value.modelId,"onUpdate:modelValue":n[8]||(n[8]=s=>e.value.modelId=s),variant:"outlined"},le({append:a(()=>[M("div",ol,[l(E,{"close-on-content-click":!1,modelValue:t.menu,"onUpdate:modelValue":n[5]||(n[5]=s=>t.menu=s)},{activator:a(({props:s})=>[l(y,S({color:"primary",icon:"mdi:mdi-order-bool-ascending-variant",size:"small"},s,{variant:"text"}),null,16)]),default:a(()=>[l(B,null,{default:a(()=>[l(D,null,{default:a(()=>[l(N,{disabled:e.value.model.isRecorder,color:e.value.view.color,density:"compact","hide-details":"",label:"Population size",modelValue:e.value.view.state.showSize,"onUpdate:modelValue":n[0]||(n[0]=s=>e.value.view.state.showSize=s)},{append:a(()=>[p(" n: "+k(e.value.size),1)]),_:1},8,["disabled","color","modelValue"]),e.value.modelParams?(i(!0),v(w,{key:0},_(Object.values(e.value.modelParams),(s,b)=>(i(),r(N,{color:e.value.view.color,key:b,label:s.label,value:s.id,density:"compact","hide-details":"",modelValue:e.value.paramsVisible,"onUpdate:modelValue":n[1]||(n[1]=T=>e.value.paramsVisible=T)},{append:a(()=>[p(k(s.id)+": "+k(s.value)+" "+k(s.unit),1)]),_:2},1032,["color","label","value","modelValue"]))),128)):c("",!0)]),_:1}),l(Z,null,{default:a(()=>[l(y,{onClick:n[2]||(n[2]=I(()=>e.value.showAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" all ")]),_:1}),l(y,{onClick:n[3]||(n[3]=I(()=>e.value.hideAllParams(),["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" none ")]),_:1}),l(x),l(y,{onClick:n[4]||(n[4]=I(s=>t.menu=!1,["stop"])),size:"small",variant:"outlined"},{default:a(()=>[p(" close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(y,{color:"primary",icon:"",size:"small",variant:"text"},{default:a(()=>[l(C,{icon:"mdi:mdi-dots-vertical"}),l(Te,{node:e.value},null,8,["node"])]),_:1})])]),item:a(({props:s})=>[l(V,{onClick:b=>m(s),class:"node-model-item"},{append:a(()=>[t.elementType?(i(),r(y,{key:0,onClick:I(b=>m(s,()=>t.menu=!0),["stop"]),class:"icon",icon:"mdi:mdi-menu-right",size:"x-small",variant:"outlined"},null,8,["onClick"])):c("",!0)]),default:a(()=>[p(k(s.title)+" ",1)]),_:2},1032,["onClick"])]),prepend:a(()=>[l(y,{class:"position-absolute",flat:"",icon:"",size:"large",style:{left:"8px",top:"8px"}},{default:a(()=>[l(oe,{node:e.value,onClick:n[6]||(n[6]=s=>e.value.select()),size:"48px"},null,8,["node"])]),_:1})]),_:2},[t.elementType?{name:"prepend-item",fn:a(()=>[l(V,{onClick:n[7]||(n[7]=()=>{t.elementType="",t.items=f})},{prepend:a(()=>[l(C,{icon:"mdi:mdi-menu-left"})]),default:a(()=>[p(" Other element types ")]),_:1})]),key:"0"}:void 0]),1032,["items","label","modelValue"])]),_:1}),l(D,{class:"pa-0"},{default:a(()=>[e.value.view.state.showSize?(i(),r(h,{key:0,class:"py-0"},{default:a(()=>[l(V,{class:"param pl-0 pr-1"},{append:a(()=>[l(E,null,{activator:a(({props:s})=>[l(y,S({color:"primary",class:"d-print-none menu align-center justify-center my-auto",icon:"mdi:mdi-dots-vertical",size:"x-small",variant:"text"},s),null,16)]),default:a(()=>[l(h,{density:"compact"},{default:a(()=>[(i(),v(w,null,_(d,(s,b)=>l(V,{key:b,title:s.title,onClick:T=>s.onClick()},{prepend:a(()=>[l(C,{class:ee(s.iconClass),icon:s.icon},null,8,["class","icon"])]),_:2},1032,["title","onClick"])),64))]),_:1})]),_:1})]),default:a(()=>[l($,{"no-gutters":""},{default:a(()=>[e.value.spatial.hasPositions?(i(),r(tl,{key:0,nodeSpatial:e.value.spatial},null,8,["nodeSpatial"])):(i(),r(U,{key:1,"thumb-color":e.value.view.color,"onUpdate:modelValue":[n[9]||(n[9]=s=>e.value.changes()),n[10]||(n[10]=s=>e.value.size=s)],id:"n","input-label":"n",label:"population size",modelValue:e.value.size},null,8,["thumb-color","modelValue"]))]),_:1})]),_:1})]),_:1})):c("",!0),e.value.model.isMultimeter?(i(),r(h,{key:1,class:"py-0"},{default:a(()=>[l(V,null,{default:a(()=>[l(Ye,{node:e.value},null,8,["node"])]),_:1})]),_:1})):c("",!0),e.value.paramsVisible.length>0?(i(),r(h,{key:2,class:"py-0"},{default:a(()=>[(i(!0),v(w,null,_(e.value.paramsVisible,(s,b)=>(i(),r(de,{key:b,param:e.value.params[s]},null,8,["param"]))),128))]),_:1})):c("",!0)]),_:1}),e.value.connections.length>0?(i(),r(Z,{key:0,style:{"min-height":"40px"}},{default:a(()=>[l($,null,{default:a(()=>[(i(),r(Q,{key:e.value.connections.length,modelValue:e.value.view.connectionPanelIdx,"onUpdate:modelValue":n[11]||(n[11]=s=>e.value.view.connectionPanelIdx=s),variant:"accordion"},{default:a(()=>[(i(!0),v(w,null,_(e.value.connections,(s,b)=>(i(),r(Xe,{connection:s,key:b},null,8,["connection"]))),128))]),_:1},8,["modelValue"]))]),_:1})]),_:1})):c("",!0)]),_:1},8,["color"])):c("",!0)}}),il={class:"simulationKernelEditor"},sl=z({__name:"SimulationKernelEditor",props:{color:{default:"primary",type:String}},setup(g){const u=ae(),e=g,t=R(()=>u.state.project.simulation),f={autoRNGSeedSettings:{component:"checkbox",label:"randomize seed",rules:[o=>!o||"It always generates new script code. Uncheck if you want to modify the script."]},resolutionSettings:{id:"resolution",component:"tickSlider",label:"simulation resolution",tickLabels:[.01,.1,1,10],unit:"ms",rules:[o=>o>=.1||"Small values generate many data points and can put quite a load on your browser."]},rngSeedSettings:{id:"rng_seed",component:"valueSlider",label:"seed of the random number generator",max:1e3,min:1,rules:[o=>o>0||"The value must be strictly positive."],value:1},simulationTimeSettings:{id:"time",component:"valueSlider",label:"simulation time",max:2e3,min:0,unit:"ms",value:1e3,rules:[o=>o<2e3||"Large values generate many data points and can put quite a load on your browser."]},threadSettings:{component:"tickSlider",label:"local number of threads",tickLabels:[1,2,4,8]}},d=L({autoRNGSeed:!1});function m(){var o;(o=t.value.kernel.config)==null||o.update({autoRNGSeed:d.autoRNGSeed})}return J(()=>{var o;d.autoRNGSeed=(o=t.value.kernel.config)==null?void 0:o.localStorage.autoRNGSeed}),(o,n)=>(i(),v("div",il,[l(_e,{color:"transparent",density:"compact"},{default:a(()=>[l(Se,null,{default:a(()=>[p(" Simulation kernel editor")]),_:1})]),_:1}),l(O,{color:e.color,class:"ma-1"},{default:a(()=>[l(q,{class:"pa-0 text-center text-button"},{default:a(()=>[p(" Simulation kernel ")]),_:1}),l(D,null,{default:a(()=>[l(Y,S({"thumb-color":e.color,class:"mx-1 py-1"},f.threadSettings,{modelValue:t.value.kernel.localNumThreads,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value.kernel.localNumThreads=s)}),null,16,["thumb-color","modelValue"]),l(Y,S({thumbColor:e.color,class:"mx-1 py-1"},f.resolutionSettings,{modelValue:t.value.kernel.resolution,"onUpdate:modelValue":n[1]||(n[1]=s=>t.value.kernel.resolution=s)}),null,16,["thumbColor","modelValue"]),l(U,S({"thumb-color":e.color,class:"mx-1 py-1"},f.rngSeedSettings,{modelValue:t.value.kernel.rngSeed,"onUpdate:modelValue":n[2]||(n[2]=s=>t.value.kernel.rngSeed=s)}),null,16,["thumb-color","modelValue"]),l(N,S({color:e.color,"onUpdate:modelValue":n[3]||(n[3]=s=>m()),class:"mx-1","hide-details":"auto"},f.autoRNGSeedSettings,{modelValue:d.autoRNGSeed,"onUpdate:modelValue":n[4]||(n[4]=s=>d.autoRNGSeed=s)}),null,16,["color","modelValue"])]),_:1})]),_:1},8,["color"]),l(O,{color:e.color,class:"ma-1"},{default:a(()=>[l(q,{class:"pa-0 text-center text-button"},{default:a(()=>[p(" Simulation ")]),_:1}),l(D,{class:"py-0"},{default:a(()=>[l(U,S({"thumb-color":e.color,class:"mx-1 py-2"},f.simulationTimeSettings,{modelValue:t.value.time,"onUpdate:modelValue":n[5]||(n[5]=s=>t.value.time=s)}),null,16,["thumb-color","modelValue"])]),_:1})]),_:1},8,["color"])]))}}),ul={key:0},dl={key:1},Vl=z({__name:"ProjectLayout",setup(g){const u=ae(),e=he(),t=R(()=>u.state.project),f=$e(""),d=()=>{t.value.network.modelsCopied.copy(f.value),t.value.network.changes()};return(m,o)=>{const n=ze("router-view");return i(),v(w,null,[l(re,{projectDBStore:j(e)},null,8,["projectDBStore"]),l(me,{projectStore:j(u),color:"nest-project"},{tabs:a(()=>[l(X,{to:{name:"nestNetworkEditor",params:{projectId:j(u).state.projectId}},title:"Network Editor",size:"small",stacked:"",value:"edit"},{default:a(()=>[l(C,{icon:"network:network"}),p(" Editor ")]),_:1},8,["to"]),l(X,{to:{name:"nestActivityExplorer",params:{projectId:j(u).state.projectId}},title:"Activity Explorer",size:"small",stacked:"",value:"explore"},{default:a(()=>[l(C,{class:"mdi-flip-v",icon:"mdi:mdi-border-style"}),p(" Explorer ")]),_:1},8,["to"]),l(y,{disabled:!t.value.network.nodes.hasSomeSpatialNodes,height:"100%",rounded:"0",variant:"plain",width:"32",style:{"min-width":"32px"}},{default:a(()=>[l(C,{icon:"mdi:mdi-menu-down"}),l(E,{activator:"parent"},{default:a(()=>[l(h,{density:"compact"},{default:a(()=>[l(V,{onClick:o[0]||(o[0]=()=>j(u).state.tab.activityView="abstract")},{prepend:a(()=>[l(C,{class:"mdi-flip-v",icon:"mdi:mdi-border-style"})]),default:a(()=>[p(" abstract ")]),_:1}),l(V,{onClick:o[1]||(o[1]=()=>j(u).state.tab.activityView="spatial"),"prepend-icon":"mdi:mdi-axis-arrow"},{default:a(()=>[p(" spatial ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled"]),l(Pe,{vertical:""}),l(X,{to:{name:"nestLabBook",params:{projectId:j(u).state.projectId}},title:"Lab Book",size:"small",stacked:"",value:"lab"},{default:a(()=>[l(C,{icon:"mdi:mdi-book-open-outline"}),p(" Lab Book ")]),_:1},8,["to"])]),_:1},8,["projectStore"]),l(ce,{projectStore:j(u)},{activityController:a(()=>[j(u).state.tab.activityView==="abstract"?(i(),r(pe,{key:0,graph:t.value.activityGraph.activityChartGraph},null,8,["graph"])):j(u).state.tab.activityView==="spatial"?(i(),v(w,{key:1},[l(je,{graph:t.value.activityGraph.activityAnimationGraph},null,8,["graph"]),l(Q,null,{default:a(()=>[(i(!0),v(w,null,_(t.value.activityGraph.activityAnimationGraph.layers,(s,b)=>(i(),r(Ee,{key:b,layer:s},null,8,["layer"]))),128))]),_:1})],64)):c("",!0)]),model:a(()=>[t.value.network.state.elementTypeIdx===5?(i(),v("span",ul,[l(G,{items:t.value.modelDBStore.state.models,class:"ma-1",density:"compact",flat:"","hide-details":"","item-title":"label","item-value":"id",label:"Existing model","prepend-icon":"mdi:mdi-plus",modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=s=>f.value=s),variant:"outlined"},{append:a(()=>[l(y,{disabled:f.value.length===0,onClick:o[2]||(o[2]=s=>d()),text:"copy",variant:"outlined"},null,8,["disabled"])]),_:1},8,["items","modelValue"])])):c("",!0),[0,5].includes(t.value.network.state.elementTypeIdx)?(i(),v("span",dl,[(i(!0),v(w,null,_(t.value.network.modelsCopied.all,(s,b)=>(i(),r(qe,{key:b,model:s},null,8,["model"]))),128))])):c("",!0)]),nodes:a(()=>[(i(),v("div",{key:t.value.network.nodes.length},[(i(!0),v(w,null,_(t.value.network.nodes.all,(s,b)=>(i(),v("div",{key:b},[s.isNode?(i(),r(nl,{key:0,node:s},null,8,["node"])):s.isGroup?(i(),r(ve,{key:1,nodeGroup:s},null,8,["nodeGroup"])):c("",!0)]))),128))]))]),simulationKernel:a(()=>[l(sl,{simulation:t.value.simulation},null,8,["simulation"])]),_:1},8,["projectStore"]),(i(),r(n,{key:j(u).state.projectId,name:"project"}))],64)}}});export{Vl as default};
