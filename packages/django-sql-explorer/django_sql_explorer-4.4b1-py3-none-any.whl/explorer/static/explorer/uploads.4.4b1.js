import{g as i}from"./csrf.4.4b1.js";function d(){var t=document.getElementById("drop-area"),r=document.getElementById("fileElem");t&&(t.onclick=function(){r.click()},t.addEventListener("dragover",function(e){e.preventDefault(),t.classList.add("bg-info")}),t.addEventListener("dragleave",function(e){t.classList.remove("bg-info")}),t.addEventListener("drop",function(e){e.preventDefault(),t.classList.remove("bg-info");let o=e.dataTransfer.files;o.length&&a(o[0])}),r.onchange=function(){this.files.length&&a(this.files[0])});function a(e){c(e)}function c(e){let o=new FormData;o.append("file",e),fetch("../upload/",{method:"POST",headers:{"X-CSRFToken":i()},body:o}).then(n=>n.json()).then(()=>{window.location.reload()}).catch(n=>console.error("Error:",n))}document.getElementById("test-connection-btn").addEventListener("click",function(){var e=document.getElementById("db-connection-form"),o=new FormData(e);fetch("../../validate/",{method:"POST",body:o,headers:{"X-CSRFToken":i()}}).then(n=>n.json()).then(n=>{n.success?alert("Connection successful!"):alert("Connection failed: "+n.error)}).catch(n=>console.error("Error:",n))})}export{d as setupUploads};
