"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[5519,1504,404],{41504:function(e,n,t){t.r(n);var i=t(45987),r=t(29439),o=t(1413),a=t(16390),s=t(60103),l=t(54730),c=t(32399),d=t(68134),u=t(92628),p=t(97519),h=t(73462),f=t(49305),x=t(25861),m=t(52720),g=t(66161),y=t(85535),v=t(76399),j=t(22644),Z=t(62652),b=t(7276),_=t(45263),C=["schema","uiSchema","formData","onChange","submitBtn","theme","validator","templates","widgets","disableAdvanced"],A=(0,b.lazy)((function(){return Promise.all([t.e(9907),t.e(2580),t.e(6783)]).then(t.bind(t,62580))})),S=(0,b.lazy)((function(){return t.e(1393).then(t.bind(t,63890))})),w=(0,b.lazy)((function(){return t.e(935).then(t.bind(t,80935))})),k=(0,b.lazy)((function(){return Promise.all([t.e(6419),t.e(2789),t.e(3960),t.e(9921),t.e(5539),t.e(111),t.e(4880),t.e(686),t.e(6374)]).then(t.bind(t,16374))})),P=(0,b.lazy)((function(){return Promise.all([t.e(6419),t.e(2789),t.e(3960),t.e(9921),t.e(111),t.e(3667),t.e(6279),t.e(7458)]).then(t.bind(t,96279))})),E=(0,b.lazy)((function(){return Promise.all([t.e(7420),t.e(2341)]).then(t.bind(t,16214))})),I=(0,b.lazy)((function(){return Promise.all([t.e(6419),t.e(2789),t.e(3960),t.e(9921),t.e(5539),t.e(111),t.e(4880),t.e(686),t.e(5831)]).then(t.bind(t,75831))})),R=(0,b.lazy)((function(){return t.e(8781).then(t.bind(t,68781))})),T=(0,b.lazy)((function(){return t.e(6317).then(t.bind(t,6317))})),O=(0,b.lazy)((function(){return t.e(4843).then(t.bind(t,64843))})),D=(0,b.lazy)((function(){return Promise.all([t.e(2789),t.e(111),t.e(2384)]).then(t.bind(t,12384))})),N=(0,b.lazy)((function(){return t.e(7437).then(t.bind(t,97437))})),M=(0,b.lazy)((function(){return Promise.all([t.e(7902),t.e(7533)]).then(t.bind(t,57533))}));function B(e){return(0,_.jsx)(I,(0,o.Z)({},e))}function z(e){return(0,_.jsx)(T,(0,o.Z)({},e))}function L(e){var n=e.id,t=e.children,i=e.classNames,o=e.style,a=e.disabled,c=e.displayLabel,d=e.hidden,u=e.label,p=e.onDropPropertyClick,h=e.onKeyChange,f=e.readonly,x=e.required,m=e.rawErrors,g=void 0===m?[]:m,y=e.errors,v=e.help,j=e.rawDescription,C=e.schema,A=e.uiSchema,S=e.registry,w=(0,b.useState)(!1),k=(0,r.Z)(w,2),P=k[0],E=k[1],I=(0,Z.LI)(A),R=(0,Z.t4)("WrapIfAdditionalTemplate",S,I);return d?(0,_.jsx)("div",{style:{display:"none"},children:t}):(0,_.jsx)(R,{classNames:i,style:o,disabled:a,id:n,label:u,onDropPropertyClick:p,onKeyChange:h,readonly:f,required:x,schema:C,uiSchema:A,registry:S,children:(0,_.jsxs)(s.Z,{fullWidth:!0,error:!!g.length,required:x,onFocus:function(e){E(!0)},onBlur:function(e){E(!1)},children:[t,c&&j?(0,_.jsx)(l.Z,{id:n,focused:P,children:j}):null,y,v]})})}function U(e){var n=e.options,t=e.registry,i=(0,Z.t4)("BaseInputTemplate",t,n),r=5;return"string"!==typeof n.rows&&"number"!==typeof n.rows||(r=n.rows),(0,_.jsx)(i,(0,o.Z)((0,o.Z)({sx:{"& .MuiOutlinedInput-root":{"& > fieldset":{border:"1px solid rgb(204, 204, 204)"}}}},e),{},{multiline:!0,rows:r,variant:"outlined"}))}function F(e){return(0,_.jsx)(D,(0,o.Z)({},e))}function K(e){return(0,_.jsx)(E,(0,o.Z)({},e))}function W(e){var n=e.chat_message;if(n.content)return(0,_.jsx)(c.Z,{primary:n.content});if(n.function_call){var t=n.function_call.name,i=JSON.parse(n.function_call.arguments),r=Object.keys(i).map((function(e){return"".concat(e,'="').concat(i[e],'"')})).join(",");return(0,_.jsx)("div",{children:(0,_.jsx)(c.Z,{primary:"Function",secondary:"".concat(t,"(").concat(r,")")})})}return null}var G=function(e){var n=e.value||[],t=0;return"string"===typeof n&&(n=[{content:n}]),(0,_.jsx)(d.Z,{className:"output-chat",style:{paddingTop:0},children:n.map((function(e){return(0,_.jsxs)(u.ZP,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"10px",background:"rgb(255, 250, 236)",border:"1px solid rgb(235, 230, 236)",borderRadius:10},children:[(0,_.jsx)(p.Z,{children:(0,_.jsx)(h.Z,{color:"primary",label:e.role||"System"})}),(0,_.jsx)(W,{chat_message:e})]},t++)}))})},J=function(e){var n=e.value||[],t=0;return(0,_.jsx)(d.Z,{className:"output-text",style:{paddingTop:0},children:n.map((function(e){return(0,_.jsx)(u.ZP,{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"10px",background:"rgb(255, 250, 236)",border:"1px solid rgb(235, 230, 236)",borderRadius:10},children:(0,_.jsx)(c.Z,{primary:e})},t++)}))})},Y=function(e){var n=0;return(0,_.jsx)(f.Z,{className:"output-image",cols:2,gap:8,children:e.value.map((function(e){return(0,_.jsx)(x.Z,{children:(0,_.jsx)("img",{src:"".concat(e),loading:"lazy",alt:""})},n++)}))})},q=function(e){return(0,_.jsx)("audio",{src:e.value,controls:!0})},H=function(e){return(0,_.jsx)(w,(0,o.Z)((0,o.Z)({},e),{},{disableAdvanced:!1}))},V=function(e){return(0,_.jsx)(w,(0,o.Z)((0,o.Z)({},e),{},{disableAdvanced:!0}))},X=function(e){return(0,_.jsx)(R,(0,o.Z)({},e))},$=function(e){return(0,_.jsx)(k,(0,o.Z)({},e))},Q=function(e){return(0,_.jsx)(A,(0,o.Z)((0,o.Z)({},e),{},{richText:!0}))},ee=function(e){return(0,_.jsx)(P,(0,o.Z)({},e))},ne=function(e){return(0,_.jsx)(S,(0,o.Z)({},e))},te=function(e){var n=e.errors;return(0,_.jsx)(m.Z,{elevation:2,children:(0,_.jsxs)(g.Z,{mb:2,p:2,children:[(0,_.jsx)(y.Z,{variant:"h6",children:"Errors"}),(0,_.jsx)(d.Z,{dense:!0,children:n.map((function(e,n){return(0,_.jsxs)(u.ZP,{dense:!0,children:[(0,_.jsx)(v.Z,{children:(0,_.jsx)(a.Z,{color:"error"})}),(0,_.jsx)(c.Z,{primary:e.message})]},n)}))})]})})};n.default=function(e){var n=e.schema,t=e.uiSchema,r=e.formData,a=e.onChange,s=e.submitBtn,l=void 0===s?(0,_.jsx)("div",{}):s,c=(e.theme,e.validator),d=e.templates,u=void 0===d?{}:d,p=e.widgets,h=void 0===p?{}:p,f=e.disableAdvanced,x=void 0!==f&&f,m=(0,i.Z)(e,C),g=m.createAsset;(0,b.useEffect)((function(){var e,n,t;null!==(e=m.formRef)&&void 0!==e&&null!==(n=e.current)&&void 0!==n&&null!==(t=n.formElement)&&void 0!==t&&t.current&&m.formRef.current.formElement.current.addEventListener("submit",(function(e){e.preventDefault()}))}),[m.formRef]);var y=(0,b.useCallback)((function(e){var n;return null!==e&&void 0!==e&&null!==(n=e.schema)&&void 0!==n&&n.stream?(0,_.jsx)(M,(0,o.Z)((0,o.Z)({},e),{},{createAsset:g,formRef:m.formRef})):(0,_.jsx)(O,(0,o.Z)({},e))}),[g,m.formRef]);return(0,_.jsx)(j.ZP,(0,o.Z)((0,o.Z)({ref:m.formRef},m),{},{schema:n,uiSchema:t,validator:c,formData:r,onChange:a,templates:(0,o.Z)({ErrorListTemplate:te,FieldTemplate:L,ObjectFieldTemplate:x?V:H},u),fields:{multi:function(e){return(0,_.jsx)(N,(0,o.Z)((0,o.Z)({},e),{},{formRef:m.formRef,onCancel:m.onCancel}))}},widgets:(0,o.Z)((0,o.Z)({},{customselect:F,TextareaWidget:U,FileWidget:K,output_chat:G,output_text:J,output_image:Y,output_audio:q,datasource:ee,gdrive:B,webpageurls:z,password:X,connection:$,richtext:Q,voice:y,app_version:ne}),h),transformErrors:null===m||void 0===m?void 0:m.transformErrors,children:l}))}},35519:function(e,n,t){t.r(n),t.d(n,{default:function(){return de}});var i=t(1413),r=t(29439),o=t(63130),a=t(18791),s=t(24578),l=t(65173),c=t(7458),d=t(85535),u=t(66161),p=t(44390),h=t(44570),f=t(20495),x=t(52720),m=t(6334),g=t(31586),y=t(31342),v=t(77801),j=t(13366),Z=t(83960),b=t(7276),_=t(9229),C=t(2146),A=t(25926),S=t(84817),w=(t(74042),t(20686)),k=t(23109),P=t(34753),E=t(9340),I=t(62154),R=t(73462),T=t(10567),O=t(78735),D=t(58735),N=t(20888),M=t(34867),B=t(71516),z=t(45263),L={width:"10px",height:"10px"};function U(e){var n=e.connection,t=e.setConnection,r=e.setOpenConnectionModal,o=e.setDeleteConnectionModal;return(0,z.jsxs)(E.Z,{children:[(0,z.jsxs)(I.Z,{children:[(0,z.jsx)(d.Z,{variant:"h7",children:n.name}),(0,z.jsx)(d.Z,{variant:"caption",sx:{display:"block",color:"#999"},children:n.description})]}),(0,z.jsx)(I.Z,{sx:{textAlign:"center",width:"20px"},children:(0,z.jsx)(f.Z,{title:n.status,children:(0,z.jsxs)(u.Z,{children:["Created"===n.status&&(0,z.jsx)(R.Z,{sx:(0,i.Z)((0,i.Z)({},L),{backgroundColor:"#ccc"})}),"Connecting"===n.status&&(0,z.jsx)(R.Z,{color:"warning",sx:L}),"Active"===n.status&&(0,z.jsx)(R.Z,{color:"success",sx:L}),"Failed"===n.status&&(0,z.jsx)(R.Z,{color:"error",sx:L})]})})}),(0,z.jsx)(I.Z,{sx:{width:"20px"},children:(0,z.jsx)(h.Z,{size:"small",onClick:function(){t(n),r(!0)},children:(0,z.jsx)(k.Z,{})})}),(0,z.jsx)(I.Z,{sx:{width:"20px"},children:(0,z.jsx)(h.Z,{size:"small",onClick:function(){t(n),o(!0)},children:(0,z.jsx)(P.Z,{sx:function(e){return{color:e.palette.error.main}}})})})]})}var F=function(e){var n=e.setConnection,t=e.setOpenConnectionModal,i=e.setDeleteConnectionModal,r=(0,_.sJ)(A.rN);return(0,z.jsxs)(x.Z,{sx:{width:"100%"},children:[!r||0===r.length&&(0,z.jsxs)(T.Z,{severity:"info",sx:{textAlign:"left"},children:[(0,z.jsx)(O.Z,{children:"No connections found"}),"Add a connection using the ",(0,z.jsx)("strong",{children:"+ Connection"})," button"]}),r&&r.length>0&&(0,z.jsx)(D.Z,{children:(0,z.jsxs)(N.Z,{children:[(0,z.jsx)(M.Z,{children:(0,z.jsxs)(E.Z,{children:[(0,z.jsx)(I.Z,{children:(0,z.jsx)("strong",{children:"Name"})}),(0,z.jsx)(I.Z,{children:(0,z.jsx)("strong",{children:"Status"})}),(0,z.jsx)(I.Z,{children:(0,z.jsx)("strong",{children:"Edit"})}),(0,z.jsx)(I.Z,{children:(0,z.jsx)("strong",{children:"Delete"})})]})}),(0,z.jsx)(B.Z,{children:r.map((function(e){return(0,z.jsx)(U,{connection:e,setConnection:n,setOpenConnectionModal:t,setDeleteConnectionModal:i},e.id)}))})]})})]})},K=t(54560),W=t(969),G=t(46650),J=t(12283),Y=t(34160);var q=function(e){var n=e.open,t=e.onCancelCb,i=e.onDeleteCb,o=e.connection,a=(0,b.useState)(""),s=(0,r.Z)(a,2),l=s[0],c=s[1];return n&&o?(0,z.jsxs)(K.Z,{open:n,onClose:t,fullWidth:!0,children:[(0,z.jsx)(W.Z,{children:"Delete Connection"}),(0,z.jsxs)(G.Z,{children:[(0,z.jsx)(J.Z,{children:(0,z.jsx)(T.Z,{severity:"warning",children:"Are you sure you want to delete ".concat(o.name,"? This action cannot\n            be undone.")})}),(0,z.jsx)(p.Z,{autoFocus:!0,margin:"dense",id:"name",label:"DELETE",placeholder:"Type DELETE to confirm",type:"text",fullWidth:!0,variant:"standard",value:l,required:!0,onChange:function(e){return c(e.target.value)}})]}),(0,z.jsxs)(Y.Z,{children:[(0,z.jsx)(y.Z,{onClick:t,variant:"outlined",style:{textTransform:"none"},children:"Cancel"}),(0,z.jsx)(y.Z,{onClick:function(){return i(o).finally((function(){return t()}))},variant:"contained",style:{textTransform:"none"},disabled:"DELETE"!==l,children:"Delete"})]})]}):null};var H=function(){var e=(0,b.useState)(!1),n=(0,r.Z)(e,2),t=n[0],i=n[1],o=(0,b.useState)(!1),a=(0,r.Z)(o,2),s=a[0],l=a[1],u=(0,b.useState)(null),p=(0,r.Z)(u,2),h=p[0],f=p[1],x=(0,_._8)((function(e){var n=e.set;return function(){(0,S.o)().get("/api/connections").then((function(e){n(A.rN,e.data)})).catch((function(e){(0,Z.yv)("Error loading connections",{variant:"error"})}))}}));return(0,z.jsxs)(c.Z,{children:[(0,z.jsx)(d.Z,{variant:"h6",className:"section-header",children:"Connections"}),(0,z.jsx)(y.Z,{startIcon:(0,z.jsx)(C.Z,{}),variant:"contained",sx:{textTransform:"none",margin:"10px",marginLeft:"auto",marginRight:0},onClick:function(){f(null),i(!0)},children:"Connection"}),(0,z.jsx)(F,{setConnection:f,setOpenConnectionModal:i,setDeleteConnectionModal:l}),(0,z.jsx)(w.Z,{open:t,connection:h,onCancelCb:function(){i(!1),f(null)}}),(0,z.jsx)(q,{open:s,onCancelCb:function(){return l(!1)},onDeleteCb:function(e){return function(e){return new Promise((function(n,t){if(!e||!e.id)return(0,Z.yv)("Invalid connection information provided",{variant:"error"}),void t(new Error("Invalid connection information provided"));(0,S.o)().delete("/api/connections/".concat(e.id)).then((function(e){(0,Z.yv)("Connection deleted successfully",{variant:"success"}),x(),n(e.data)})).catch((function(e){console.log(e),(0,Z.yv)("Error deleting connection",{variant:"error"}),t(e)}))}))}(e)},connection:h})]})},V=t(63716),X=t(10981),$=t(35856),Q=t(94224),ee=t(72959),ne=t(60103),te=t(96168),ie=function(e){var n=e.open,t=e.handleCloseCb,i=(0,b.useState)([]),o=(0,r.Z)(i,2),a=o[0],s=o[1],l=(0,b.useState)(""),p=(0,r.Z)(l,2),h=p[0],f=p[1],x=(0,b.useState)("0"),g=(0,r.Z)(x,2),v=g[0],j=g[1],_=(0,b.useState)(!1),C=(0,r.Z)(_,2),A=C[0],w=C[1],k=(0,b.useState)(!1),P=(0,r.Z)(k,2),E=P[0],I=P[1],R=(0,b.useState)(!1),T=(0,r.Z)(R,2),O=T[0],D=T[1];(0,b.useEffect)((function(){(0,S.o)().get("/api/subscriptions/prices").then((function(e){s(e.data.prices||[])})).catch((function(e){(0,Z.yv)("Error loading subscription prices",{variant:"error"})}))}),[]);var N=function(e){return a.filter((function(n){return e&&n.recurring_interval||!e&&!n.recurring_interval})).map((function(n){return(0,z.jsxs)(X.Z,{component:"label",sx:{boxShadow:"none",border:"solid 1px #ddd",borderRadius:"8px"},children:[(0,z.jsx)($.Z,{title:n.product_name,subheader:(0,z.jsx)(m.Z,{}),sx:{padding:0,"& span":{textAlign:"center"}}}),(0,z.jsx)(Q.Z,{children:(0,z.jsxs)(c.Z,{children:[n.recurring_interval&&(0,z.jsxs)(d.Z,{variant:"h5",sx:{textAlign:"center",color:"#666"},children:["$",n.unit_amount,e?" / ":null,n.recurring_interval]}),!n.recurring_interval&&(0,z.jsxs)(d.Z,{variant:"body2",sx:{textAlign:"center",color:"#666"},children:[n.description," at $",(0,z.jsxs)("b",{children:[n.unit_amount," "]})]}),(0,z.jsx)(ee.Z,{variant:"soft",value:n.id,onChange:function(e){f(e.target.value)},sx:{mb:4}})]})})]},n.id)}))},M={backgroundColor:"gray.main",color:"black",width:"50%","&:hover":{backgroundColor:"gray.main"}},B={backgroundColor:"corral.main",color:"white",width:"50%","&:hover":{backgroundColor:"corral.dark"}};return(0,z.jsxs)(K.Z,{open:n,onClose:t,fullWidth:!0,children:[(0,z.jsx)(W.Z,{children:"Manage Subscription"}),(0,z.jsxs)(G.Z,{children:[(0,z.jsxs)(d.Z,{variant:"body1",sx:{color:"#666"},children:["Please pick an option that suits you best. For more details, please visit our"," ",(0,z.jsx)("a",{href:"https://www.trypromptly.com/#pricing",target:"_blank",rel:"noreferrer",children:"pricing page"}),"."]}),(0,z.jsx)("br",{}),(0,z.jsx)(u.Z,{sx:{display:"flex"},children:(0,z.jsx)(ne.Z,{sx:{width:"100%",flexDirection:"column"},children:(0,z.jsxs)(te.Z,{overlay:!0,name:"subscriptions",defaultValue:"",row:!0,sx:{gap:4},children:[(0,z.jsxs)(c.Z,{sx:{display:"flex",width:"100%",padding:"8px 0",flexDirection:"row",justifyContent:"center",gap:2,height:"40px"},children:[(0,z.jsx)(y.Z,{variant:"contained",size:"small",sx:"0"===v?B:M,onClick:function(){return j("0")},id:"credits-tab","aria-controls":"credits-tabpanel",children:"Buy Credits"}),(0,z.jsx)(y.Z,{variant:"contained",size:"small",sx:"1"===v?B:M,onClick:function(){return j("1")},id:"subscription-tab","aria-controls":"subscription-tabpanel",children:"Subscription"})]}),(0,z.jsxs)(c.Z,{spacing:2,children:["0"===v&&(0,z.jsx)(u.Z,{id:"credits-tabpanel","aria-labelledby":"credits-tab",hidden:0!==v,sx:{display:"flex",gap:2},children:N(!1)}),"1"===v&&(0,z.jsx)(u.Z,{id:"subscription-tabpanel","aria-labelledby":"subscription-tab",hidden:1!==v,sx:{display:"flex",gap:2},children:N(!0)})]})]})})})]}),(0,z.jsxs)(Y.Z,{children:[(0,z.jsx)(y.Z,{disabled:O,onClick:t,sx:{textTransform:"none"},children:"Cancel"}),(0,z.jsx)(V.Z,{disabled:E||!h,loading:A,onClick:function(){D(!0),I(!0),w(!0),(0,S.o)().post("/api/subscriptions/checkout",{price_id:h}).then((function(e){(0,Z.yv)("Loading Checkout Page",{variant:"success"}),window.location.href=e.data.checkout_session_url})).catch((function(e){})).finally((function(){D(!1),I(!1),w(!1)}))},variant:"contained",children:"Checkout"})]})]})},re=t(30494);var oe=function(e){var n,t,i,o,a=(0,b.useState)(!1),s=(0,r.Z)(a,2),l=s[0],u=s[1],p=(0,_.sJ)(A.Jn),h=(0,_.sJ)(A.Rd),f=(0,_.sJ)(A.bR);return(0,z.jsxs)(c.Z,{sx:{margin:"0 10px 60px 10px"},children:[(0,z.jsxs)(c.Z,{children:[(0,z.jsxs)(d.Z,{variant:"h6",className:"section-header",sx:{marginBottom:"8px"},children:["Storage",(0,z.jsxs)("span",{style:{float:"right",fontWeight:400,fontSize:"16px"},children:["Used:"," ",(0,z.jsx)("b",{children:"".concat(Math.round((null===h||void 0===h||null===(n=h.credits)||void 0===n?void 0:n.used_storage)/(null===h||void 0===h||null===(t=h.credits)||void 0===t?void 0:t.total_storage)*1e4)/100,"% of ").concat((0,re.zN)(null===h||void 0===h||null===(i=h.credits)||void 0===i?void 0:i.total_storage))})]})]}),(0,z.jsx)("br",{}),(0,z.jsxs)(d.Z,{variant:"h6",className:"section-header",sx:{marginBottom:"8px"},children:["Subscription",(0,z.jsxs)("span",{style:{float:"right",fontWeight:400,fontSize:"16px"},children:["Remaining Credits: ",(0,z.jsx)("b",{children:(null===h||void 0===h||null===(o=h.credits)||void 0===o?void 0:o.available)/1e3})]})]}),(0,z.jsx)(c.Z,{children:(0,z.jsx)(x.Z,{children:(0,z.jsxs)(c.Z,{children:[(0,z.jsxs)("p",{style:{display:p.IS_ORGANIZATION_MEMBER?"none":"block"},children:["Logged in as\xa0",(0,z.jsx)("strong",{children:e.user_email}),". You are currently subscribed to\xa0",(0,z.jsx)("strong",{children:p.IS_PRO_SUBSCRIBER?"Pro":p.IS_BASIC_SUBSCRIBER?"Basic":"Free"}),"\xa0tier. Click on the Manage Subscription button below to change your plan.\xa0",(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),(0,z.jsx)("i",{children:"Note: You will be redirected to Stripe payment portal to complete the upgrade payment process."})]}),(0,z.jsxs)("p",{style:{display:p.IS_ORGANIZATION_MEMBER?"block":"none"},children:["Logged in as ",(0,z.jsx)("strong",{children:e.user_email}),". Your account is managed by your organization,\xa0",(0,z.jsx)("strong",{children:null===f||void 0===f?void 0:f.name}),". Please contact your admin to manage your subscription."]})]})})}),l&&(0,z.jsx)(ie,{open:l,handleCloseCb:function(){u(!1)}})]}),!p.IS_ORGANIZATION_MEMBER&&(0,z.jsx)(y.Z,{variant:"contained",sx:{marginTop:"10px",display:p.IS_ORGANIZATION_MEMBER?"none":"inherit",alignSelf:"end"},onClick:function(){u(!0)},disabled:p.IS_PRO_SUBSCRIBER,children:"Manage Subscription"})]})},ae=t(41504),se=(0,v.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),le={type:"object",properties:{username:{type:"string",title:"Username"},openai_key:{type:"string",title:"OpenAI API Key"},stabilityai_key:{type:"string",title:"StabilityAI API Key"},cohere_key:{type:"string",title:"Cohere API Key"},elevenlabs_key:{type:"string",title:"Elevenlabs API Key"},google_service_account_json_key:{type:"string",title:"Google Credentials"},azure_openai_api_key:{type:"string",title:"Azure OpenAI API Key"},anthropic_api_key:{type:"string",title:"Anthropic API Key"},mistral_api_key:{type:"string",title:"Mistral API Key"},localai_base_url:{type:"string",title:"LocalAI Base URL"},localai_api_key:{type:"string",title:"LocalAI API Key"}}},ce={username:{"ui:default":null},openai_key:{"ui:widget":"password","ui:default":""},stabilityai_key:{"ui:widget":"password","ui:default":""},cohere_key:{"ui:widget":"password","ui:default":""},elevenlabs_key:{"ui:widget":"password","ui:default":""},google_service_account_json_key:{"ui:widget":"password","ui:help":"Add your Google Service Account JSON file content as base64 encoded string or paste the API key.","ui:default":""},azure_openai_api_key:{"ui:widget":"password","ui:default":""},localai_base_url:{"ui:widget":"text","ui:help":"LocalAI base URL here if you want to use a self-hosted LocalAI","ui:default":""},localai_api_key:{"ui:widget":"password","ui:help":"LocalAI API key if your instance needs authentication","ui:default":""},anthropic_api_key:{"ui:widget":"password","ui:default":""},mistral_api_key:{"ui:widget":"password","ui:default":""}},de=function(){var e=(0,b.useState)({username:"",token:"",openai_key:"",stabilityai_key:"",cohere_key:"",forefrontai_key:"",elevenlabs_key:"",localai_api_key:"",localai_base_url:"",azure_openai_api_key:"",google_service_account_json_key:"",anthropic_api_key:"",mistral_api_key:"",logo:""}),n=(0,r.Z)(e,2),t=n[0],v=n[1],C=(0,b.useState)(!1),w=(0,r.Z)(C,2),k=w[0],P=w[1],E=(0,b.useState)(new Set),I=(0,r.Z)(E,2),R=I[0],T=I[1],O=(0,_.sJ)(A.Dg),D=(0,_.sJ)(A.Rd),N=(0,b.createRef)();(0,b.useEffect)((function(){v(D)}),[D,v]);return(0,z.jsx)("div",{id:"setting-page",children:k?(0,z.jsx)(s.Z,{}):(0,z.jsxs)(l.ZP,{container:!0,sx:{m:1},children:[(0,z.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,z.jsxs)(c.Z,{spacing:2,sx:{textAlign:"left"},children:[(0,z.jsx)(d.Z,{variant:"h6",className:"section-header",children:"Settings"}),(0,z.jsxs)(u.Z,{sx:{padding:"15px 0"},children:[(0,z.jsx)(p.Z,{label:"Promptly Token",value:t.token,fullWidth:!0,variant:"outlined",size:"medium",InputProps:{readOnly:!0,endAdornment:(0,z.jsx)(h.Z,{onClick:function(e){navigator.clipboard.writeText(t.token),(0,Z.yv)("Token copied successfully",{variant:"success"})},children:(0,z.jsx)(f.Z,{title:"Copy Promptly API Token",children:(0,z.jsx)(o.Z,{fontSize:"small"})})})}}),(0,z.jsxs)(d.Z,{variant:"caption",children:["This is your API token. You can use this token to access",{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GA_MEASUREMENT_ID:"G-XZ40100Y5C"}.REACT_APP_SITE_NAME," API directly. Please do not share this token with anyone."]})]}),(0,z.jsx)(x.Z,{sx:{width:"100%"},children:(0,z.jsxs)(c.Z,{gap:2,padding:1,spacing:2,children:[(0,z.jsx)(ae.default,{schema:le,uiSchema:ce,formData:t,validator:j.ZP,disableAdvanced:!0,onChange:function(e){var n=(0,i.Z)((0,i.Z)({},t),e.formData);T(new Set(Object.keys(n).filter((function(n){return e.formData[n]!==t[n]})))),v(n)},formRef:N,customValidate:function(e,n,t){return n}}),(0,z.jsx)(m.Z,{}),(0,z.jsxs)(u.Z,{sx:{my:2},children:[(0,z.jsx)(g.Z,{children:"Custom Logo"}),t.logo&&(0,z.jsx)("img",{src:t.logo,alt:"Logo",style:{height:50,margin:10,display:"block"}}),(0,z.jsx)(f.Z,{title:O.CAN_UPLOAD_APP_LOGO?"":"You need to be a Pro subscriber to upload a custom logo",children:(0,z.jsxs)(y.Z,{component:"label",variant:"outlined",startIcon:(0,z.jsx)(a.Z,{}),disabled:!O.CAN_UPLOAD_APP_LOGO,children:["Upload",(0,z.jsx)(se,{type:"file",accept:"image/*",disabled:!O.CAN_UPLOAD_APP_LOGO,onChange:function(e){var n=e.target.files;if(n&&n.length>0){var r=new FileReader;r.readAsDataURL(n[0]),r.onload=function(e){var n;v((0,i.Z)((0,i.Z)({},t),{},{logo:null===(n=e.target)||void 0===n?void 0:n.result})),T(R.add("logo"))}}}})]})})]})]})}),(0,z.jsx)(y.Z,{variant:"contained",sx:{alignSelf:"end",width:"fit-content"},onClick:function(){!function(e){P(!0);var n={};e.forEach((function(e){n[e]=t[e]})),(0,S.o)().patch("api/profiles/me",n).then((function(e){(0,Z.yv)("Profile updated successfully",{variant:"success"})})).catch((function(e){var n,t;(0,Z.yv)("Failed to update profile. ".concat(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error),{variant:"error"})})).finally((function(){T(new Set),P(!1),window.location.reload()}))}(R)},children:"Update"})]})}),(0,z.jsx)(l.ZP,{item:!0,xs:12,md:6,sx:{p:0},children:(0,z.jsxs)(c.Z,{sx:{margin:"0 10px",marginBottom:"60px"},spacing:4,children:[(0,z.jsx)(H,{}),"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GA_MEASUREMENT_ID:"G-XZ40100Y5C"}.REACT_APP_ENABLE_SUBSCRIPTION_MANAGEMENT&&(0,z.jsx)(oe,{user_email:t.user_email})]})})]})})}},30494:function(e,n,t){t.d(n,{PM:function(){return s},_C:function(){return l},zN:function(){return o}});var i=t(29439),r=t(1413);function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";var t=n<0?0:n,i=Math.floor(Math.log(e)/Math.log(1e3));return"".concat(parseFloat((e/Math.pow(1e3,i)).toFixed(t))," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][i])}function a(e,n){return e+n}function s(e,n){if(!e)return n;if(!n)return e;for(var t=(0,r.Z)({},e),o=0,l=Object.entries(n);o<l.length;o++){var c=(0,i.Z)(l[o],2),d=c[0],u=c[1];if(t[d])if(Array.isArray(u))if(Array.isArray(t[d]))for(var p=0;p<u.length;p++)if(p<t[d].length){if("string"===typeof u[p]){t[d][p]=a(t[d][p],u[p]);continue}if("number"===typeof u[p]){t[d][p]=u[p];continue}t[d][p]=s(t[d][p],u[p])}else t[d].push(u[p]);else t[d]=t[d]+u;else t[d]="object"===typeof u?s(t[d],u):"string"===typeof u?a(t[d],u):"number"===typeof u?u:t[d]+u;else t[d]=u}return t}function l(e){var n={type:"object",properties:{}},t={},i=[],r=[];return e&&e.forEach((function(e){var o,a;(i.push(e.name),e.required&&r.push(e.name),n.properties[e.name]={type:"text"===e.type||"voice"===e.type||"file"===e.type||"datasource"===e.type||"connection"===e.type||"select"===e.type?"string":e.type,title:e.title,description:e.description},e.default&&(n.properties[e.name].default=e.default),"text"===e.type&&(t[e.name]={"ui:widget":"textarea"}),"boolean"===e.type&&(t[e.name]={"ui:widget":"radio"}),"file"===e.type&&(t[e.name]={"ui:widget":"file"},n.properties[e.name].format="data-url",n.properties[e.name].pattern="data:(.*);name=(.*);base64,(.*)",n.properties[e.name].accepts=e.accept||"*",n.properties[e.name].maxSize=e.maxSize||2e6),"voice"===e.type&&(t[e.name]={"ui:widget":"voice"},e.stream||(n.properties[e.name].format="data-url",n.properties[e.name].pattern="data:(.*);name=(.*);base64,(.*)"),n.properties[e.name].stream=e.stream||!1),"select"===e.type)&&(t[e.name]={"ui:widget":"select"},n.properties[e.name].enum=null===(o=e.options)||void 0===o?void 0:o.map((function(e){return e.value})),n.properties[e.name].enumNames=null===(a=e.options)||void 0===a?void 0:a.map((function(e){return e.label})),e["ui:options"]&&t[e.name]&&(t[e.name]["ui:options"]=e["ui:options"]));"multi"===e.type&&(t[e.name]={"ui:field":"multi"},n.properties[e.name].type="object",n.properties[e.name].placeholder=e.placeholder||e.description||"",n.properties[e.name].allowFiles=e.allowFiles||!1,n.properties[e.name].filesMultiple=e.filesMultiple||!1,n.properties[e.name].filesAccept=e.filesAccept||"audio/*, video/*, image/*, text/csv, application/pdf",n.properties[e.name].filesMaxSize=e.filesMaxSize||2e6),"datasource"===e.type&&(t[e.name]={"ui:widget":"datasource"}),"connection"===e.type&&(t[e.name]={"ui:widget":"connection"})})),t["ui:order"]=i,t["ui:required"]=r,{schema:n,uiSchema:t}}}}]);