"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[2580],{62580:function(e,t,n){n.r(t),n.d(t,{default:function(){return Oe}});var a=n(93433),o=n(29439),r=n(57654),i=n(48298),l=n(66161),s=n(85535),c=n(55216),u=n(92345),d=n(7276),f=n(1413),p=n(15671),h=n(43144),m=n(60136),x=n(29388),g=n(11752),v=n(61120),N=n(70700),b=n(52191),C=n(4931),j=n(11465),k=n(97677),y=n(50397),E=n(15219),S=n(57362),T=n.n(S),_=n(26461),M=n(58004),O=n(1403),L=n(95219),Z=n(67816),w=n(38110),R=n(52702),$=n(73462),A=n(88724),D=(n(40383),n(4942)),I=n(71613),F=n(79229),P=n(81108),B=n(45987),H=n(45263),V=d.createContext(null);function G(e){var t=e.children,n=e.className,a=e.onClick,o=e.title,r=(0,d.useRef)(null),i=d.useContext(V);if(null===i)throw new Error("DropDownItem must be used within a DropDown");var l=i.registerItem;return(0,d.useEffect)((function(){r&&r.current&&l(r)}),[r,l]),(0,H.jsx)("button",{className:n,onClick:a,ref:r,title:o,type:"button",children:t})}function K(e){var t=e.children,n=e.dropDownRef,r=e.onClose,i=(0,d.useState)(),l=(0,o.Z)(i,2),s=l[0],c=l[1],u=(0,d.useState)(),f=(0,o.Z)(u,2),p=f[0],h=f[1],m=(0,d.useCallback)((function(e){c((function(t){return t?[].concat((0,a.Z)(t),[e]):[e]}))}),[c]),x=(0,d.useMemo)((function(){return{registerItem:m}}),[m]);return(0,d.useEffect)((function(){s&&!p&&h(s[0]),p&&p.current&&p.current.focus()}),[s,p]),(0,H.jsx)(V.Provider,{value:x,children:(0,H.jsx)("div",{className:"dropdown",ref:n,onKeyDown:function(e){if(s){var t=e.key;["Escape","ArrowUp","ArrowDown","Tab"].includes(t)&&e.preventDefault(),"Escape"===t||"Tab"===t?r():"ArrowUp"===t?h((function(e){if(!e)return s[0];var t=s.indexOf(e)-1;return s[-1===t?s.length-1:t]})):"ArrowDown"===t&&h((function(e){return e?s[s.indexOf(e)+1]:s[0]}))}},children:t})})}function U(e){var t=e.disabled,n=void 0!==t&&t,a=e.buttonLabel,r=e.buttonAriaLabel,i=e.buttonClassName,l=e.buttonIconClassName,s=e.children,c=e.stopCloseOnClickSelf,u=(0,d.useRef)(null),f=(0,d.useRef)(null),p=(0,d.useState)(!1),h=(0,o.Z)(p,2),m=h[0],x=h[1];return(0,d.useEffect)((function(){var e=f.current,t=u.current;if(m&&null!==e&&null!==t){var n=e.getBoundingClientRect(),a=n.top,o=n.left;t.style.top="".concat(a+40,"px"),t.style.left="".concat(Math.min(o,window.innerWidth-t.offsetWidth-20),"px")}}),[u,f,m]),(0,d.useEffect)((function(){var e=f.current;if(null!==e&&m){var t=function(t){var n=t.target;c&&u.current&&u.current.contains(n)||e.contains(n)||x(!1)};return document.addEventListener("click",t),function(){document.removeEventListener("click",t)}}}),[u,f,m,c]),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("button",{disabled:n,"aria-label":r||a,className:i,onClick:function(){return x(!m)},ref:f,children:[l&&(0,H.jsx)("span",{className:l}),a&&(0,H.jsx)("span",{className:"text dropdown-button-text",children:a}),(0,H.jsx)("i",{className:"chevron-down"})]}),m&&(0,P.createPortal)((0,H.jsx)(K,{dropDownRef:u,onClose:function(){x(!1),f&&f.current&&f.current.focus()},children:s}),document.body)]})}var q=function(e){var t=e.label,n=e.value,a=e.onChange,o=e.placeholder,r=void 0===o?"":o,i=e["data-test-id"];return(0,H.jsxs)("div",{className:"Input__wrapper",children:[(0,H.jsx)("label",{className:"Input__label",children:t}),(0,H.jsx)("input",{type:"text",className:"Input__input",placeholder:r,value:n,onChange:function(e){a(e.target.value)},"data-test-id":i})]})},z=["color","children","onChange","disabled","stopCloseOnClickSelf"],W=["#d0021b","#f5a623","#f8e71c","#8b572a","#7ed321","#417505","#bd10e0","#9013fe","#4a90e2","#50e3c2","#b8e986","#000000","#4a4a4a","#9b9b9b","#ffffff"],X=214,J=150;function Q(e){var t=e.color,n=e.children,a=e.onChange,r=e.disabled,i=void 0!==r&&r,l=e.stopCloseOnClickSelf,s=void 0===l||l,c=(0,B.Z)(e,z),u=(0,d.useState)(re("hex",t)),p=(0,o.Z)(u,2),h=p[0],m=p[1],x=(0,d.useState)(t),g=(0,o.Z)(x,2),v=g[0],N=g[1],b=(0,d.useRef)(null),C=(0,d.useMemo)((function(){return{x:h.hsv.s/100*X,y:(100-h.hsv.v)/100*J}}),[h.hsv.s,h.hsv.v]),j=(0,d.useMemo)((function(){return{x:h.hsv.h/360*X}}),[h.hsv]);return(0,d.useEffect)((function(){null!==b.current&&a&&(a(h.hex),N(h.hex))}),[h,a]),(0,d.useEffect)((function(){if(void 0!==t){var e=re("hex",t);m(e),N(e.hex)}}),[t]),(0,H.jsxs)(U,(0,f.Z)((0,f.Z)({},c),{},{disabled:i,stopCloseOnClickSelf:s,children:[(0,H.jsxs)("div",{className:"color-picker-wrapper",style:{width:X},ref:b,children:[(0,H.jsx)(q,{label:"Hex",onChange:function(e){if(N(e),/^#[0-9A-Fa-f]{6}$/i.test(e)){var t=re("hex",e);m(t)}},value:v}),(0,H.jsx)("div",{className:"color-picker-basic-color",children:W.map((function(e){return(0,H.jsx)("button",{className:e===h.hex?" active":"",style:{backgroundColor:e},onClick:function(){N(e),m(re("hex",e))}},e)}))}),(0,H.jsx)(Y,{className:"color-picker-saturation",style:{backgroundColor:"hsl(".concat(h.hsv.h,", 100%, 50%)")},onChange:function(e){var t=e.x,n=e.y,a=re("hsv",(0,f.Z)((0,f.Z)({},h.hsv),{},{s:t/X*100,v:100-n/J*100}));m(a),N(a.hex)},children:(0,H.jsx)("div",{className:"color-picker-saturation_cursor",style:{backgroundColor:h.hex,left:C.x,top:C.y}})}),(0,H.jsx)(Y,{className:"color-picker-hue",onChange:function(e){var t=e.x,n=re("hsv",(0,f.Z)((0,f.Z)({},h.hsv),{},{h:t/X*360}));m(n),N(n.hex)},children:(0,H.jsx)("div",{className:"color-picker-hue_cursor",style:{backgroundColor:"hsl(".concat(h.hsv.h,", 100%, 50%)"),left:j.x}})}),(0,H.jsx)("div",{className:"color-picker-color",style:{backgroundColor:h.hex}})]}),n]}))}function Y(e){var t=e.className,n=e.style,a=e.onChange,o=e.children,r=(0,d.useRef)(null),i=function(e){if(r.current){var t=r.current.getBoundingClientRect(),n=t.width,o=t.height,i=t.left,l=t.top,s=ee(e.clientX-i,n,0),c=ee(e.clientY-l,o,0);a({x:s,y:c})}};return(0,H.jsx)("div",{ref:r,className:t,style:n,onMouseDown:function(e){if(0===e.button){i(e);var t=function(e){i(e)};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",(function e(n){document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",e,!1),i(n)}),!1)}},children:o})}function ee(e,t,n){return e>t?t:e<n?n:e}function te(e){if(!e.startsWith("#")){var t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("2d context not supported or canvas already initialized");return t.fillStyle=e,t.fillStyle}return 4===e.length||5===e.length?e=e.split("").map((function(e,t){return t?e+e:"#"})).join(""):7===e.length||9===e.length?e:"#000000"}function ne(e){var t=(e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return"#"+t+t+n+n+a+a})).substring(1).match(/.{2}/g)||[]).map((function(e){return parseInt(e,16)}));return{b:t[2],g:t[1],r:t[0]}}function ae(e){var t=e.r,n=e.g,a=e.b;t/=255,n/=255,a/=255;var o=Math.max(t,n,a),r=o-Math.min(t,n,a);return{h:r?60*(o===t?(n-a)/r+(n<a?6:0):o===n?2+(a-t)/r:4+(t-n)/r):0,s:o?r/o*100:0,v:100*o}}function oe(e){var t=e.b,n=e.g;return"#"+[e.r,n,t].map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function re(e,t){var n=te("#121212"),a=ne(n),o=ae(a);if("hex"===e)o=ae(a=ne(n=te(t)));else if("rgb"===e){n=oe(a=t),o=ae(a)}else if("hsv"===e){n=oe(a=function(e){var t=e.h,n=e.s,a=e.v,o=~~(t/60),r=t/60-o,i=(a/=100)*(1-(n/=100)),l=a*(1-n*r),s=a*(1-n*(1-r)),c=o%6,u=Math.round(255*[a,l,i,i,s,a][c]),d=Math.round(255*[s,a,a,l,i,i][c]);return{b:Math.round(255*[i,i,s,a,a,l][c]),g:d,r:u}}(o=t))}return{hex:n,hsv:o,rgb:a}}var ie=1,le=new Set(["paragraph","quote","code","h1","h2","ul","ol"]),se={code:"Code Block",h1:"Large Heading",h2:"Small Heading",h3:"Heading",h4:"Heading",h5:"Heading",ol:"Numbered List",paragraph:"Normal",quote:"Quote",ul:"Bulleted List"},ce=[["Arial","Arial"],["Courier New","Courier New"],["Georgia","Georgia"],["Lato","Lato"],["Times New Roman","Times New Roman"],["Trebuchet MS","Trebuchet MS"],["Verdana","Verdana"]],ue=[["10px","10px"],["11px","11px"],["12px","12px"],["13px","13px"],["14px","14px"],["15px","15px"],["16px","16px"],["17px","17px"],["18px","18px"],["19px","19px"],["20px","20px"]];function de(){return(0,H.jsx)("div",{className:"divider"})}function fe(e,t){null===t?(e.style.opacity="0",e.style.top="-1000px",e.style.left="-1000px"):(e.style.opacity="1",e.style.top="".concat(t.top+t.height+window.pageYOffset+10,"px"),e.style.left="".concat(t.left+window.pageXOffset-e.offsetWidth/2+t.width/2,"px"))}function pe(e){var t=e.editor,n=(0,d.useRef)(null),a=(0,d.useRef)(null),r=(0,d.useRef)(!1),i=(0,d.useState)(""),l=(0,o.Z)(i,2),s=l[0],c=l[1],u=(0,d.useState)(!1),f=(0,o.Z)(u,2),p=f[0],h=f[1],m=(0,d.useState)(null),x=(0,o.Z)(m,2),g=x[0],v=x[1],N=(0,d.useCallback)((function(){var e=(0,A.$getSelection)();if((0,A.$isRangeSelection)(e)){var a=me(e),o=a.getParent();(0,C.$isLinkNode)(o)?c(o.getURL()):(0,C.$isLinkNode)(a)?c(a.getURL()):c("")}var i=n.current,l=window.getSelection(),s=document.activeElement;if(null!==i){var u=t.getRootElement();if(null!==e&&!l.isCollapsed&&null!==u&&u.contains(l.anchorNode)){var d,f=l.getRangeAt(0);if(l.anchorNode===u){for(var p=u;null!=p.firstElementChild;)p=p.firstElementChild;d=p.getBoundingClientRect()}else d=f.getBoundingClientRect();r.current||fe(i,d),v(e)}else s&&"link-input"===s.className||(fe(i,null),v(null),h(!1),c(""));return!0}}),[t]);return(0,d.useEffect)((function(){return(0,F.mergeRegister)(t.registerUpdateListener((function(e){e.editorState.read((function(){N()}))})),t.registerCommand(A.SELECTION_CHANGE_COMMAND,(function(){return N(),!0}),ie))}),[t,N]),(0,d.useEffect)((function(){t.getEditorState().read((function(){N()}))}),[t,N]),(0,d.useEffect)((function(){p&&a.current&&a.current.focus()}),[p]),(0,H.jsx)("div",{ref:n,className:"link-editor",children:p?(0,H.jsx)("input",{ref:a,className:"link-input",value:s,onChange:function(e){c(e.target.value)},onKeyDown:function(e){"Enter"===e.key?(e.preventDefault(),null!==g&&(""!==s&&t.dispatchCommand(C.TOGGLE_LINK_COMMAND,s),h(!1))):"Escape"===e.key&&(e.preventDefault(),h(!1))}}):(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)("div",{className:"link-input",children:[(0,H.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:s}),(0,H.jsx)("div",{className:"link-edit",role:"button",tabIndex:0,onMouseDown:function(e){return e.preventDefault()},onClick:function(){h(!0)}})]})})})}var he=function(e){var t=e.onChange,n=e.className,a=e.options,o=e.value;return(0,H.jsxs)("select",{className:n,onChange:t,value:o,children:[(0,H.jsx)("option",{hidden:!0,value:""}),a.map((function(e){return(0,H.jsx)("option",{value:e,children:e},e)}))]})};function me(e){var t=e.anchor,n=e.focus,a=e.anchor.getNode(),o=e.focus.getNode();return a===o?a:e.isBackward()?(0,I.$isAtNodeEnd)(n)?a:o:(0,I.$isAtNodeEnd)(t)?o:a}var xe=function(e){var t=e.editor,n=e.blockType,a=e.toolbarRef,o=e.setShowBlockOptionsDropDown,r=(0,d.useRef)(null);(0,d.useEffect)((function(){var e=a.current,t=r.current;if(null!==e&&null!==t){var n=e.getBoundingClientRect(),o=n.top,i=n.left;t.style.top="".concat(o+40,"px"),t.style.left="".concat(i,"px")}}),[r,a]),(0,d.useEffect)((function(){var e=r.current,t=a.current;if(null!==e&&null!==t){var n=function(n){var a=n.target;e.contains(a)||t.contains(a)||o(!1)};return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}}),[r,o,a]);return(0,H.jsxs)("div",{className:"dropdown",ref:r,children:[(0,H.jsxs)("button",{className:"item",onClick:function(){"paragraph"!==n&&t.update((function(){var e=(0,A.$getSelection)();(0,A.$isRangeSelection)(e)&&(0,I.$wrapNodes)(e,(function(){return(0,A.$createParagraphNode)()}))})),o(!1)},children:[(0,H.jsx)("span",{className:"icon paragraph"}),(0,H.jsx)("span",{className:"text",children:"Normal"}),"paragraph"===n&&(0,H.jsx)("span",{className:"active"})]}),(0,H.jsxs)("button",{className:"item",onClick:function(){"h1"!==n&&t.update((function(){var e=(0,A.$getSelection)();(0,A.$isRangeSelection)(e)&&(0,I.$wrapNodes)(e,(function(){return(0,w.$createHeadingNode)("h1")}))})),o(!1)},children:[(0,H.jsx)("span",{className:"icon large-heading"}),(0,H.jsx)("span",{className:"text",children:"Large Heading"}),"h1"===n&&(0,H.jsx)("span",{className:"active"})]}),(0,H.jsxs)("button",{className:"item",onClick:function(){"h2"!==n&&t.update((function(){var e=(0,A.$getSelection)();(0,A.$isRangeSelection)(e)&&(0,I.$wrapNodes)(e,(function(){return(0,w.$createHeadingNode)("h2")}))})),o(!1)},children:[(0,H.jsx)("span",{className:"icon small-heading"}),(0,H.jsx)("span",{className:"text",children:"Small Heading"}),"h2"===n&&(0,H.jsx)("span",{className:"active"})]}),(0,H.jsxs)("button",{className:"item",onClick:function(){"ul"!==n?t.dispatchCommand(j.INSERT_UNORDERED_LIST_COMMAND):t.dispatchCommand(j.REMOVE_LIST_COMMAND),o(!1)},children:[(0,H.jsx)("span",{className:"icon bullet-list"}),(0,H.jsx)("span",{className:"text",children:"Bullet List"}),"ul"===n&&(0,H.jsx)("span",{className:"active"})]}),(0,H.jsxs)("button",{className:"item",onClick:function(){"ol"!==n?t.dispatchCommand(j.INSERT_ORDERED_LIST_COMMAND):t.dispatchCommand(j.REMOVE_LIST_COMMAND),o(!1)},children:[(0,H.jsx)("span",{className:"icon numbered-list"}),(0,H.jsx)("span",{className:"text",children:"Numbered List"}),"ol"===n&&(0,H.jsx)("span",{className:"active"})]}),(0,H.jsxs)("button",{className:"item",onClick:function(){"quote"!==n&&t.update((function(){var e=(0,A.$getSelection)();(0,A.$isRangeSelection)(e)&&(0,I.$wrapNodes)(e,(function(){return(0,w.$createQuoteNode)()}))})),o(!1)},children:[(0,H.jsx)("span",{className:"icon quote"}),(0,H.jsx)("span",{className:"text",children:"Quote"}),"quote"===n&&(0,H.jsx)("span",{className:"active"})]}),(0,H.jsxs)("button",{className:"item",onClick:function(){"code"!==n&&t.update((function(){var e=(0,A.$getSelection)();(0,A.$isRangeSelection)(e)&&(0,I.$wrapNodes)(e,(function(){return(0,N.$createCodeNode)()}))})),o(!1)},children:[(0,H.jsx)("span",{className:"icon code"}),(0,H.jsx)("span",{className:"text",children:"Code Block"}),"code"===n&&(0,H.jsx)("span",{className:"active"})]})]})};function ge(e){var t=e.editor,n=e.value,a=e.styleProperty,r=e.disabled,i=void 0!==r&&r,l=(0,d.useCallback)((function(e){t.update((function(){var t=(0,A.$getSelection)();(0,A.$isRangeSelection)(t)&&(0,I.$patchStyleText)(t,(0,D.Z)({},a,e))}))}),[t,a]),s="font-family"===a?"Formatting options for font family":"Formatting options for font size";return(0,H.jsx)(U,{disabled:i,buttonClassName:"toolbar-item "+a,buttonLabel:n,buttonIconClassName:"font-family"===a?"icon block-type font-family":"",buttonAriaLabel:s,children:("font-family"===a?ce:ue).map((function(e){var t,r=(0,o.Z)(e,2),i=r[0],s=r[1];return(0,H.jsx)(G,{className:"item ".concat((t=n===i,t?"active dropdown-item-active":"")," ").concat("font-size"===a?"fontsize-item":""),onClick:function(){return l(i)},children:(0,H.jsx)("span",{className:"text",children:s})},i)}))})}function ve(){var e=(0,y.useLexicalComposerContext)(),t=(0,o.Z)(e,1)[0],n=(0,d.useRef)(null),a=(0,d.useState)("paragraph"),r=(0,o.Z)(a,2),i=r[0],l=r[1],s=(0,d.useState)(null),c=(0,o.Z)(s,2),u=c[0],f=c[1],p=(0,d.useState)(!1),h=(0,o.Z)(p,2),m=h[0],x=h[1],g=(0,d.useState)(""),v=(0,o.Z)(g,2),b=v[0],k=v[1],E=(0,d.useState)(!1),S=(0,o.Z)(E,2),T=S[0],_=S[1],M=(0,d.useState)(!1),O=(0,o.Z)(M,2),L=O[0],Z=O[1],R=(0,d.useState)(!1),$=(0,o.Z)(R,2),D=$[0],B=$[1],V=(0,d.useState)(!1),K=(0,o.Z)(V,2),q=K[0],z=K[1],W=(0,d.useState)(!1),X=(0,o.Z)(W,2),J=X[0],Y=X[1],ee=(0,d.useState)(!1),te=(0,o.Z)(ee,2),ne=te[0],ae=te[1],oe=(0,d.useState)(!1),re=(0,o.Z)(oe,2),ce=re[0],ue=re[1],fe=(0,d.useState)("Lato"),ve=(0,o.Z)(fe,2),Ne=ve[0],be=ve[1],Ce=(0,d.useState)("15px"),je=(0,o.Z)(Ce,2),ke=je[0],ye=je[1],Ee=(0,d.useState)("#000"),Se=(0,o.Z)(Ee,2),Te=Se[0],_e=Se[1],Me=t.isEditable(),Oe=(0,d.useCallback)((function(){var e=(0,A.$getSelection)();if((0,A.$isRangeSelection)(e)){var n=e.anchor.getNode(),a="root"===n.getKey()?n:n.getTopLevelElementOrThrow(),o=a.getKey();if(null!==t.getElementByKey(o))if(f(o),(0,j.$isListNode)(a)){var r=(0,F.$getNearestNodeOfType)(n,j.ListNode),i=r?r.getTag():a.getTag();l(i)}else{var s=(0,w.$isHeadingNode)(a)?a.getTag():a.getType();l(s),(0,N.$isCodeNode)(a)&&k(a.getLanguage()||(0,N.getDefaultCodeLanguage)())}B(e.hasFormat("bold")),z(e.hasFormat("italic")),Y(e.hasFormat("underline")),ae(e.hasFormat("strikethrough")),ue(e.hasFormat("code")),_((0,I.$isParentElementRTL)(e)),ye((0,I.$getSelectionStyleValueForProperty)(e,"font-size","15px")),be((0,I.$getSelectionStyleValueForProperty)(e,"font-family","Lato")),_e((0,I.$getSelectionStyleValueForProperty)(e,"color","#000"));var c=me(e),u=c.getParent();(0,C.$isLinkNode)(u)||(0,C.$isLinkNode)(c)?Z(!0):Z(!1)}}),[t]);(0,d.useEffect)((function(){return(0,F.mergeRegister)(t.registerUpdateListener((function(e){e.editorState.read((function(){Oe()}))})),t.registerCommand(A.SELECTION_CHANGE_COMMAND,(function(e,t){return Oe(),!1}),ie))}),[t,Oe]);var Le=(0,d.useCallback)((function(e){t.update((function(){var t=(0,A.$getSelection)();(0,A.$isRangeSelection)(t)&&(0,I.$patchStyleText)(t,e)}))}),[t]),Ze=(0,d.useMemo)((function(){return(0,N.getCodeLanguages)()}),[]),we=(0,d.useCallback)((function(e){t.update((function(){if(null!==u){var t=(0,A.$getNodeByKey)(u);(0,N.$isCodeNode)(t)&&t.setLanguage(e.target.value)}}))}),[t,u]),Re=(0,d.useCallback)((function(){L?t.dispatchCommand(C.TOGGLE_LINK_COMMAND,null):t.dispatchCommand(C.TOGGLE_LINK_COMMAND,"https://")}),[t,L]),$e=(0,d.useCallback)((function(e){Le({color:e})}),[Le]);return(0,H.jsxs)("div",{className:"toolbar",ref:n,children:[le.has(i)&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("button",{className:"toolbar-item block-controls",onClick:function(){return x(!m)},"aria-label":"Formatting Options",children:[(0,H.jsx)("span",{className:"icon block-type "+i}),(0,H.jsx)("span",{className:"text",children:se[i]}),(0,H.jsx)("i",{className:"chevron-down"})]}),m&&(0,P.createPortal)((0,H.jsx)(xe,{editor:t,blockType:i,toolbarRef:n,setShowBlockOptionsDropDown:x}),document.body),(0,H.jsx)(de,{})]}),"code"===i?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(he,{className:"toolbar-item code-language",onChange:we,options:Ze,value:b}),(0,H.jsx)("i",{className:"chevron-down inside"})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(ge,{disabled:!Me,styleProperty:"font-family",value:Ne,editor:t}),(0,H.jsx)(ge,{disabled:!Me,styleProperty:"font-size",value:ke,editor:t}),(0,H.jsx)(de,{}),(0,H.jsx)("button",{onClick:function(){t.dispatchCommand(A.FORMAT_TEXT_COMMAND,"bold")},className:"toolbar-item spaced "+(D?"active":""),"aria-label":"Format Bold",children:(0,H.jsx)("i",{className:"format bold"})}),(0,H.jsx)("button",{onClick:function(){t.dispatchCommand(A.FORMAT_TEXT_COMMAND,"italic")},className:"toolbar-item spaced "+(q?"active":""),"aria-label":"Format Italics",children:(0,H.jsx)("i",{className:"format italic"})}),(0,H.jsx)("button",{onClick:function(){t.dispatchCommand(A.FORMAT_TEXT_COMMAND,"underline")},className:"toolbar-item spaced "+(J?"active":""),"aria-label":"Format Underline",children:(0,H.jsx)("i",{className:"format underline"})}),(0,H.jsx)("button",{onClick:function(){t.dispatchCommand(A.FORMAT_TEXT_COMMAND,"strikethrough")},className:"toolbar-item spaced "+(ne?"active":""),"aria-label":"Format Strikethrough",children:(0,H.jsx)("i",{className:"format strikethrough"})}),(0,H.jsx)("button",{onClick:function(){t.dispatchCommand(A.FORMAT_TEXT_COMMAND,"code")},className:"toolbar-item spaced "+(ce?"active":""),"aria-label":"Insert Code",children:(0,H.jsx)("i",{className:"format code"})}),(0,H.jsx)("button",{onClick:Re,className:"toolbar-item spaced "+(L?"active":""),"aria-label":"Insert Link",children:(0,H.jsx)("i",{className:"format link"})}),(0,H.jsx)(Q,{disabled:!Me,buttonClassName:"toolbar-item color-picker",buttonAriaLabel:"Formatting text color",buttonIconClassName:"icon font-color",color:Te,onChange:$e,title:"text color"}),L&&(0,P.createPortal)((0,H.jsx)(pe,{editor:t}),document.body),(0,H.jsx)(de,{}),(0,H.jsxs)(U,{disabled:!Me,buttonLabel:"Align",buttonIconClassName:"icon left-align",buttonClassName:"toolbar-item spaced alignment",buttonAriaLabel:"Formatting options for text alignment",children:[(0,H.jsxs)(G,{onClick:function(){t.dispatchCommand(A.FORMAT_ELEMENT_COMMAND,"left")},className:"item",children:[(0,H.jsx)("i",{className:"icon left-align"}),(0,H.jsx)("span",{className:"text",children:"Left Align"})]}),(0,H.jsxs)(G,{onClick:function(){t.dispatchCommand(A.FORMAT_ELEMENT_COMMAND,"center")},className:"item",children:[(0,H.jsx)("i",{className:"icon center-align"}),(0,H.jsx)("span",{className:"text",children:"Center Align"})]}),(0,H.jsxs)(G,{onClick:function(){t.dispatchCommand(A.FORMAT_ELEMENT_COMMAND,"right")},className:"item",children:[(0,H.jsx)("i",{className:"icon right-align"}),(0,H.jsx)("span",{className:"text",children:"Right Align"})]}),(0,H.jsxs)(G,{onClick:function(){t.dispatchCommand(A.FORMAT_ELEMENT_COMMAND,"justify")},className:"item",children:[(0,H.jsx)("i",{className:"icon justify-align"}),(0,H.jsx)("span",{className:"text",children:"Justify Align"})]}),(0,H.jsx)(de,{}),(0,H.jsxs)(G,{onClick:function(){t.dispatchCommand(A.OUTDENT_CONTENT_COMMAND,void 0)},className:"item",children:[(0,H.jsx)("i",{className:"icon "+(T?"indent":"outdent")}),(0,H.jsx)("span",{className:"text",children:"Outdent"})]}),(0,H.jsxs)(G,{onClick:function(){t.dispatchCommand(A.INDENT_CONTENT_COMMAND,void 0)},className:"item",children:[(0,H.jsx)("i",{className:"icon "+(T?"outdent":"indent")}),(0,H.jsx)("span",{className:"text",children:"Indent"})]})]})]})]})}var Ne={ltr:"ltr",rtl:"rtl",placeholder:"editor-placeholder",paragraph:"editor-paragraph",quote:"editor-quote",heading:{h1:"editor-heading-h1",h2:"editor-heading-h2",h3:"editor-heading-h3",h4:"editor-heading-h4",h5:"editor-heading-h5"},list:{nested:{listitem:"editor-nested-listitem"},ol:"editor-list-ol",ul:"editor-list-ul",listitem:"editor-listitem"},image:"editor-image",link:"editor-link",text:{bold:"editor-text-bold",italic:"editor-text-italic",overflowed:"editor-text-overflowed",hashtag:"editor-text-hashtag",underline:"editor-text-underline",strikethrough:"editor-text-strikethrough",underlineStrikethrough:"editor-text-underlineStrikethrough",code:"editor-text-code"},code:"editor-code",codeHighlight:{atrule:"editor-tokenAttr",attr:"editor-tokenAttr",boolean:"editor-tokenProperty",builtin:"editor-tokenSelector",cdata:"editor-tokenComment",char:"editor-tokenSelector",class:"editor-tokenFunction","class-name":"editor-tokenFunction",comment:"editor-tokenComment",constant:"editor-tokenProperty",deleted:"editor-tokenProperty",doctype:"editor-tokenComment",entity:"editor-tokenOperator",function:"editor-tokenFunction",important:"editor-tokenVariable",inserted:"editor-tokenSelector",keyword:"editor-tokenAttr",namespace:"editor-tokenVariable",number:"editor-tokenProperty",operator:"editor-tokenOperator",prolog:"editor-tokenComment",property:"editor-tokenProperty",punctuation:"editor-tokenPunctuation",regex:"editor-tokenVariable",selector:"editor-tokenSelector",string:"editor-tokenSelector",symbol:"editor-tokenProperty",tag:"editor-tokenProperty",url:"editor-tokenOperator",variable:"editor-tokenVariable"}},be=(0,A.createCommand)(),Ce=function(e){var t=e.getAttribute("data-lexical-template-variable-text"),n=e.getAttribute("data-lexical-template-variable-data");return t?{node:ke(t,n)}:null},je=function(e){(0,m.Z)(n,e);var t=(0,x.Z)(n);function n(e,a,o,r){var i;return(0,p.Z)(this,n),(i=t.call(this,o,r)).__text="",i.__data={},i.__text=e,i.__data=a,i}return(0,h.Z)(n,[{key:"exportJSON",value:function(){return(0,f.Z)((0,f.Z)({},(0,g.Z)((0,v.Z)(n.prototype),"exportJSON",this).call(this)),{},{text:this.getText(),data:this.getData()})}},{key:"createDOM",value:function(e,t){var n=document.createElement("div");return n.setAttribute("style","display: inline-block;"),n.setAttribute("data-lexical-template-variable-text",this.__text),n.setAttribute("data-lexical-template-variable-data",this.__data),n}},{key:"updateDOM",value:function(e,t,n){}},{key:"exportDOM",value:function(){var e=document.createElement("div");e.setAttribute("data-lexical-template-variable-text",this.__text),e.setAttribute("data-lexical-template-variable-data",this.__data);var t=document.createTextNode(this.getTextContent());return e.append(t),{element:e}}},{key:"getText",value:function(){return this.__text}},{key:"getData",value:function(){return this.__data}},{key:"getTextContent",value:function(e,t){return this.__text}},{key:"decorate",value:function(e,t){return(0,H.jsx)($.Z,{label:this.__data,size:"small"})}},{key:"isInline",value:function(){return!0}}],[{key:"getType",value:function(){return"template-variable"}},{key:"clone",value:function(e){return new n(e.__text,e.__data,e.__key)}},{key:"importJSON",value:function(e){return ke(e.text,e.data)}},{key:"importDOM",value:function(){return{div:function(e){return e.hasAttribute("data-lexical-template-variable-text")?{conversion:Ce,priority:2}:null}}}}]),n}(A.DecoratorNode);function ke(e){return new je(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function ye(e){var t=e.templateVariables,n=e.text,a=e.setText,r=e.richText,i=function(e,t,n){for(var a=0,r=Object.entries(e);a<r.length;a++){var i=(0,o.Z)(r[a],2),l=i[0],s=i[1];if(t.startsWith(l,n))return[l,s]}return null},l=(0,y.useLexicalComposerContext)(),s=(0,o.Z)(l,1)[0];return(0,d.useEffect)((function(){if(s&&!s.hasNodes([je]))throw new Error("TemplateVariableNode not registered!");var e=s.registerUpdateListener((function(e){var t=e.editorState;a&&t.read((function(){if(r)a((0,b.$generateHtmlFromNodes)(s));else{var e=(0,A.$getRoot)().getTextContent();a(e)}}))}));if(s.registerCommand(be,(function(e){return e&&s.update((function(){var t=ke(e,e);(0,A.$insertNodes)([t,(0,A.$createTextNode)(" ")])})),!0}),A.COMMAND_PRIORITY_EDITOR),e)return e}),[s,n,a,r]),(0,d.useEffect)((function(){s&&s.getEditorState().read((function(){var e=(0,A.$getRoot)();""===e.getTextContent()&&s.update((function(){if(!e.isDirty()&&""!==n)if(!r||n&&!n.startsWith("<")){var t=(0,A.$createParagraphNode)(),a=(0,A.$createTextNode)(n);t.append(a),e.getFirstChild().replace(t)}else{var o=(new DOMParser).parseFromString(n,"text/html"),i=(0,b.$generateNodesFromDOM)(s,o);(0,A.$insertNodes)(i)}}))}))}),[n,s,r]),(0,d.useEffect)((function(){s&&""!==n&&Object.keys(t).length>0&&!r&&s.getEditorState().read((function(){setTimeout((function(){s.update((function(){var e,a=(0,A.$getRoot)();if(!a.isDirty()){for(var o=(0,A.$createParagraphNode)(),r=[],l=n,s=0;s<(null===(c=l)||void 0===c?void 0:c.length);){var c,u=i(t,l,s);u?(s>0&&(r.push((0,A.$createTextNode)(l.slice(0,s))),l=l.slice(s),s=0),r.push(ke(u[0],u[1])),l=l.slice(u[0].length)):s++}(null===(e=l)||void 0===e?void 0:e.length)>0&&r.push((0,A.$createTextNode)(l)),o.append.apply(o,r),a.getFirstChild().replace(o),o.select()}}))}),0)}))}),[t,n,s,r]),null}function Ee(e){var t=e.editorRef,n=(0,y.useLexicalComposerContext)(),a=(0,o.Z)(n,1)[0];return(0,d.useLayoutEffect)((function(){return t.current=a,function(){t.current=null}}),[a,t]),null}function Se(e){console.error(e)}var Te=(0,d.forwardRef)((function(e,t){var n={namespace:"MyEditor",nodes:[je,w.HeadingNode,j.ListNode,j.ListItemNode,w.QuoteNode,N.CodeNode,N.CodeHighlightNode,R.TableNode,R.TableCellNode,R.TableRowNode,C.AutoLinkNode,C.LinkNode],theme:Ne,onError:Se};return(0,H.jsx)(k.LexicalComposer,{initialConfig:n,editorRef:t,children:(0,H.jsxs)("div",{className:"editor-container",children:[e.richText&&(0,H.jsx)(ve,{}),e.richText&&(0,H.jsx)(Z.RichTextPlugin,{contentEditable:(0,H.jsx)(E.ContentEditable,{style:{border:"solid 1px rgb(204, 204, 204)",padding:"20px 15px",borderRadius:5}}),placeholder:!e.richText&&(0,H.jsx)("div",{className:"editor-placeholder",children:e.placeholder}),ErrorBoundary:T()}),!e.richText&&(0,H.jsx)(L.PlainTextPlugin,{contentEditable:(0,H.jsx)(E.ContentEditable,{style:{border:"solid 1px rgb(204, 204, 204)",padding:"20px 15px",borderRadius:5}}),placeholder:!e.richText&&(0,H.jsx)("div",{className:"editor-placeholder",children:e.placeholder}),ErrorBoundary:T()}),(0,H.jsx)("div",{className:"editor-label",children:e.label}),(0,H.jsx)(_.HistoryPlugin,{}),e.templateVariables&&(0,H.jsx)(ye,{templateVariables:e.templateVariables,text:e.text,setText:e.setText,richText:e.richText||!1}),t&&(0,H.jsx)(Ee,{editorRef:t}),(0,H.jsx)(O.ListPlugin,{}),(0,H.jsx)(M.LinkPlugin,{})]})})})),_e=function(e){var t=e.name;e.apiBackend;return(0,H.jsx)(l.Z,{children:(0,H.jsx)(s.Z,{children:t})})},Me=function e(t,n,r,i){if(!t||!t.properties)return[null,[]];var l=t.properties,s=t.definitions,u=[];return[Object.keys(l).map((function(t){var d=n?"".concat(n,".").concat(t):t,f=l[t],p=f.type,h=f.description,m=f.title,x=f.items,g=f.widget,v=f.$ref;if("object"===p){var N=e(l[t],d,r,"".concat(i," / ").concat(t)),b=(0,o.Z)(N,2),C=b[0],j=b[1];return u.push.apply(u,(0,a.Z)(j)),(0,H.jsx)(c.k,{nodeId:d,label:m||t,children:C},d)}if("array"===p){if(x&&"object"===x.type){var k=e(x,"".concat(d,"[0]"),r,"".concat(i," / ").concat(d,"[0]")),y=(0,o.Z)(k,2),E=y[0],S=y[1];return u.push.apply(u,(0,a.Z)(S)),(0,H.jsx)(c.k,{nodeId:d,label:h||t,children:E},d)}if(x&&"array"===x.type){var T="object"===typeof x?e(x,"".concat(d,"[0]"),r,"".concat(i," ").concat(t)):x.map((function(n,l){var s=e(n,"".concat(d,"[0]"),r,"".concat(i," ").concat(t)),f=(0,o.Z)(s,2),p=f[0],h=f[1];return u.push.apply(u,(0,a.Z)(h)),(0,H.jsx)(c.k,{nodeId:"".concat(d,".").concat(l),label:"".concat(t," ").concat(l+1),children:p},"".concat(d,"[0]"))})),_=(0,o.Z)(T,1)[0];return u.push({key:"".concat(d,"[0]"),pillPrefix:"".concat(i," / ").concat(t,"[0]")}),(0,H.jsx)(c.k,{nodeId:d,label:h||t,children:_},"".concat(d))}if(x&&x.$ref&&Object.keys(s).find((function(e){return"#/definitions/".concat(e)===x.$ref}))){var M=e(s[x.$ref.split("/").pop()],"".concat(d,"[0]"),r,"".concat(i).concat(t,"[0] /")),O=(0,o.Z)(M,2),L=O[0],Z=O[1];return u.push.apply(u,(0,a.Z)(Z)),(0,H.jsx)(c.k,{nodeId:d,label:h||t,children:L},d)}if(x)return u.push({key:"".concat(d,"[0]"),pillPrefix:"".concat(i," ").concat(t)}),(0,H.jsx)(c.k,{nodeId:d,label:(0,H.jsxs)("span",{children:[t," ",(0,H.jsxs)("span",{style:{color:"#999"},children:[" - ",h]})]}),onClick:function(e){return r(e,"".concat(d,"[0]"),g)}},"".concat(d,"[0]"))}if(s&&v&&Object.keys(s).find((function(e){return"#/definitions/".concat(e)===v}))){var w=e(s[v.split("/").pop()],"".concat(d),r,"".concat(i).concat(t," /")),R=(0,o.Z)(w,2),$=R[0],A=R[1];return u.push.apply(u,(0,a.Z)(A)),(0,H.jsx)(c.k,{nodeId:d,label:h||t,children:$},d)}return u.push({key:d,pillPrefix:"".concat(i," ").concat(t)}),(0,H.jsx)(c.k,{nodeId:d,label:(0,H.jsxs)("span",{children:[t," ",(0,H.jsxs)("span",{style:{color:"#999"},children:[" - ",h]})]}),onClick:function(e){return r(e,d,g)}},d)})),u]};function Oe(e){var t,n=e.value,f=e.onChange,p=(0,d.useState)(!1),h=(0,o.Z)(p,2),m=h[0],x=h[1],g=(0,d.useState)(!1),v=(0,o.Z)(g,2),N=v[0],b=v[1],C=(0,d.useState)(!1),j=(0,o.Z)(C,2),k=j[0],y=j[1],E=(0,d.useState)(n||""),S=(0,o.Z)(E,2),T=S[0],_=S[1],M=e.schemas;(0,d.useEffect)((function(){N||k?x(!0):(x(!1),f&&T!==n&&f(T))}),[N,k,T,n,f]);var O=(0,d.useState)([]),L=(0,o.Z)(O,2),Z=L[0],w=L[1],R=(0,d.useState)([]),$=(0,o.Z)(R,2),A=$[0],D=$[1],I=(0,d.useRef)(null);(0,d.useEffect)((function(){if(M&&M.length>0){var e=M.map((function(e,t){return Me(e.items,e.id,(function(e,t,n){var a="{{".concat(t,"}}");"output_image"===n?a="![Image]({{".concat(t,"}})"):"output_audio"===n&&(a="![Audio]({{".concat(t,"}})")),I.current.dispatchCommand(be,a)}),e.pillPrefix)})).reduce((function(e,t){var n;return e[0].push(t[0]),(n=e[1]).push.apply(n,(0,a.Z)(t[1])),e}),[[],[]]),t=(0,o.Z)(e,2),n=t[0],r=t[1].reduce((function(e,t){return e["{{".concat(t.key,"}}")]=t.pillPrefix,e}),{});w(n),D(r)}}),[M,I,w,D]);var F=n;return(0,H.jsxs)(l.Z,{children:[(0,H.jsx)(l.Z,{onKeyDown:function(e){b(!0)},onMouseDown:function(e){b(!0)},onBlur:function(){b(!1)},sx:{marginBottom:"-20px"},children:(0,H.jsx)(Te,{templateVariables:A,ref:I,text:F,setText:_,placeholder:(null===e||void 0===e?void 0:e.placeholder)||(null===e||void 0===e||null===(t=e.schema)||void 0===t?void 0:t.description),label:null===e||void 0===e?void 0:e.label,richText:null===e||void 0===e?void 0:e.richText})}),(0,H.jsx)("div",{onMouseEnter:function(){y(!0)},onMouseLeave:function(){y(!1),b(!1)},children:m&&Z.length>0&&(0,H.jsxs)(l.Z,{style:{marginTop:30,marginBottom:10,backgroundColor:"#fffeeb",borderRadius:5,border:"1px solid #eee",padding:5},children:[(0,H.jsx)(s.Z,{variant:"h6",style:{fontWeight:600,color:"#666"},children:"Template Variables"}),(0,H.jsx)(s.Z,{variant:"body2",style:{marginBottom:10},children:"Below are the available variables across your input and processors. Click on a variable to insert it into the text field and use it during processing."}),Z.map((function(e,t,n){return n[n.length-1-t]})).map((function(e,t){return(0,H.jsx)(u.L,{defaultCollapseIcon:(0,H.jsx)(i.Z,{}),defaultExpandIcon:(0,H.jsx)(r.Z,{}),children:(0,H.jsx)(c.k,{nodeId:t.toString(),label:(0,H.jsx)(_e,{name:M[M.length-1-t].label}),children:e})},t)}))]})})]})}},40383:function(){}}]);