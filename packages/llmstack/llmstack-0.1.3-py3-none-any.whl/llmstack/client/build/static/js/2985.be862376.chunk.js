"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[2985],{18763:function(e,n,i){i.r(n),i.d(n,{default:function(){return W}});var r=i(29439),o=i(7276),t=i(10981),a=i(66161),s=i(85535),l=i(44570),d=i(31342),p=i(73462),c=i(29166),u=i(14354),h=i(51073),x=i(91761),m=i(77801),f=i(9229),g=i(25926),v=i(81792),y=i(93433),j=i(95173),b=i(83329),Z=i(54560),w=i(969),k=i(46650),S=i(44390),C=i(20495),z=i(7458),F=i(62263),P=i(98125),I=i(55241),A=i(34160),B=i(63130),R=i(63716),T=i(83960),E=i(84817),M=i(45263);function _(e){var n=e.open,i=e.onClose,t=e.appTypeSlug,p=e.appStoreUuid,c=(0,f.sJ)(g.qY),u=(0,f.sJ)(g.nC),h=(0,f.sJ)(g.Rd),x=(0,o.useState)(""),m=(0,r.Z)(x,2),_=m[0],q=m[1],H=(0,j.s0)(),W=(0,o.useState)(null),L=(0,r.Z)(W,2),J=L[0],O=L[1],U=(0,o.useState)(!1),D=(0,r.Z)(U,2),N=D[0],Y=D[1],V=(0,o.useState)(!1),G=(0,r.Z)(V,2),K=G[0],Q=G[1],X=(0,o.useState)(!1),$=(0,r.Z)(X,2),ee=$[0],ne=$[1],ie=function(e){return e?"".concat(window.location.protocol,"//").concat(window.location.host,"/s/").concat(e):window.location.href},re=function(e){e.stopPropagation(),i()};return(0,M.jsxs)(Z.Z,{title:"Share",open:n,onClose:re,fullWidth:!0,onClick:function(e){return e.stopPropagation()},maxWidth:"xs",children:[(0,M.jsx)(w.Z,{id:"app-share-modal",children:"Share"}),(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(s.Z,{variant:"body1",children:null!==c&&void 0!==c&&c.sessionId&&!_?"Share the output from this app run by clicking on the create link button to generate a shareable url.":!_&&"Share this app using the link below or by clicking on the social media buttons."}),_&&(0,M.jsx)(a.Z,{sx:{marginTop:2,marginBottom:4},children:(0,M.jsx)(s.Z,{variant:"body1",children:"Share this app session using the link below or use the buttons to share on social media."})}),(null===c||void 0===c?void 0:c.sessionId)&&(0,M.jsx)(a.Z,{sx:{maxHeight:"300px",overflow:"auto",border:"solid 1px",borderColor:"gray.main",marginTop:2,borderRadius:2,padding:2},children:"web"===t?(0,M.jsx)(v.PromptlyAppWorkflowOutput,{showHeader:!1}):(0,M.jsx)(v.PromptlyAppChatOutput,{})}),(_||!_&&!c.sessionId)&&(0,M.jsxs)(a.Z,{sx:{paddingTop:4,display:"inline-table"},children:[(0,M.jsx)(S.Z,{label:"Share URL",value:ie(_),fullWidth:!0,variant:"outlined",size:"medium",InputProps:{readOnly:!0,endAdornment:(0,M.jsx)(l.Z,{onClick:function(e){navigator.clipboard.writeText(ie(_)),(0,T.yv)("Share code copied successfully",{variant:"success"})},children:(0,M.jsx)(C.Z,{title:"Copy Share URL",children:(0,M.jsx)(B.Z,{fontSize:"small"})})})}}),(0,M.jsx)(s.Z,{variant:"caption",children:"Share the link with others to view the output from this app run"}),(0,M.jsxs)(z.Z,{direction:"row",gap:2,sx:{paddingTop:2},children:[(0,M.jsx)(b.Dk,{url:ie(_),children:(0,M.jsx)(b.Vq,{size:30,round:!0})}),(0,M.jsx)(b.Zh,{url:ie(_),children:(0,M.jsx)(b.v2,{size:30,round:!0})}),(0,M.jsx)(b.r2,{url:ie(_),children:(0,M.jsx)(b.pA,{size:30,round:!0})}),(0,M.jsx)(b.MC,{url:ie(_),children:(0,M.jsx)(b.cH,{size:30,round:!0})}),(0,M.jsx)(b.tq,{url:ie(_),children:(0,M.jsx)(b.YG,{size:30,round:!0})}),(0,M.jsx)(b.N0,{url:ie(_),children:(0,M.jsx)(b.ud,{size:30,round:!0})}),(0,M.jsx)(b.B,{url:ie(_),title:"Check this app on Promptly!\n\n",via:"TryPromptly",children:(0,M.jsx)(b.b0,{size:30,round:!0})})]})]}),!_&&(null===c||void 0===c?void 0:c.sessionId)&&(0,M.jsx)(a.Z,{sx:{paddingTop:4},children:(0,M.jsx)(F.Z,{children:(0,M.jsx)(C.Z,{title:"When checked, the output will be rendered as a web page irrespective of the app's layout",children:(0,M.jsx)(P.Z,{control:(0,M.jsx)(I.Z,{checked:ee,size:"small"}),label:"Render the output as a web page",onChange:function(e){return ne(e.target.checked)}})})})})]}),(0,M.jsxs)(A.Z,{children:[(0,M.jsx)(d.Z,{onClick:re,children:"Cancel"},"cancel"),!_&&(0,M.jsx)(R.Z,{variant:"contained",type:"primary",onClick:function(e){null!==c&&void 0!==c&&c.sessionId?function(e,n,i,r){if(e.stopPropagation(),i&&n){if(_)return navigator.clipboard.writeText(ie(_)),void(0,T.yv)("Link copied to clipboard",{variant:"success"});Q(!0);var o=(null===c||void 0===c?void 0:c.messages)||[],t=(0,y.Z)(new Set(o.map((function(e){return e.requestId})).filter((function(e){return e})))),a={session_id:n,app_store_uuid:p,run_entry_request_uuids:t,render_as_web_page:r};(0,E.o)().post("/api/apps/share/",a).then((function(e){navigator.clipboard.writeText(ie(e.data.code)),q(e.data.code),(0,T.yv)("Link copied to clipboard",{variant:"success"})})).catch((function(e){console.error("Error sharing app run",e),(0,T.yv)("Error sharing app run",{variant:"error"})})).finally((function(){Q(!1)}))}else{var s="/"===window.location.path?window.location.href+"a/super-agent":window.location.href;navigator.clipboard.writeText(s),(0,T.yv)("Link copied to clipboard",{variant:"success"})}}(e,null===c||void 0===c?void 0:c.sessionId,u,ee):re(e)},loading:K,disabled:null===c||void 0===c?void 0:c.isRunning,children:null!==c&&void 0!==c&&c.sessionId?"Create Link":"Done"},"submit"),_&&!(null!==h&&void 0!==h&&h.username)&&(0,M.jsx)(R.Z,{variant:"contained",type:"primary",onClick:function(e){return H("/s/".concat(_))},loading:K,disabled:null===c||void 0===c?void 0:c.isRunning,children:"View Session"},"submit"),_&&(null===h||void 0===h?void 0:h.username)&&(0,M.jsx)(R.Z,{variant:"contained",type:"primary",onClick:function(e){J?H("/u/".concat(h.username,"/").concat(J)):null!==c&&void 0!==c&&c.sessionId?function(e,n,i){e.stopPropagation(),i&&n&&h&&h.username?(Y(!0),(0,E.o)().post("/api/profiles/".concat(h.username,"/posts"),{share_code:_}).then((function(e){var n,i;O(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.share)||void 0===i?void 0:i.slug),(0,T.yv)("App run pinned to profile",{variant:"success"})})).catch((function(e){console.error("Error pinning app run",e),(0,T.yv)("Error pinning app run",{variant:"error"})})).finally((function(){Y(!1)}))):(0,T.yv)("You must be logged in and have your username set to pin an app run",{variant:"error"})}(e,null===c||void 0===c?void 0:c.sessionId,u):re(e)},loading:N,disabled:(null===c||void 0===c?void 0:c.isRunning)||N,children:J?"View on Profile":null!==c&&void 0!==c&&c.sessionId?"Pin to Profile":"Done"},"pin")]})]})}var q=(0,m.ZP)("img")({width:80,height:80,margin:0,borderRadius:8}),H=(0,m.ZP)("img")({width:35,height:35,margin:0,borderRadius:4});var W=function(e){var n=e.name,i=e.icon,m=e.username,y=e.description,j=e.categories,b=e.appStoreUuid,Z=e.appTypeSlug,w=e.shareHeader,k=void 0!==w&&w,S=(0,f.sJ)(g.lo),C=(0,o.useState)(!k&&!S),z=(0,r.Z)(C,2),F=z[0],P=z[1],I=(0,o.useState)(!1),A=(0,r.Z)(I,2),B=A[0],R=A[1],T=(0,f.sJ)(g.N0),E=(0,o.useCallback)((function(e){return T.find((function(n){return n.slug===e}))}),[T]);return(0,M.jsxs)(t.Z,{sx:{backgroundColor:"#F3F5F8",cursor:"pointer",boxShadow:"none",display:"flex",flexDirection:"column",border:"1px solid #E8EBEE",borderRadius:"8px 8px 0 0",p:F?6:4,gap:4,height:F?"auto":S?"40px":"72px"},onClick:function(){return P(!F)},children:[(0,M.jsx)(_,{open:B,onClose:function(){return R(!1)},appTypeSlug:Z,appStoreUuid:b}),(0,M.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",textAlign:"left",width:"100%"},children:[!F&&(0,M.jsxs)(a.Z,{sx:{display:"flex",width:"100%",gap:4,alignItems:"center"},children:[(0,M.jsx)(H,{src:i,alt:n}),(0,M.jsx)(a.Z,{sx:{alignSelf:"center",width:"100%"},children:(0,M.jsxs)(a.Z,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[(0,M.jsx)(s.Z,{component:"h1",color:"#183A58",sx:{fontSize:"20px",lineHeight:"24px",fontWeight:600},children:n}),k&&(F?(0,M.jsx)(u.Z,{}):(0,M.jsx)(h.Z,{})),!k&&(0,M.jsx)(l.Z,{sx:{color:"#FFF",ml:"auto",mr:S?"-4px":"0px",backgroundColor:"primary.main",":hover":{backgroundColor:"primary.dark"},borderRadius:"8px"},onClose:function(){return R(!0)},onClick:function(e){e.stopPropagation(),R(!0)},children:(0,M.jsx)(x.Z,{fontSize:"small",variant:"contained"})})]})})]}),F&&(0,M.jsxs)(a.Z,{sx:{display:"flex",width:"100%",gap:4,alignItems:"center"},children:[(0,M.jsx)(q,{src:i,alt:n}),(0,M.jsxs)(a.Z,{sx:{width:"100%"},children:[(0,M.jsxs)(a.Z,{sx:{width:"100%",display:"flex",alignItems:"center"},children:[(0,M.jsx)(s.Z,{component:"h1",sx:{fontSize:"20px",lineHeight:"24px",fontWeight:600},children:n}),k&&(F?(0,M.jsx)(u.Z,{}):(0,M.jsx)(h.Z,{})),!k&&(S?(0,M.jsx)(l.Z,{sx:{color:"#FFF",ml:"auto",mr:"-4px",backgroundColor:"primary.main",":hover":{backgroundColor:"primary.dark"},borderRadius:"8px"},onClose:function(){return R(!0)},onClick:function(e){e.stopPropagation(),R(!0)},children:(0,M.jsx)(x.Z,{fontSize:"small",variant:"contained"})}):(0,M.jsx)(d.Z,{variant:"contained",sx:{ml:"auto",mr:"-4px",color:"#FFF"},startIcon:(0,M.jsx)(x.Z,{fontSize:"small"}),onClick:function(e){e.stopPropagation(),R(!0)},children:"Share"}))]}),(0,M.jsx)("span",{style:{color:"gray"},children:"by\xa0"}),(0,M.jsx)(s.Z,{color:"corral.main",sx:{display:"inline"},children:m}),(0,M.jsx)(a.Z,{sx:{mt:1,mb:1,ml:-.4},children:j&&j.map((function(e){var n;return(0,M.jsx)(p.Z,{label:(null===(n=E(e))||void 0===n?void 0:n.name)||e,size:"small",sx:{borderRadius:2,padding:"4px, 8px, 4px, 8px",backgroundColor:"#FFF",border:1,color:"#183A58",borderColor:"gray.main"}},e)}))})]})]})]}),(0,M.jsx)(a.Z,{sx:{textAlign:"left",lineHeight:"1.6",color:"#183a58","& p":{mt:0,ml:0,marginBlockEnd:0}},children:(0,M.jsx)(c.Z,{in:F,timeout:"auto",unmountOnExit:!0,children:(0,M.jsx)(v.default,{children:y})})})]})}},30494:function(e,n,i){i.d(n,{PM:function(){return s},_C:function(){return l},zN:function(){return t}});var r=i(29439),o=i(1413);function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";var i=n<0?0:n,r=Math.floor(Math.log(e)/Math.log(1e3));return"".concat(parseFloat((e/Math.pow(1e3,r)).toFixed(i))," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][r])}function a(e,n){return e+n}function s(e,n){if(!e)return n;if(!n)return e;for(var i=(0,o.Z)({},e),t=0,l=Object.entries(n);t<l.length;t++){var d=(0,r.Z)(l[t],2),p=d[0],c=d[1];if(i[p])if(Array.isArray(c))if(Array.isArray(i[p]))for(var u=0;u<c.length;u++)if(u<i[p].length){if("string"===typeof c[u]){i[p][u]=a(i[p][u],c[u]);continue}if("number"===typeof c[u]){i[p][u]=c[u];continue}i[p][u]=s(i[p][u],c[u])}else i[p].push(c[u]);else i[p]=i[p]+c;else i[p]="object"===typeof c?s(i[p],c):"string"===typeof c?a(i[p],c):"number"===typeof c?c:i[p]+c;else i[p]=c}return i}function l(e){var n={type:"object",properties:{}},i={},r=[],o=[];return e&&e.forEach((function(e){var t,a;(r.push(e.name),e.required&&o.push(e.name),n.properties[e.name]={type:"text"===e.type||"voice"===e.type||"file"===e.type||"datasource"===e.type||"connection"===e.type||"select"===e.type?"string":e.type,title:e.title,description:e.description},e.default&&(n.properties[e.name].default=e.default),"text"===e.type&&(i[e.name]={"ui:widget":"textarea"}),"boolean"===e.type&&(i[e.name]={"ui:widget":"radio"}),"file"===e.type&&(i[e.name]={"ui:widget":"file"},n.properties[e.name].format="data-url",n.properties[e.name].pattern="data:(.*);name=(.*);base64,(.*)",n.properties[e.name].accepts=e.accept||"*",n.properties[e.name].maxSize=e.maxSize||2e6),"voice"===e.type&&(i[e.name]={"ui:widget":"voice"},e.stream||(n.properties[e.name].format="data-url",n.properties[e.name].pattern="data:(.*);name=(.*);base64,(.*)"),n.properties[e.name].stream=e.stream||!1),"select"===e.type)&&(i[e.name]={"ui:widget":"select"},n.properties[e.name].enum=null===(t=e.options)||void 0===t?void 0:t.map((function(e){return e.value})),n.properties[e.name].enumNames=null===(a=e.options)||void 0===a?void 0:a.map((function(e){return e.label})),e["ui:options"]&&i[e.name]&&(i[e.name]["ui:options"]=e["ui:options"]));"multi"===e.type&&(i[e.name]={"ui:field":"multi"},n.properties[e.name].type="object",n.properties[e.name].placeholder=e.placeholder||e.description||"",n.properties[e.name].allowFiles=e.allowFiles||!1,n.properties[e.name].filesMultiple=e.filesMultiple||!1,n.properties[e.name].filesAccept=e.filesAccept||"audio/*, video/*, image/*, text/csv, application/pdf",n.properties[e.name].filesMaxSize=e.filesMaxSize||2e6),"datasource"===e.type&&(i[e.name]={"ui:widget":"datasource"}),"connection"===e.type&&(i[e.name]={"ui:widget":"connection"})})),i["ui:order"]=r,i["ui:required"]=o,{schema:n,uiSchema:i}}}}]);