"use strict";(self.webpackChunkpromptmanager=self.webpackChunkpromptmanager||[]).push([[6014],{93653:function(e,n,t){t.d(n,{r:function(){return d}});var o,i=t(7276),l=["title","titleId"];function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},r.apply(this,arguments)}function a(e,n){if(null==e)return{};var t,o,i=function(e,n){if(null==e)return{};var t,o,i={},l=Object.keys(e);for(o=0;o<l.length;o++)t=l[o],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)t=l[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function s(e,n){var t=e.title,s=e.titleId,d=a(e,l);return i.createElement("svg",r({width:16,height:15,viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":s},d),t?i.createElement("title",{id:s},t):null,o||(o=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.90237 0C3.63406 0 0.169922 3.44867 0.169922 7.68606C0.169922 11.0883 2.3814 13.9648 5.45892 14.9855C5.84554 15.0628 5.98473 14.8154 5.98473 14.6143C5.98473 14.4288 5.98473 13.9493 5.96926 13.2998C3.81964 13.7638 3.37116 12.2637 3.37116 12.2637C3.01546 11.3822 2.50512 11.1347 2.50512 11.1347C1.8092 10.6553 2.55152 10.6708 2.55152 10.6708C3.32476 10.7326 3.74231 11.4595 3.74231 11.4595C4.43824 12.6348 5.55171 12.2946 6.00019 12.0936C6.07752 11.5987 6.26309 11.2584 6.49507 11.0729C4.77846 10.8718 2.96907 10.2223 2.96907 7.2685C2.96907 6.4334 3.2629 5.73748 3.75778 5.21167C3.68045 5.01063 3.41755 4.23738 3.8351 3.17031C3.8351 3.17031 4.48463 2.96926 5.9538 3.95902C6.57239 3.7889 7.23738 3.69611 7.88691 3.69611C8.53644 3.69611 9.20143 3.7889 9.82002 3.95902C11.2892 2.96926 11.9387 3.17031 11.9387 3.17031C12.3563 4.22192 12.0934 5.01063 12.016 5.21167C12.5109 5.75294 12.8047 6.4334 12.8047 7.2685C12.8047 10.2223 10.9954 10.8718 9.27875 11.0574C9.55712 11.2894 9.80456 11.7688 9.80456 12.4802C9.80456 13.5009 9.78909 14.336 9.78909 14.5834C9.78909 14.7844 9.92828 15.0319 10.3149 14.9546C13.4233 13.9648 15.6348 11.0883 15.6348 7.68606C15.6348 3.44867 12.1707 0 7.90237 0Z",fill:"#383838"})))}var d=i.forwardRef(s);t.p},55287:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var o=t(29439),i=t(79921),l=t(7276),r=t(95173),a=t(9229),s=t(84817),d=t(98085),c=t(1413),u=t(82048),p=t(18221),h=t(5055),v=t(66161),g=t(94053),f=t(85535),x=t(31342),_=t(7458),b=t(5372),w=t(47941),m=t(63060),C=t(21969),E=t(93653),S=t(83329),y=t.p+"static/media/logo.7cb324bbc334fed00dbf.png",T=t(45263),j=(0,l.lazy)((function(){return Promise.all([t.e(3825),t.e(9336),t.e(982)]).then(t.bind(t,93411))})),A={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GA_MEASUREMENT_ID:"G-XZ40100Y5C"}.REACT_APP_SITE_NAME||"LLMStack",O=function(e){var n=e.appName,t=e.appLogo,o=e.appIsShareable;return(0,T.jsx)(u.Z,{position:"static",sx:{backgroundColor:"#fff",color:"#000"},children:(0,T.jsx)(p.Z,{maxWidth:"xl",children:(0,T.jsxs)(h.Z,{disableGutters:!0,sx:{width:"100%",margin:"0 auto"},children:[(0,T.jsx)("a",{href:t?"/":"https://trypromptly.com",target:"_blank",rel:"noreferrer",children:(0,T.jsx)("img",{src:t||y,alt:"Promptly",style:{height:30}})}),(0,T.jsx)(v.Z,{sx:{flexGrow:1}}),"LLMStack"===A&&(0,T.jsx)(g.Z,{component:E.r,sx:{width:"54px",height:"54px"},viewBox:"-10 -4 28 26",onClick:function(){window.location.href="https://github.com/trypromptly/llmstack"}}),o&&(0,T.jsx)(S.B,{url:window.location.href,title:"Check out ".concat(n," on Promptly!\n\n"),via:"TryPromptly",hashtags:["NoCodeAI"],children:(0,T.jsx)(S.Zm,{size:30,round:!0})})]})})})},P=function(e){var n=e.error,t=e.isLoggedIn;return(0,T.jsxs)(v.Z,{style:{justifyContent:"center",paddingTop:50,display:"flex",flexDirection:"column",textAlign:"center",maxWidth:600,margin:"0 auto",gap:10},children:[(0,T.jsx)(f.Z,{variant:"body2",children:n}),(0,T.jsx)(x.Z,{variant:"contained",sx:{textTransform:"none",margin:"auto"},onClick:function(){window.location.href=t?"/hub":"/login?redirectUrl=".concat(window.location.pathname)},children:t?"Go To Hub":"Login"})]})},Z=function(){return(0,T.jsx)(v.Z,{sx:{justifyContent:"center",textAlign:"center",bottom:"0px",margin:"0 auto",marginTop:"0 !important",padding:"5px"},children:(0,T.jsxs)(f.Z,{sx:{textAlign:"center"},variant:"caption",children:["Powered by"," ",(0,T.jsx)("a",{href:"https://trypromptly.com",target:"_blank",rel:"noreferrer",children:"Promptly"})]})})},M=function(e){var n=e.ws,t=e.app,o=e.error,i=e.isLoggedIn,l=e.isMobile;return(0,T.jsxs)(_.Z,{container:!0,spacing:2,height:"100vh",children:[(0,T.jsx)(O,{appName:t.name,appLogo:t.logo,appIsShareable:t.is_shareable}),(0,T.jsx)(v.Z,{children:(0,T.jsx)("p",{})}),o&&(0,T.jsx)(P,{error:o,isLoggedIn:i}),(0,T.jsx)(v.Z,{sx:{height:"100%"},children:(0,T.jsx)(j,{app:t,isMobile:l,ws:n})}),(t.has_footer||!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GA_MEASUREMENT_ID:"G-XZ40100Y5C"}.REACT_APP_ENABLE_SUBSCRIPTION_MANAGEMENT)&&(0,T.jsx)(Z,{})]})},R=function(e){var n=e.ws,t=e.app,o=e.error,i=e.isLoggedIn,l=e.isMobile;return(0,T.jsxs)(_.Z,{container:!0,spacing:2,sx:{height:"calc(100vh - 170px)"},children:[o&&(0,T.jsx)(P,{error:o,isLoggedIn:i}),(0,T.jsx)(v.Z,{sx:{height:"100%"},children:(0,T.jsx)(j,{app:t,isMobile:l,ws:n})}),(t.has_footer||!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GA_MEASUREMENT_ID:"G-XZ40100Y5C"}.REACT_APP_ENABLE_SUBSCRIPTION_MANAGEMENT)&&(0,T.jsx)(Z,{})]})},k=function(e){var n,t,i,r,a,s,d,u,p,h,g,f,x,_,E,S,y,j,A,O=e.ws,P=e.app,Z=e.error,M=e.isLoggedIn,k=e.isMobile,I=(0,l.useRef)(null),N=(0,l.useState)(!1),L=(0,o.Z)(N,2),W=L[0],D=L[1],B=(0,l.useState)({backgroundColor:(null===P||void 0===P||null===(n=P.data)||void 0===n||null===(t=n.config)||void 0===t?void 0:t.window_color)||"#0f477e",color:"white",position:"fixed",right:16,bottom:16}),U=(0,o.Z)(B,2),G=U[0],H=U[1];return(0,l.useEffect)((function(){document.body.style="background: transparent",document.getElementsByClassName("root").style="background: transparent";try{var e,n,t=JSON.parse((null===P||void 0===P||null===(e=P.data)||void 0===e||null===(n=e.config)||void 0===n?void 0:n.chat_bubble_style)||"{}");H((function(e){var n,o;return(0,c.Z)((0,c.Z)({},e),{},{backgroundColor:(null===P||void 0===P||null===(n=P.data)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.window_color)||"#0f477e"},t)}))}catch(a){console.error(a)}if(W){var o=navigator.userAgent||navigator.vendor||window.opera,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o),l=i?"100%":"400px",r=i?"90vh":"700px";window.parent.postMessage({width:l,height:r,type:"promptly-embed-open"},"*")}else setTimeout((function(){var e,n;window.parent.postMessage({type:"promptly-embed-resize",width:(null===I||void 0===I||null===(e=I.current)||void 0===e?void 0:e.clientWidth)||"auto",height:(null===I||void 0===I||null===(n=I.current)||void 0===n?void 0:n.clientHeight)||"auto"},"*")}),200)}),[W,null===P||void 0===P||null===(i=P.data)||void 0===i||null===(r=i.config)||void 0===r?void 0:r.chat_bubble_style,null===P||void 0===P||null===(a=P.data)||void 0===a||null===(s=a.config)||void 0===s?void 0:s.window_color]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.Z,{style:G,onClick:function(){return D(!W)},variant:null!==P&&void 0!==P&&null!==(d=P.data)&&void 0!==d&&null!==(u=d.config)&&void 0!==u&&u.chat_bubble_text?"extended":"circular",ref:I,children:W?(0,T.jsx)(m.Z,{}):null!==P&&void 0!==P&&null!==(p=P.data)&&void 0!==p&&null!==(h=p.config)&&void 0!==h&&h.chat_bubble_text?(0,T.jsx)("span",{children:null===P||void 0===P||null===(g=P.data)||void 0===g||null===(f=g.config)||void 0===f?void 0:f.chat_bubble_text}):(0,T.jsx)(C.Z,{})}),W&&(0,T.jsxs)("div",{className:"chat-container embedded ".concat(W?"maximized":"minimized"),style:{width:k?"90%":"100%"},children:[(0,T.jsxs)("div",{style:{display:"flex",backgroundColor:(null===P||void 0===P||null===(x=P.data)||void 0===x?void 0:x.config.window_color)||"#0f477e",borderRadius:"8px 8px 0px 0px"},children:[(null===P||void 0===P||null===(_=P.data)||void 0===_||null===(E=_.config)||void 0===E?void 0:E.assistant_image)&&(0,T.jsx)(w.Z,{src:null===(S=P.data)||void 0===S||null===(y=S.config)||void 0===y?void 0:y.assistant_image,alt:"Bot",style:{margin:"10px 8px",border:"solid 1px #ccc"}}),(0,T.jsx)("span",{style:{margin:"auto 0px",fontWeight:600,fontSize:"18px",color:"white",padding:null!==P&&void 0!==P&&null!==(j=P.data)&&void 0!==j&&null!==(A=j.config)&&void 0!==A&&A.assistant_image?"inherit":"16px"},children:null===P||void 0===P?void 0:P.name})]}),(0,T.jsx)(v.Z,{sx:{margin:2},children:(0,T.jsx)(R,{ws:O,app:P,error:Z,isLoggedIn:M,isMobile:k})})]})]})},I=t(25926);var N=function(){var e=(0,r.UO)(),n=e.publishedAppId,t=e.embed,c=e.chatBubble,u=(0,l.useState)({}),p=(0,o.Z)(u,2),h=p[0],v=p[1],g=(0,l.useState)(null),f=(0,o.Z)(g,2),x=f[0],_=f[1],b=(0,l.useState)(null),w=(0,o.Z)(b,2),m=w[0],C=w[1],E=(0,l.useState)(null),S=(0,o.Z)(E,2),y=S[0],j=S[1],A="".concat("https:"===window.location.protocol?"wss":"ws","://").concat(window.location.host,"/ws");(0,l.useEffect)((function(){i.ZP.initialize("G-XZ40100Y5C",{gaOptions:{cookieFlags:"SameSite=None;Secure"}})}),[]);var O=(0,a.sJ)(I.lo),P=(0,a.sJ)(I.nC);return(0,l.useEffect)((function(){n&&(0,s.o)().get("/api/app/".concat(n)).then((function(e){var n;v(e.data),_("".concat(A,"/apps/").concat(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.uuid)),document.title="".concat(e.data.name," | ").concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GA_MEASUREMENT_ID:"G-XZ40100Y5C"}.REACT_APP_SITE_NAME||"LLMStack"),i.ZP.send({hitType:"pageview",page:window.location.href,title:document.title})}),(function(e){var n,t;console.log(e),j(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)})).catch((function(e){var n,t;j(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)}))}),[n,v,A]),(0,l.useEffect)((function(){!x||x.endsWith("/ws")||m||C(new d.Ws(x))}),[m,x]),t&&c?(0,T.jsx)(k,{ws:m,app:h,error:y,isLoggedIn:P,isMobile:O}):t?(0,T.jsx)(R,{ws:m,app:h,error:y,isLoggedIn:P,isMobile:O}):(0,T.jsx)(M,{ws:m,app:h,error:y,isLoggedIn:P,isMobile:O})}},98085:function(e,n,t){t.d(n,{Ws:function(){return l}});var o=t(15671),i=t(43144),l=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,o.Z)(this,e),this.url=n,this.ws=null,this.binaryType=t,this.onMessage=null,this.queue=[]}return(0,i.Z)(e,[{key:"status",value:function(){return this.ws.readyState}},{key:"connect",value:function(){var e=this;this.ws=new WebSocket(this.url),this.binaryType&&(this.ws.binaryType=this.binaryType),this.ws.onmessage=this.onMessage,this.ws.onopen=function(){e.queue.forEach((function(n){e.ws.send(n)})),e.queue=[],console.log("Websocket connected: ".concat(e.url))},this.ws.onclose=function(){console.log("Websocket closed: ".concat(e.url))}}},{key:"send",value:function(e){null===this.ws&&this.connect(),this.ws.readyState===WebSocket.CONNECTING?this.queue.push(e):this.ws.readyState===WebSocket.OPEN?this.ws.send(e):(this.queue.push(e),this.connect())}},{key:"close",value:function(){var e;null===(e=this.ws)||void 0===e||e.close()}},{key:"setOnMessage",value:function(e){this.onMessage=e}}]),e}()}}]);