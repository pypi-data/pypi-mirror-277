"use strict";(self.webpackChunkhacs_frontend=self.webpackChunkhacs_frontend||[]).push([[5067],{85067:function(e,t,i){var n,a,r,s=i(95803),l=i(6238),o=i(94881),u=i(1781),d=i(36683),c=i(89231),h=i(29864),f=i(83647),y=i(8364),v=(i(77052),i(69466),i(53501),i(36724),i(71936),i(14460),i(43859),i(1158),i(68113),i(34517),i(97754),i(64148),i(66274),i(85038),i(98168),i(9484),i(5546)),m=i(196),p=i(45081),_=i(33167),k=i(19263),g=i(91330),b=i(38848),A=(i(66442),i(96396),i(29222),i(34556),i(66412)),x=(i(21950),i(55888),i(56262),i(8339),function(){return Promise.all([i.e(3421),i.e(6288)]).then(i.bind(i,57995))}),M=i(31238),w=i(23135),C="___create-new-entity___";(0,y.A)([(0,m.EM)("ha-entity-picker")],(function(e,t){var i,y,Z=function(t){function i(){var t;(0,c.A)(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=(0,h.A)(this,i,[].concat(a)),e(t),t}return(0,f.A)(i,t),(0,d.A)(i)}(t);return{F:Z,d:[{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"autofocus",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({type:Boolean,attribute:"allow-custom-entity"})],key:"allowCustomEntity",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,m.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Array})],key:"createDomains",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Array,attribute:"include-unit-of-measurement"})],key:"includeUnitOfMeasurement",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Array,attribute:"include-entities"})],key:"includeEntities",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Array,attribute:"exclude-entities"})],key:"excludeEntities",value:void 0},{kind:"field",decorators:[(0,m.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,m.MZ)({type:Boolean})],key:"hideClearIcon",value:function(){return!1}},{kind:"field",decorators:[(0,m.MZ)({attribute:"item-label-path"})],key:"itemLabelPath",value:function(){return"friendly_name"}},{kind:"field",decorators:[(0,m.wk)()],key:"_opened",value:function(){return!1}},{kind:"field",decorators:[(0,m.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"method",key:"open",value:(y=(0,u.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{kind:"method",key:"focus",value:(i=(0,u.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"field",key:"_initedStates",value:function(){return!1}},{kind:"field",key:"_states",value:function(){return[]}},{kind:"field",key:"_rowRenderer",value:function(){var e=this;return function(t){return(0,v.qy)(n||(n=(0,l.A)(['<ha-list-item graphic="avatar" .twoline="','"> '," <span>",'</span> <span slot="secondary">',"</span> </ha-list-item>"])),!!t.entity_id,t.state?(0,v.qy)(a||(a=(0,l.A)(['<state-badge slot="graphic" .stateObj="','" .hass="','"></state-badge>'])),t,e.hass):"",t.friendly_name,t.entity_id.startsWith(C)?e.hass.localize("ui.components.entity.entity-picker.new_entity"):t.entity_id)}}},{kind:"field",key:"_getStates",value:function(){var e=this;return(0,p.A)((function(t,i,n,a,r,l,o,u,d,c){var h=[];if(!i)return[];var f,y=Object.keys(i.states),v=null!=c&&c.length?c.map((function(e){var t=i.localize("ui.components.entity.entity-picker.create_helper",{domain:(0,w.z)(e)?i.localize("ui.panel.config.helpers.types.".concat(e)):(0,M.p$)(i.localize,e)});return{entity_id:C+e,state:"on",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:t,attributes:{icon:"mdi:plus"},strings:[e,t]}})):[];if(!y.length)return[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_entities"),attributes:{friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_entities"),icon:"mdi:magnify"},strings:[]}].concat((0,s.A)(v));if(u)return(y=y.filter((function(t){return e.includeEntities.includes(t)}))).map((function(e){var t=(0,g.u)(i.states[e])||e;return Object.assign(Object.assign({},i.states[e]),{},{friendly_name:t,strings:[e,t]})})).sort((function(t,i){return(0,A.S)(t.friendly_name,i.friendly_name,e.hass.locale.language)}));if(d&&(y=y.filter((function(e){return!d.includes(e)}))),n&&(y=y.filter((function(e){return n.includes((0,k.m)(e))}))),a&&(y=y.filter((function(e){return!a.includes((0,k.m)(e))}))),h=y.map((function(e){var t=(0,g.u)(i.states[e])||e;return Object.assign(Object.assign({},i.states[e]),{},{friendly_name:t,strings:[e,t]})})).sort((function(t,i){return(0,A.S)(t.friendly_name,i.friendly_name,e.hass.locale.language)})),l&&(h=h.filter((function(t){return t.entity_id===e.value||t.attributes.device_class&&l.includes(t.attributes.device_class)}))),o&&(h=h.filter((function(t){return t.entity_id===e.value||t.attributes.unit_of_measurement&&o.includes(t.attributes.unit_of_measurement)}))),r&&(h=h.filter((function(t){return t.entity_id===e.value||r(t)}))),!h.length)return[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_match"),attributes:{friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_match"),icon:"mdi:magnify"},strings:[]}].concat((0,s.A)(v));null!=v&&v.length&&(f=h).push.apply(f,(0,s.A)(v));return h}))}},{kind:"method",key:"shouldUpdate",value:function(e){return!!(e.has("value")||e.has("label")||e.has("disabled"))||!(!e.has("_opened")&&this._opened)}},{kind:"method",key:"willUpdate",value:function(e){var t;(!this._initedStates||e.has("_opened")&&this._opened)&&(this._states=this._getStates(this._opened,this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.createDomains),this._initedStates&&(this.comboBox.filteredItems=this._states),this._initedStates=!0),e.has("createDomains")&&null!==(t=this.createDomains)&&void 0!==t&&t.length&&this.hass.loadFragmentTranslation("config")}},{kind:"method",key:"render",value:function(){return(0,v.qy)(r||(r=(0,l.A)([' <ha-combo-box item-value-path="entity_id" .itemLabelPath="','" .hass="','" .value="','" .label="','" .helper="','" .allowCustomValue="','" .filteredItems="','" .renderer="','" .required="','" .disabled="','" @opened-changed="','" @value-changed="','" @filter-changed="','"> </ha-combo-box> '])),this.itemLabelPath,this.hass,this._value,void 0===this.label?this.hass.localize("ui.components.entity.entity-picker.entity"):this.label,this.helper,this.allowCustomEntity,this._states,this._rowRenderer,this.required,this.disabled,this._openedChanged,this._valueChanged,this._filterChanged)}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_valueChanged",value:function(e){var t=this;e.stopPropagation();var i,n,a=e.detail.value.trim();if(a&&a.startsWith(C)){var r=a.substring(23);return i=this,n={domain:r,dialogClosedCallback:function(e){e.entityId&&t._setValue(e.entityId)}},void(0,_.r)(i,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:x,dialogParams:n})}a!==this._value&&this._setValue(a)}},{kind:"method",key:"_filterChanged",value:function(e){var t=e.target,i=e.detail.value.trim().toLowerCase();t.filteredItems=i.length?(0,b.H)(i,this._states):this._states}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,_.r)(t,"value-changed",{value:e}),(0,_.r)(t,"change")}),0)}}]}}),v.WF)},31238:function(e,t,i){i.d(t,{QC:function(){return r},fK:function(){return a},p$:function(){return n}});i(848);var n=function(e,t,i){return e("component.".concat(t,".title"))||(null==i?void 0:i.name)||t},a=function(e,t){var i={type:"manifest/list"};return t&&(i.integrations=t),e.callWS(i)},r=function(e,t){return e.callWS({type:"manifest/get",integration:t})}}}]);
//# sourceMappingURL=5067.Mx8KAdukhaI.js.map