(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1014],{6719:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(27378),i=n(25773),o=n(36924),a=n(38097),s=n(50189),c=n(70409),u=n(53782),l=n(53991),p=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=String(e).toLowerCase(),i=String(n.getOptionValue(t)).toLowerCase(),o=String(n.getOptionLabel(t)).toLowerCase();return i===r||o===r},f={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,r){return!(!e||t.some((function(t){return d(e,t,r)}))||n.some((function(t){return d(e,t,r)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};n(31542),n(92486);var g=(0,r.forwardRef)((function(e,t){var n=function(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,i=e.createOptionPosition,a=void 0===i?"last":i,d=e.formatCreateLabel,g=void 0===d?f.formatCreateLabel:d,b=e.isValidNewOption,m=void 0===b?f.isValidNewOption:b,h=e.getNewOptionData,v=void 0===h?f.getNewOptionData:h,O=e.onCreateOption,y=e.options,j=void 0===y?[]:y,w=e.onChange,x=(0,u.Z)(e,p),P=x.getOptionValue,C=void 0===P?o.g:P,Z=x.getOptionLabel,T=void 0===Z?o.b:Z,E=x.inputValue,N=x.isLoading,S=x.isMulti,D=x.value,k=x.name,L=(0,r.useMemo)((function(){return m(E,(0,l.I)(D),j,{getOptionValue:C,getOptionLabel:T})?v(E,g(E)):void 0}),[g,v,T,C,E,m,j,D]),_=(0,r.useMemo)((function(){return!n&&N||!L?j:"first"===a?[L].concat((0,c.Z)(j)):[].concat((0,c.Z)(j),[L])}),[n,a,N,L,j]),M=(0,r.useCallback)((function(e,t){if("select-option"!==t.action)return w(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==L)w(e,t);else if(O)O(E);else{var r=v(E,E),i={action:"create-option",name:k,option:r};w((0,l.D)(S,[].concat((0,c.Z)((0,l.I)(D)),[r]),r),i)}}),[v,E,S,k,L,O,w,D]);return(0,s.Z)((0,s.Z)({},x),{},{options:_,onChange:M})}((0,a.u)(e));return r.createElement(o.S,(0,i.Z)({ref:t},n))})),b=n(32916);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var h=(0,r.forwardRef)((function(e,t){var n=(0,b.Z)(e);return r.createElement(g,m({ref:t},n))}))},86054:function(e,t,n){"use strict";var r=n(90849),i=n(90089),o=n(28841),a=n(38687),s=n(24246),c=["title","tooltip","children"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.title,n=e.tooltip,r=e.children,u=(0,i.Z)(e,c);return(0,s.jsxs)(o.xuv,l(l({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},u),{},{children:[(0,s.jsxs)(o.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,n?(0,s.jsx)(o.xvT,{as:"span",mx:1,children:(0,s.jsx)(a.Z,{label:n})}):void 0]}),(0,s.jsx)(o.Kqy,{p:6,spacing:6,children:r})]}))}},24753:function(e,t,n){"use strict";n.d(t,{MA:function(){return l},Vo:function(){return d},t5:function(){return p}});var r=n(90849),i=n(28841),o=n(24246);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},p=function(e){var t=(0,o.jsx)(c,{children:e});return s(s({},l),{description:t})},d=function(e){var t=(0,o.jsx)(u,{children:e});return s(s({},l),{description:t,status:"error"})}},28506:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(28841),i=n(51471),o=n(90849),a=n(55732),s=n(97865),c=n(34707),u=n.n(c),l=n(34090),p=n(86054),d=n(43139),f=n(78624),g=n(24753),b=n(28703).u.injectEndpoints({endpoints:function(e){return{getMessagingTemplates:e.query({query:function(){return{url:"messaging/templates/"}},providesTags:function(){return["Messaging Templates"]}}),updateMessagingTemplates:e.mutation({query:function(e){return{url:"messaging/templates/",method:"PUT",body:e}},invalidatesTags:function(){return["Messaging Templates"]}})}}}),m=b.useGetMessagingTemplatesQuery,h=b.useUpdateMessagingTemplatesMutation,v=n(24246);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){var t=e.emailTemplates,n=h(),i=(0,s.Z)(n,2),c=i[0],b=i[1].isLoading,m=(0,r.pmc)(),O=function(){var e=(0,a.Z)(u().mark((function e(t,n){var r,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){if((0,f.D4)(e)){var r=(0,f.e$)(e.error,"An unexpected error occurred while editing the email templates. Please try again.");m((0,g.Vo)(r))}else m((0,g.t5)("Email templates saved.")),n.resetForm({values:t})},i=Object.entries(t).map((function(e){var t=(0,s.Z)(e,2);return{key:t[0],content:t[1].content}})),e.next=4,c(i);case 4:o=e.sent,r(o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=t.reduce((function(e,t){return y(y({},e),{},(0,o.Z)({},t.key,{label:t.label,content:t.content}))}),{});return(0,v.jsx)(l.J9,{enableReinitialize:!0,initialValues:j,onSubmit:O,children:function(){return(0,v.jsxs)(l.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[Object.entries(j).map((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1];return(0,v.jsx)(r.xuv,{py:3,children:(0,v.jsxs)(p.Z,{title:i.label,children:[(0,v.jsx)(d.j0,{label:"Message subject",name:"".concat(n,".content.subject"),variant:"stacked"}),(0,v.jsx)(d.Ks,{label:"Message body",name:"".concat(n,".content.body"),variant:"stacked",resize:!0})]})},n)})),(0,v.jsx)(r.kCb,{justifyContent:"right",width:"100%",paddingTop:2,children:(0,v.jsx)(r.zxk,{size:"sm",type:"submit",colorScheme:"primary",isLoading:b,children:"Save"})})]})}})},w=function(){var e=m(),t=e.data;return e.isLoading?(0,v.jsx)(i.Z,{title:"Email templates",children:(0,v.jsx)(r.$jN,{})}):(0,v.jsx)(i.Z,{title:"Email templates",children:(0,v.jsxs)(r.xuv,{"data-testid":"email-templates",children:[(0,v.jsx)(r.X6q,{marginBottom:2,fontSize:"2xl",children:"Email templates"}),(0,v.jsxs)(r.xuv,{maxWidth:"720px",children:[(0,v.jsx)(r.xvT,{fontSize:"sm",children:"When privacy requests are submitted, Fides emails the data subject to confirm their identity and keep them updated on the status of the request. The templates below allow you to configure the subject and body of the email to suit your business needs. To change the appearance of the email, you may use the editors within your messaging provider (e.g. Mailgun, SendGrid, Twilio)."}),(0,v.jsx)(r.xuv,{padding:2,children:(0,v.jsx)(j,{emailTemplates:t})})]})]})})}},8334:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/email-templates",function(){return n(28506)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return a}});const r=(e,t)=>o(e,t),i=Symbol("SOME"),o=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return i in e?e.some((e=>o(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>o(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>o(t,n[e])))},a=e=>t=>r(e,t);class s{static narrow(e){return new s((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof s?e.NF:e instanceof Function?e:t=>r(e,t);return new s((e=>t(e)&&n(e)))}}new s((e=>!0))}},function(e){e.O(0,[338,3702,9774,2888,179],(function(){return t=8334,e(e.s=t);var t}));var t=e.O();_N_E=t}]);