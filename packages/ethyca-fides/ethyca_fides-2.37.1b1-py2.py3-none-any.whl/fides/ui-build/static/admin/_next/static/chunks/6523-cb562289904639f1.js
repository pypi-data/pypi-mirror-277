"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6523],{29073:function(e,n,t){var i=t(28841),r=t(24246);n.Z=function(e){var n=e.title,t=e.description,a=e.button;return(0,r.jsxs)(i.Ugi,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,r.jsx)(i.iid,{alignSelf:"start",color:"blue.400",mt:.5}),(0,r.jsxs)(i.xuv,{flexGrow:1,children:[(0,r.jsx)(i.xvT,{fontWeight:"bold",fontSize:"sm",mb:1,children:n}),(0,r.jsx)(i.xvT,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:t})]}),a]})}},30646:function(e,n,t){var i=t(28841),r=t(24246);n.Z=function(e){var n=e.title,t=e.children,a=e.isOpen,s=e.onClose;return(0,r.jsxs)(i.u_l,{isOpen:a,onClose:s,isCentered:!0,scrollBehavior:"inside",size:"xl",children:[(0,r.jsx)(i.ZAr,{}),(0,r.jsxs)(i.hzk,{textAlign:"left",p:0,"data-testid":"add-modal-content",children:[(0,r.jsx)(i.xBx,{p:0,children:(0,r.jsx)(i.xuv,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)(i.X6q,{as:"h3",size:"sm",children:n})})}),(0,r.jsx)(i.fef,{pb:4,overflow:"scroll",children:t})]})]})}},36523:function(e,n,t){t.d(n,{Z:function(){return R}});var i=t(90849),r=t(90089),a=t(55732),s=t(97865),o=t(34707),l=t.n(o),c=t(28841),d=t(34090),u=t(27378),p=t(14633),f=t(6848),m=t(90768),v=t(43139),h=t(37761),g=t(44047),b=t(48466),x=t(51745),y=t(1504),j=t(88491),_=t(78624),C=t(24753),k=t(30646),O={name:"",consent_use:"",data_use:"",data_categories:["user"],cookieNames:[],cookies:[]},w=[{label:"Analytics",value:"analytics",description:"Provides analytics for activities such as system and advertising performance reporting, insights and fraud detection."},{label:"Essential",value:"essential",description:"Operates the service or product, including legal obligations, support and basic system operations."},{label:"Functional",value:"functional",description:"Used for specific, necessary, and legitimate purposes."},{label:"Marketing",value:"marketing",description:"Enables marketing, promotion, advertising and sales activities for the product, service, application or system."}],S=t(75846),z=t(16446),V=t(24246),Z=function(e){var n=e.index,t=e.isSuggestion,i=e.disabled;(0,S.fd)();var r=(0,f.C)(S.oW),a=t?"complimentary.500":"gray.800",s=(0,d.u6)().values,o=r.filter((function(e){return e.value.split(".")[0]===s.privacy_declarations[n].consent_use}));return(0,V.jsxs)(c.gCW,{width:"100%",borderRadius:"4px",border:"1px solid",borderColor:"gray.200",spacing:4,p:4,children:[(0,V.jsx)(v.AP,{label:"Consent category",tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",name:"privacy_declarations.".concat(n,".consent_use"),options:w,variant:"stacked",isRequired:!0,isCustomOption:!0,singleValueBlock:!0,textColor:a,isDisabled:i}),(0,V.jsx)(v.AP,{label:"Detailed consent category (optional)",tooltip:"Select a more specific consent category",name:"privacy_declarations.".concat(n,".data_use"),options:o,variant:"stacked",isCustomOption:!0,singleValueBlock:!0,textColor:a,isDisabled:!s.privacy_declarations[n].consent_use||i}),(0,V.jsx)(v.VT,{label:"Cookie names",name:"privacy_declarations.".concat(n,".cookieNames"),options:[],variant:"stacked",isMulti:!0,textColor:a,isDisabled:i})]})},P=function(e){var n,t,i=e.showSuggestions,r=e.isCreate,a=e.disabled,s=(0,d.u6)(),o=s.values,l=s.setFieldValue,p=o.vendor_id,m=(0,g.Wp)({vendor_id:p},{skip:!i||null==p}).isLoading,v=(0,f.C)((0,g.cL)(p||""));(0,u.useEffect)((function(){if(i&&o.vendor_id&&null!==v&&void 0!==v&&v.length){var e=v.filter((function(e){return n=e.data_use,w.some((function(e){return e.value===n.split(".")[0]}));var n})).map((function(e){return(0,z.U)(e)})).map((function(e){var n,t,i;return{name:null!==(n=e.name)&&void 0!==n?n:"",consent_use:e.data_use.split(".")[0],data_use:e.data_use,data_categories:e.data_categories,cookieNames:(null===(t=e.cookies)||void 0===t?void 0:t.map((function(e){return e.name})))||[],cookies:null!==(i=e.cookies)&&void 0!==i?i:[]}}));l("privacy_declarations",e)}else r&&l("privacy_declarations",[O])}),[i,r,o.vendor_id,v,l]);var h=(null===(n=o.privacy_declarations[o.privacy_declarations.length-1])||void 0===n?void 0:n.data_use)===O.data_use&&(null===(t=o.privacy_declarations[o.privacy_declarations.length-1])||void 0===t?void 0:t.consent_use)===O.consent_use;return m?(0,V.jsx)(c.$jN,{size:"sm",alignSelf:"center"}):(0,V.jsx)(d.F2,{name:"privacy_declarations",render:function(e){return(0,V.jsxs)(V.Fragment,{children:[o.privacy_declarations.map((function(e,n){return(0,V.jsx)(Z,{index:n,disabled:a,isSuggestion:i},e.data_use||n)})),(0,V.jsx)(c.zxk,{size:"xs",variant:"ghost",colorScheme:"complimentary",onClick:function(){e.push(O)},disabled:h||a,"data-testid":"add-data-use-btn",children:"Add data use +"})]})}})},L=["cookieNames","consent_use"];function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F={name:"",vendor_id:void 0,privacy_declarations:[O]},R=function(e){var n=e.buttonLabel,t=e.buttonVariant,i=void 0===t?"primary":t,o=e.onButtonClick,w=(0,c.pmc)(),S=(0,c.qY0)(),z=S.isOpen,Z=S.onOpen,E=S.onClose,R=(0,f.T)(),T=(0,f.C)(b.cS),N=(0,u.useMemo)((function(){return p.Ry().shape({name:p.Z_().required().label("Vendor name").test("is-unique","",(function(e,n){return!T.map((function(e){return e.name})).some((function(n){return n===e}))||n.createError({message:'You already have a vendor called "'.concat(e,'". Please specify a unique name for this vendor.')})}))})}),[T]),I=(0,m.hz)(),q=I.tcf,W=I.dictionaryService,G=(0,g.Rd)(void 0,{skip:!W}).isLoading,U=(0,f.C)(g.o),A=(0,f.C)(x.gU),B=(0,b.f7)(),M=(0,s.Z)(B,1)[0],H=(0,f.C)(x.bN),Q=function(){E(),R((0,x.b3)("initial")),R((0,x.gQ)(!1))},$=(0,u.useRef)(null),Y=$.current?$.current.values.vendor_id:void 0,J=(0,f.C)((0,g.$e)(Y||"")),K=function(){var e=(0,a.Z)(l().mark((function e(n,t){var i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.privacy_declarations.filter((function(e){return e.consent_use!==O.consent_use})).flatMap((function(e){var n=e.cookieNames.map((function(n){var t=e.cookies.find((function(e){return e.name===n}));return null!==t&&void 0!==t?t:{name:n,path:"/"}})),t=(e.cookieNames,e.consent_use,(0,r.Z)(e,L));return"marketing"!==e.consent_use||e.data_use?D(D({},t),{},{data_use:e.data_use?e.data_use:e.consent_use,cookies:n}):["marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"].map((function(e){return D(D({},t),{},{data_use:e,cookies:n})}))})),a=D(D(D({},J),n),{},{fides_key:(0,h.E)(n.name),system_type:"",privacy_declarations:i}),e.next=4,M(a);case 4:if(s=e.sent,!(0,_.D4)(s)){e.next=8;break}return w((0,C.Vo)((0,_.e$)(s.error))),e.abrupt("return");case 8:w((0,C.t5)("Vendor successfully created!")),t.resetForm(),Q();case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),X=function(e){if(W){if(!e)return R((0,x.b3)("hiding")),void R((0,x.gQ)(!1));R((0,x.b3)("showing")),q&&(0,_.cj)(e)===_.c6.GVL?R((0,x.gQ)(!0)):R((0,x.gQ)(!1))}},ee="primary"===i?{size:"sm",colorScheme:"primary"}:{size:"xs",variant:"outline"};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(c.zxk,D(D({onClick:function(){o?o():Z()},"data-testid":"add-vendor-btn"},ee),{},{children:n})),(0,V.jsx)(d.J9,{initialValues:F,enableReinitialize:!0,onSubmit:K,validationSchema:N,innerRef:$,children:function(e){var n=e.dirty,t=e.isValid,i=e.resetForm;return(0,V.jsx)(k.Z,{isOpen:z,onClose:Q,title:"Add a vendor",children:(0,V.jsxs)(c.xuv,{"data-testid":"add-vendor-modal-content",my:4,children:[A?(0,V.jsx)(y.Z,{}):null,(0,V.jsx)(d.l0,{children:(0,V.jsxs)(c.gCW,{alignItems:"start",spacing:6,children:[W?(0,V.jsx)(j.Z,{label:"Vendor name",options:U,onVendorSelected:X,isCreate:!0,lockedForGVL:A}):(0,V.jsx)(v.j0,{id:"name",name:"name",isRequired:!0,label:"Vendor name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. \u201cEmail Data Warehouse\u201d",variant:"stacked"}),(0,V.jsx)(P,{showSuggestions:"showing"===H,isCreate:!0,disabled:A}),(0,V.jsxs)(c.hE2,{size:"sm",width:"100%",justifyContent:"space-between",children:[(0,V.jsx)(c.zxk,{variant:"outline",onClick:function(){Q(),i()},children:"Cancel"}),(0,V.jsx)(c.zxk,{type:"submit",variant:"primary",isDisabled:G||!n||!t,isLoading:G,"data-testid":"save-btn",children:"Save vendor"})]})]})})]})})}})]})}},37761:function(e,n,t){t.d(n,{E:function(){return i}});var i=function(e){return e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")}},1504:function(e,n,t){var i=t(28841),r=t(29073),a=t(24246);n.Z=function(){return(0,a.jsx)(i.xuv,{mb:"6",maxW:"720px","data-testid":"locked-for-GVL-notice",children:(0,a.jsx)(r.Z,{title:"This system is part of the TCF Global Vendor List (GVL)",description:(0,a.jsxs)(a.Fragment,{children:["As a result, the system fields are not editable as they come directly from Fides Compass and the Global Vendor List (GVL). In some cases where the legal basis has been declared to be flexible, you may update the legal basis for particular data uses."," ",(0,a.jsx)(i.rUS,{href:"https://fid.es/tcf_gvl",isExternal:!0,color:"complimentary.500",children:"For more information on the Global Vendor List, click here."})]})})})}},88491:function(e,n,t){t.d(n,{Z:function(){return _}});var i=t(97865),r=t(90089),a=t(90849),s=t(89543),o=t(6719),l=t(28841),c=t(34090),d=t(27378),u=t(6848),p=t(43139),f=t(24246),m=(0,l.IUT)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,f.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})}),v=t(38687),h=t(51745),g=["children"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var y=function(e){var n=e.active,t=e.disabled,i=e.onRefreshSuggestions,r={bg:n?"complimentary.500":"gray.100"};return(0,f.jsxs)(l.gCW,{children:[(0,f.jsx)(l.LZC,{minHeight:"18px"}),(0,f.jsxs)(l.v2r,{children:[(0,f.jsx)(l.j2t,x({as:l.hU,size:"sm",isDisabled:t,icon:(0,f.jsx)(m,{color:n?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:r}},r)),(0,f.jsx)(l.qyq,{children:(0,f.jsx)(l.sNh,{onClick:i,children:(0,f.jsx)(l.xvT,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})},j=function(e){e.children;var n=(0,r.Z)(e,g);return(0,f.jsx)(s.Z.Option,x(x({},n),{},{type:"option",children:(0,f.jsxs)(l.kCb,{flexDirection:"column",padding:2,children:[(0,f.jsx)(l.xvT,{color:"gray.700",fontSize:"14px",lineHeight:5,fontWeight:"medium",children:n.data.label}),n.data.description?(0,f.jsx)(l.xvT,{color:"gray.500",fontSize:"12px",lineHeight:4,fontWeight:"normal",children:n.data.description}):null]})}))},_=function(e){var n,t,r=e.label,a=e.isCreate,s=e.lockedForGVL,m=e.options,g=e.onVendorSelected,b=(0,u.C)(h.bN),_=(0,c.U$)({name:"name"}),C=(0,i.Z)(_,3),k=C[0],O=C[1],w=C[2].setValue,S=!(!O.touched||!O.error),z=x(x({},k),{},{value:null!==(n=k.value)&&void 0!==n?n:""}),V=(0,c.u6)(),Z=V.touched,P=V.values,L=V.setTouched,E=V.setFieldValue,D=V.validateForm,F=null!==(t=m.find((function(e){return e.value===z.value})))&&void 0!==t?t:{label:z.value,value:z.value,description:""},R=(0,d.useState)(""),T=R[0],N=R[1],I=m.filter((function(e){return e.label.toLowerCase().startsWith(T.toLowerCase())})),q=!z.value&&!P.vendor_id,W=!!T&&I.length>0,G=s&&!a;(0,d.useEffect)((function(){D()}),[q,D]);var U=function(){w(""),N(""),E("vendor_id",void 0),g(void 0)},A=(0,f.jsx)(l.NIc,{isInvalid:S,isRequired:!0,width:"100%",children:(0,f.jsxs)(l.gCW,{alignItems:"start",position:"relative",width:"100%",children:[(0,f.jsxs)(l.Ugi,{spacing:1,children:[(0,f.jsx)(p.__,{htmlFor:"name",fontSize:"xs",my:0,mr:1,children:r}),(0,f.jsx)(v.Z,{label:"Enter the system name"})]}),(0,f.jsx)(l.xuv,{width:"100%","data-testid":"input-name",children:(0,f.jsx)(o.Z,{name:"name",id:"name",options:I,isRequired:!0,value:F,onBlur:function(e){z.onBlur(e),T&&w(T),L(x(x({},Z),{},{name:!0}),!T)},onChange:function(e,n){return function(e,n){if("clear"!==n.action){if(w(e?e.label:""),L(x(x({},Z),{},{vendor_id:!0,name:!0}),"create-option"!==n.action),e){var t=m.some((function(n){return n.value===e.value}))?e.value:void 0;E("vendor_id",t),g(t)}}else U()}(e,n)},onInputChange:function(e){return N(e)},inputValue:T,size:"sm",onKeyDown:function(e){"Tab"===e.key&&T&&I.length>0&&T!==I[0].label&&(N(I[0].label),w(I[0].value))},tabSelectsValue:W,classNamePrefix:"custom-select",placeholder:"Enter system name...",instanceId:"select-name",isDisabled:G,menuPosition:"absolute",isSearchable:!0,isClearable:!!T,focusBorderColor:"primary.600",formatCreateLabel:function(e){return'Create new system "'.concat(e,'"...')},chakraStyles:{container:function(e){return x(x({},e),{},{flexGrow:1,backgroundColor:"white"})},option:function(e,n){return x(x({},e),{},{background:n.isSelected||n.isFocused?"gray.50":"unset"})},dropdownIndicator:function(e){return x(x({},e),{},{display:"none"})},indicatorSeparator:function(e){return x(x({},e),{},{display:"none"})}},components:{Option:j}})}),(0,f.jsx)(p.Bc,{isInvalid:S,message:O.error,fieldName:"name"}),(0,f.jsxs)(l.xvT,{"aria-hidden":!0,position:"absolute",backgroundColor:"transparent",style:{marginTop:"31.52px",marginLeft:"13px"},pointerEvents:"none",zIndex:1,fontSize:"sm",children:[(0,f.jsx)(l.xvT,{as:"span",color:"transparent",children:T}),T&&I.length>0?(0,f.jsx)(l.xvT,{as:"span",color:"complimentary.500",children:I[0].label.substring(T.length)}):null]})]})});return(0,f.jsxs)(l.Ugi,{alignItems:"flex-start",width:"full",children:[q?A:(0,f.jsx)(p.j0,{id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:G,isRequired:!0,inputRightElement:G?null:(0,f.jsx)(l.PZ7,{onClick:U,size:"sm","data-testid":"clear-btn"})}),(0,f.jsx)(y,{active:!!P.vendor_id||W,disabled:!P.vendor_id||"showing"===b,onRefreshSuggestions:function(){return g(P.vendor_id)}})]})}},16446:function(e,n,t){t.d(n,{U:function(){return i}});var i=function(e){var n,t=e.data_categories.flatMap((function(e){return e.split(",")}));return{data_use:e.data_use,data_categories:t,features:e.features,legal_basis_for_processing:e.legal_basis_for_processing,flexible_legal_basis_for_processing:e.flexible_legal_basis_for_processing,retention_period:e.retention_period?e.retention_period:"",cookies:null===(n=e.cookies)||void 0===n?void 0:n.map((function(e){return{name:e.name,domain:e.domain,path:e.path}}))}}}}]);