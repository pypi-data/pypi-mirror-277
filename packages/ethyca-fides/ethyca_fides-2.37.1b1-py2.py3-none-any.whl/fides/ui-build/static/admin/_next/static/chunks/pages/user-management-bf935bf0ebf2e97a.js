(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{96156:function(e,r,n){"use strict";n.d(r,{l:function(){return s}});var t=n(28841),i=n(24246),s=(0,t.IUT)({displayName:"TrashCanSolidIcon",viewBox:"0 0 12 15",path:(0,i.jsx)("path",{d:"M8.37857 1.18083C8.23393 0.892838 7.93661 0.710938 7.6125 0.710938H4.3875C4.06339 0.710938 3.76607 0.892838 3.62143 1.18083L3.42857 1.56094H0.857143C0.383036 1.56094 -1.19209e-07 1.94158 -1.19209e-07 2.41094C-1.19209e-07 2.8803 0.383036 3.26094 0.857143 3.26094H11.1429C11.6162 3.26094 12 2.8803 12 2.41094C12 1.94158 11.6162 1.56094 11.1429 1.56094H8.57143L8.37857 1.18083ZM11.167 4.11094H0.857143V12.6109C0.857143 13.5486 1.62589 14.3109 2.57143 14.3109H9.45268C10.3754 14.3109 11.167 13.5486 11.167 12.6109V4.11094ZM9.02411 6.23594V12.1859C9.02411 12.4197 8.80714 12.6109 8.59554 12.6109C8.33571 12.6109 8.16696 12.4197 8.16696 12.1859V6.23594C8.16696 6.00219 8.33571 5.81094 8.59554 5.81094C8.80714 5.81094 9.02411 6.00219 9.02411 6.23594ZM6.45268 6.23594V12.1859C6.45268 12.4197 6.23571 12.6109 6.02411 12.6109C5.76429 12.6109 5.57143 12.4197 5.57143 12.1859V6.23594C5.57143 6.00219 5.76429 5.81094 6.02411 5.81094C6.23571 5.81094 6.45268 6.00219 6.45268 6.23594ZM3.85714 6.23594V12.1859C3.85714 12.4197 3.66429 12.6109 3.42857 12.6109C3.19286 12.6109 3 12.4197 3 12.1859V6.23594C3 6.00219 3.19286 5.81094 3.42857 5.81094C3.66429 5.81094 3.85714 6.00219 3.85714 6.23594Z",fill:"currentColor"})})},63238:function(e,r,n){"use strict";n.d(r,{Tg:function(){return o}});var t=n(6848),i=n(67788),s=n(24246),o=function(e){return(0,t.C)(i.uu).filter((function(r){return e.includes(r)})).length>0};r.ZP=function(e){var r=e.scopes,n=e.children;return o(r)?(0,s.jsx)(s.Fragment,{children:n}):null}},44845:function(e,r,n){"use strict";var t=n(90849),i=n(90089),s=n(28841),o=n(24246),a=["search","onChange","withIcon","onClear","placeholder"];function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}r.Z=function(e){var r=e.search,n=e.onChange,t=e.withIcon,c=e.onClear,u=e.placeholder,d=(0,i.Z)(e,a);return(0,o.jsxs)(s.BZy,{size:"sm",minWidth:"308px",children:[t?(0,o.jsx)(s.Z8_,{pointerEvents:"none",children:(0,o.jsx)(s.PTu,{color:"gray.300",w:"17px",h:"17px"})}):null,(0,o.jsx)(s.IIB,l({autoComplete:"off",type:"search",minWidth:200,size:"sm",borderRadius:"md",value:r,name:"search",onChange:function(e){return n(e.target.value)},placeholder:u||""},d)),c?(0,o.jsx)(s.xHT,{children:(0,o.jsx)(s.zxk,{borderLeftRadius:0,height:"95%",right:"14px",flexShrink:0,fontWeight:"light",size:"sm",onClick:c,children:"Clear"})}):null]})}},24753:function(e,r,n){"use strict";n.d(r,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var t=n(90849),i=n(28841),s=n(24246);function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var c=function(e){var r=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",r]})},l=function(e){var r=e.children;return(0,s.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",r]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var r=(0,s.jsx)(c,{children:e});return a(a({},u),{description:r})},p=function(e){var r=(0,s.jsx)(l,{children:e});return a(a({},u),{description:r,status:"error"})}},78098:function(e,r,n){"use strict";var t=n(90089),i=n(55732),s=n(97865),o=n(34707),a=n.n(o),c=n(28841),l=n(34090),u=n(86677),d=(n(27378),n(14633)),p=n(6848),h=n(43139),f=n(78624),j=n(60709),b=n(24753),m=n(30002),x=n(24246),g=["user"],v={username:"",usernameConfirmation:""};r.Z=function(e){var r=e.user,n=(0,t.Z)(e,g),o=n.isOpen,O=n.onClose,y=function(e){var r=e.id,n=e.username,t=e.onClose,o=(0,c.pmc)(),l=(0,u.useRouter)(),h=(0,p.T)(),x=(0,m.I1)(),g=(0,s.Z)(x,1)[0],v=function(){var e=(0,i.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(r);case 2:n=e.sent,(0,f.D4)(n)?o((0,b.Vo)((0,f.e$)(n.error))):(o((0,b.t5)("Successfully deleted user")),t()),h((0,m.Vv)(void 0)),l.push(j.e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleDeleteUser:v,validationSchema:d.Ry().shape({usernameConfirmation:d.Z_().required().oneOf([n],"Confirmation input must match the username").label("Username confirmation")})}}({id:r.id,username:r.username,onClose:O}),w=y.handleDeleteUser,C=y.validationSchema;return(0,x.jsxs)(c.u_l,{isCentered:!0,isOpen:o,onClose:O,children:[(0,x.jsx)(c.ZAr,{}),(0,x.jsx)(c.hzk,{"data-testid":"delete-user-modal",children:(0,x.jsx)(l.J9,{initialValues:v,validationSchema:C,onSubmit:w,children:function(e){var n=e.isSubmitting,t=e.dirty,i=e.isValid;return(0,x.jsxs)(l.l0,{children:[(0,x.jsx)(c.xBx,{children:"Delete User"}),(0,x.jsx)(c.olH,{}),(0,x.jsxs)(c.fef,{children:[(0,x.jsxs)(c.bZj,{status:"warning",overflow:"visible",children:[(0,x.jsx)(c.zMQ,{}),(0,x.jsxs)(c.XaZ,{children:[(0,x.jsx)(c.xvT,{as:"span",mb:2,children:"You are about to delete the user\xa0"}),(0,x.jsxs)(c.xvT,{as:"span",mb:2,fontStyle:"italic",fontWeight:"semibold",children:[r.username,"."]}),(0,x.jsx)(c.xvT,{mb:2,children:"This action cannot be undone. To confirm, please enter the user\u2019s username below."})]})]}),(0,x.jsx)(c.Kqy,{direction:"column",spacing:4,children:(0,x.jsx)(h.j0,{name:"usernameConfirmation",label:"Confirm username",placeholder:"Type the username to delete"})})]}),(0,x.jsx)(c.mzw,{children:(0,x.jsxs)(c.hE2,{size:"sm",spacing:"2",width:"100%",children:[(0,x.jsx)(c.zxk,{onClick:O,variant:"outline",width:"50%",children:"Cancel"}),(0,x.jsx)(c.zxk,{colorScheme:"primary",disabled:!t||!i,isLoading:n,type:"submit",width:"50%","data-testid":"submit-btn",children:"Delete User"})]})})]})}})})]})}},75834:function(e,r,n){"use strict";n.d(r,{K:function(){return i}});var t=n(288),i=[{label:"Owner",permissions_label:"Owner",roleKey:t.A7.OWNER,description:"Owners have view and edit access to the whole organization and can create new users"},{label:"Contributor",permissions_label:"Contributor",roleKey:t.A7.CONTRIBUTOR,description:"Contributors can create new users and have view and edit access to the whole organization apart from configuring storage and messaging"},{label:"Viewer",permissions_label:"Viewer",roleKey:t.A7.VIEWER,description:"Viewers have view access to the Data Map and all systems"},{label:"Viewer & Approver",permissions_label:"Viewer & Approver",roleKey:t.A7.VIEWER_AND_APPROVER,description:"Viewer & Approvers have view access to the Data Map but can also manage Privacy Requests"},{label:"Approver",permissions_label:"Approver",roleKey:t.A7.APPROVER,description:"Approvers can only access the Privacy Requests portal to manage requests"}]},99089:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return Z}});var t=n(28841),i=n(27378),s=n(90849),o=n(60245),a=n(6848),c=n(30002),l=n(96156),u=n(86677),d=n(45802),p=n(60709),h=n(63238),f=n(75834),j=n(288),b=n(78098),m=n(24246);function x(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function g(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?x(Object(n),!0).forEach((function(r){(0,s.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var v=function(e){var r,n,i=e.user,s=(0,u.useRouter)(),o=(0,t.qY0)(),x=(0,a.C)(d.dy),v=!!x&&x.id===i.id,O=(0,h.Tg)([j.Sh.USER_UPDATE])||v,y=function(){O&&s.push("".concat(p.e3,"/profile/").concat(i.id))},w=(0,c.gU)(null!==(r=i.id)&&void 0!==r?r:"",{skip:!i.id}).data,C=(0,c.d6)(null!==(n=i.id)&&void 0!==n?n:"",{skip:!i.id}).data,P=[];return w&&w.roles&&w.roles.forEach((function(e){var r=f.K.find((function(r){return r.roleKey===e}));r&&P.push(r.permissions_label)})),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(t.Tr,{_hover:{bg:"gray.50",cursor:O?"pointer":void 0},height:"36px","data-testid":"row-".concat(i.id),children:[(0,m.jsx)(t.Td,{pl:0,py:1,onClick:y,children:i.username}),(0,m.jsx)(t.Td,{pl:0,py:1,onClick:y,children:i.first_name}),(0,m.jsx)(t.Td,{pl:0,py:1,onClick:y,children:i.last_name}),(0,m.jsx)(t.Td,{pl:0,py:1,onClick:y,children:P.map((function(e){return(0,m.jsx)(t.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-permissions-badge",children:e},e)}))}),(0,m.jsx)(t.Td,{pl:0,py:1,onClick:y,children:(0,m.jsx)(t.Cts,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-systems-badge",children:C?C.length:0})}),(0,m.jsx)(t.Td,{pl:0,py:1,onClick:y,children:i.created_at?new Date(i.created_at).toUTCString():null}),(0,m.jsx)(h.ZP,{scopes:[j.Sh.USER_DELETE],children:(0,m.jsx)(t.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,m.jsx)(t.hE2,{children:(0,m.jsx)(t.hU,{"aria-label":"delete",icon:(0,m.jsx)(l.l,{}),variant:"outline",size:"sm",onClick:o.onOpen,"data-testid":"delete-user-btn"})})})})]},i.id),(0,m.jsx)(b.Z,g({user:i},o))]})};function O(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?O(Object(n),!0).forEach((function(r){(0,s.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var w=function(){var e=function(){var e=(0,o.I0)(),r=(0,o.v9)(c.lq),n=(0,c.wv)(r),t=n.data,i=n.isLoading,s=t||{users:[],total:0},a=s.items,l=s.total;return y(y({},r),{},{isLoading:i,users:a,total:l,handleNextPage:function(){e((0,c.YA)(r.page+1))},handlePreviousPage:function(){e((0,c.YA)(r.page-1))}})}(),r=e.users,n=e.total,s=e.page,l=e.size,u=e.handleNextPage,d=e.handlePreviousPage,p=(s-1)*l+1,h=Math.min(n,s*l),f=(0,a.T)();return(0,i.useEffect)((function(){f((0,c.Vv)(void 0))}),[f]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(t.iA_,{size:"sm","data-testid":"user-management-table",children:[(0,m.jsx)(t.hrZ,{children:(0,m.jsxs)(t.Tr,{children:[(0,m.jsx)(t.Th,{pl:0,children:"Username"}),(0,m.jsx)(t.Th,{pl:0,children:"First Name"}),(0,m.jsx)(t.Th,{pl:0,children:"Last Name"}),(0,m.jsx)(t.Th,{pl:0,children:"Permissions"}),(0,m.jsx)(t.Th,{pl:0,children:"Assigned Systems"}),(0,m.jsx)(t.Th,{pl:0,children:"Created At"})]})}),(0,m.jsx)(t.p3B,{children:null===r||void 0===r?void 0:r.map((function(e){return(0,m.jsx)(v,{user:e},e.id)}))})]}),(0,m.jsxs)(t.kCb,{justifyContent:"space-between",mt:6,children:[(0,m.jsx)(t.xvT,{fontSize:"xs",color:"gray.600",children:n>0?(0,m.jsxs)(m.Fragment,{children:["Showing ",Number.isNaN(p)?0:p," to"," ",Number.isNaN(h)?0:h," of"," ",Number.isNaN(n)?0:n," results"]}):"0 results"}),(0,m.jsxs)("div",{children:[(0,m.jsx)(t.zxk,{disabled:s<=1,onClick:d,mr:2,size:"sm",children:"Previous"}),(0,m.jsx)(t.zxk,{disabled:s*l>=n,onClick:u,size:"sm",children:"Next"})]})]})]})};w.defaultProps={users:[]};var C=w,P=n(79894),T=n.n(P),S=n(44845);function E(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}var k=function(){var e=(0,o.v9)(c.lq),r=(0,o.I0)();return function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?E(Object(n),!0).forEach((function(r){(0,s.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({handleSearchChange:function(e){r((0,c.SY)(e))}},e)},_=function(){var e=k(),r=e.handleSearchChange,n=e.username;return(0,m.jsxs)(t.Kqy,{direction:"row",spacing:4,mb:6,children:[(0,m.jsx)(S.Z,{search:n,onChange:r,placeholder:"Search by Username"}),(0,m.jsx)(h.ZP,{scopes:[j.Sh.USER_CREATE],children:(0,m.jsx)(T(),{href:"".concat(p.e3,"/new"),passHref:!0,children:(0,m.jsx)(t.zxk,{colorScheme:"primary",flexShrink:0,size:"sm","data-testid":"add-new-user-btn",children:"Add New User"})})})]})},D=n(51471),Z=function(){return(0,m.jsxs)(D.Z,{title:"User Management",children:[(0,m.jsx)(t.X6q,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:"User Management"}),(0,m.jsx)(_,{}),(0,m.jsx)(C,{})]})}},7873:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return n(99089)}])}},function(e){e.O(0,[2160,338,3702,9774,2888,179],(function(){return r=7873,e(e.s=r);var r}));var r=e.O();_N_E=r}]);