(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4446],{57595:function(e,t,r){"use strict";var n=r(90849),i=r(28841),o=r(24246);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,o.jsx)(i.rUS,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isExternal:!0,color:"complimentary.500"},e))}},86054:function(e,t,r){"use strict";var n=r(90849),i=r(90089),o=r(28841),s=r(38687),c=r(24246),a=["title","tooltip","children"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.title,r=e.tooltip,n=e.children,u=(0,i.Z)(e,a);return(0,c.jsxs)(o.xuv,l(l({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},u),{},{children:[(0,c.jsxs)(o.X6q,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,r?(0,c.jsx)(o.xvT,{as:"span",mx:1,children:(0,c.jsx)(s.Z,{label:r})}):void 0]}),(0,c.jsx)(o.Kqy,{p:6,spacing:6,children:n})]}))}},24753:function(e,t,r){"use strict";r.d(t,{MA:function(){return l},Vo:function(){return p},t5:function(){return d}});var n=r(90849),i=r(28841),o=r(24246);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var a=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.children;return(0,o.jsxs)(i.xvT,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,o.jsx)(a,{children:e});return c(c({},l),{description:t})},p=function(e){var t=(0,o.jsx)(u,{children:e});return c(c({},l),{description:t,status:"error"})}},15807:function(e,t,r){"use strict";r.r(t);var n=r(90849),i=r(55732),o=r(97865),s=r(34707),c=r.n(s),a=r(28841),u=r(34090),l=r(14633),d=r(6848),p=r(57595),f=r(86054),m=r(43139),h=r(78624),g=r(51471),b=r(24753),j=r(51365),x=r(24246);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.default=function(){var e,t=(0,j.tB)({api_set:!0}).isLoading,r=(0,j.tB)({api_set:!1}).isLoading,n=(0,d.C)(j.ak),s=n.apiSet,v=n.configSet,O=!!(null!==(e=v.cors_origins)&&void 0!==e&&e.length||v.cors_origin_regex),w=(0,d.C)((0,j.U7)()),_=(0,j.km)(),P=(0,o.Z)(_,2),D=P[0],k=P[1].isLoading,C=(0,a.pmc)(),S=l.Ry().shape({cors_origins:l.IX().nullable().of(l.Z_().required().trim().test("is-valid-url",(function(e){var t=e.label;return"".concat(t," must be a valid URL (e.g. https://example.com)")}),(function(e){return function(e){if(!e||!e.startsWith("https://")&&!e.startsWith("http://"))return!1;try{new URL(e)}catch(t){return!1}return!0}(e)})).test("has-no-wildcard",(function(e){var t=e.label;return"".concat(t," cannot contain a wildcard (e.g. https://*.example.com)")}),(function(e){return function(e){return!!e&&!e.includes("*")}(e)})).test("has-no-path",(function(e){var t=e.label;return"".concat(t," cannot contain a path (e.g. https://example.com/path)")}),(function(e){return function(e){if(!e)return!1;try{return"/"===new URL(e).pathname&&!e.endsWith("/")}catch(t){return!1}}(e)})).label("Domain"))}),E=function(){var e=(0,i.Z)(c().mark((function e(t,r){var n,i,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){if(C.closeAll(),(0,h.D4)(e)){var n=(0,h.e$)(e.error,"An unexpected error occurred while saving domains. Please try again.");C((0,b.Vo)(n))}else C((0,b.t5)("Domains saved successfully")),r.resetForm({values:t})},i=t.cors_origins&&t.cors_origins.length>0?t.cors_origins:void 0,o=y(y({},w),{},{security:{cors_origins:i}}),e.next=5,D(o);case 5:s=e.sent,n(s);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,x.jsx)(g.Z,{title:"Domains",children:(0,x.jsxs)(a.xuv,{"data-testid":"management-domains",children:[(0,x.jsx)(a.X6q,{marginBottom:4,fontSize:"2xl",children:"Domains"}),(0,x.jsx)(a.xuv,{maxWidth:"600px",children:(0,x.jsxs)(a.xvT,{marginBottom:3,fontSize:"sm",children:["For Fides to work on your website(s), each of your domains must be listed below. You can add and remove domains at any time up to the quantity included in your license. For more information on managing domains"," ",(0,x.jsx)(p.Z,{href:"https://fid.es/domain-configuration",children:"read here"}),"."]})}),(0,x.jsx)(a.xuv,{maxW:"600px",paddingY:3,children:(0,x.jsx)(f.Z,{"data-testid":"api-set-domains-form",title:"Organization domains",tooltip:"Fides uses these domains to enforce cross-origin resource sharing (CORS), a browser-based security standard. Each domain must be a valid URL (e.g. https://example.com) without any wildcards '*' or paths '/blog'",children:t||k?(0,x.jsx)(a.kCb,{justifyContent:"center",children:(0,x.jsx)(a.$jN,{})}):(0,x.jsx)(u.J9,{initialValues:s,enableReinitialize:!0,onSubmit:E,validationSchema:S,validateOnChange:!0,children:function(e){var t=e.dirty,r=e.values,n=e.isValid;return(0,x.jsxs)(u.l0,{children:[(0,x.jsx)(u.F2,{name:"cors_origins",render:function(e){return(0,x.jsxs)(a.kCb,{flexDir:"column",children:[r.cors_origins.map((function(t,r){return(0,x.jsxs)(a.kCb,{flexDir:"row",my:3,children:[(0,x.jsx)(m.j0,{variant:"stacked",name:"cors_origins[".concat(r,"]"),placeholder:"https://subdomain.example.com:9090"}),(0,x.jsx)(a.hU,{ml:8,"aria-label":"delete-domain",variant:"outline",zIndex:2,size:"sm",onClick:function(){e.remove(r)},children:(0,x.jsx)(a.pJl,{})})]},r)})),(0,x.jsx)(a.kCb,{justifyContent:"center",mt:3,children:(0,x.jsx)(a.zxk,{"aria-label":"add-domain",width:"100%",variant:"outline",size:"sm",onClick:function(){e.push("")},children:"Add domain"})})]})}}),(0,x.jsx)(a.xuv,{mt:6,children:(0,x.jsx)(a.zxk,{type:"submit",variant:"primary",size:"sm",isDisabled:k||!t||!n,isLoading:k,"data-testid":"save-btn",children:"Save"})})]})}})})}),(0,x.jsx)(a.xuv,{maxW:"600px",marginY:3,children:(0,x.jsx)(f.Z,{"data-testid":"config-set-domains-form",title:"Advanced settings",tooltip:"These domains are configured by an administrator with access to Fides security settings and can support more advanced options such as wildcards and regex.",children:r?(0,x.jsx)(a.kCb,{justifyContent:"center",children:(0,x.jsx)(a.$jN,{})}):(0,x.jsxs)(a.kCb,{flexDir:"column",children:[v.cors_origins.map((function(e,t){return(0,x.jsx)(m.oi,{"data-testid":"input-config_cors_origins[".concat(t,"]"),marginY:3,value:e,isDisabled:!0,isPassword:!1},t)})),v.cors_origin_regex?(0,x.jsx)(m.oi,{"data-testid":"input-config_cors_origin_regex",marginY:3,value:v.cors_origin_regex,isDisabled:!0,isPassword:!1},"cors_origin_regex"):void 0,O?void 0:(0,x.jsx)(a.xvT,{fontSize:"xs",color:"gray.500",children:"No advanced domain settings configured."})]})})})]})})}},17538:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/domains",function(){return r(15807)}])}},function(e){e.O(0,[2160,338,3702,9774,2888,179],(function(){return t=17538,e(e.s=t);var t}));var t=e.O();_N_E=t}]);