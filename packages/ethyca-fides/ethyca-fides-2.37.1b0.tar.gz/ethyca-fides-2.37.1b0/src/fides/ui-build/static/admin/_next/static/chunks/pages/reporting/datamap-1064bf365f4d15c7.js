(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9196],{52261:function(e,t,n){"use strict";var r=n(90849),a=n(73679),s=n(90089),i=n(28841),o=n(27378),c=n(24246),u=["nodes","selected","onSelected"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.split("."),n=[];return t.forEach((function(e){var t=n.length>0?n[n.length-1]:null;t?n.push("".concat(t,".").concat(e)):n.push(e)})),n},_=function(e,t){return e===t||!!e.startsWith("".concat(t,"."))},p=function e(t,n,r){var a=null!==r&&void 0!==r?r:[];return t.forEach((function(t){t.children&&e(t.children,n,a),_(t.value,n)&&a.push(t)})),a},g=function(e){var t=e.node,n=e.isChecked,r=e.onChecked,a=e.isExpanded,s=e.onExpanded,o=e.isIndeterminate,u=e.isDisabled,l=e.children,d=t.value,f=t.label,_=!!t.children&&t.children.length>0;return(0,c.jsxs)(i.xuv,{children:[(0,c.jsxs)(i.xuv,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:function(){return s(t)},minHeight:8,children:[(0,c.jsx)(i.XZJ,{colorScheme:"complimentary",value:d,isChecked:!o&&n,isIndeterminate:o,isDisabled:u,onChange:function(){return r(t)},mx:2,"data-testid":"checkbox-".concat(f),children:f}),_?(0,c.jsx)(i.hU,{"data-testid":"expand-".concat(f),"aria-label":a?"collapse":"expand",icon:(0,c.jsx)(i.v4q,{boxSize:5}),variant:"ghost",onClick:function(){return s(t)},size:"sm",style:{transform:a?"rotate(180deg)":""}}):null]}),l&&(0,c.jsx)(i.xuv,{ml:5,children:l})]})};t.ZP=function(e){var t=e.nodes,n=e.selected,r=e.onSelected,l=(0,s.Z)(e,u),x=(0,o.useState)([]),S=x[0],E=x[1],h=(0,o.useState)([]),j=h[0],v=h[1];(0,o.useEffect)((function(){var e=n.map((function(e){return f(e)})).reduce((function(e,t){return e.concat(t)}),[]),r=n.map((function(e){return p(t,e)})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.value})),s=Array.from(new Set([].concat((0,a.Z)(e),(0,a.Z)(r))));v(s),E(s)}),[n,t]);var m=function(e){var s=[],i=[];if(S.indexOf(e.value)>=0)s=S.filter((function(t){return!_(t,e.value)})),i=n.filter((function(t){return!_(t,e.value)}));else{var o=p(t,e.value).map((function(e){return e.value}));s=[].concat((0,a.Z)(S),(0,a.Z)(o)),i=[].concat((0,a.Z)(n),[e.value])}E(s),r(i)},O=function(e){j.indexOf(e.value)>=0?v(j.filter((function(t){return!_(t,e.value)}))):v([].concat((0,a.Z)(j),[e.value]))},T=function e(r){if(r.children){var a=S.indexOf(r.value)>=0,s=j.indexOf(r.value)>=0,i=p(t,r.value),u=a&&r.children.length>0&&S.filter((function(e){return e.startsWith("".concat(r.value,"."))})).length+1!==i.length,l=function(e,t){var n=f(t).filter((function(e){return e!==t}));return e.filter((function(e){return n.includes(e)})).length>0}(n,r.value);return(0,c.jsx)(g,{node:r,isChecked:a,onChecked:m,isExpanded:s,onExpanded:O,isDisabled:l,isIndeterminate:u,children:s&&r.children.map((function(t){return(0,c.jsx)(o.Fragment,{children:e(t)},t.value)}))})}return null};return(0,c.jsx)(i.xuv,d(d({},l),{},{children:t.map((function(e){return(0,c.jsx)(i.xuv,{children:T(e)},e.value)}))}))}},68512:function(e,t,n){"use strict";var r=n(90849),a=n(28841),s=n(88038),i=n.n(s),o=(n(27378),n(24246));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.children,n=e.title,r=e.mainProps;return(0,o.jsxs)(a.kCb,{"data-testid":n,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 200px)",children:[(0,o.jsxs)(i(),{children:[(0,o.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,o.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)(a.kCb,u(u({pt:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0},r),{},{children:t}))]})}},28171:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(90849),a=n(90089),s=n(28841),i=n(98784),o=n(27378),c=n(79894),u=n.n(c),l=n(24246),d=function(e){var t=e.breadcrumbs;return(0,l.jsx)(s.aGc,{separator:"->",fontSize:"2xl",fontWeight:"semibold","data-testid":"breadcrumbs",children:t.map((function(e,n){var r=n+1===t.length,a=!!e.link||!!e.onClick;return(0,l.jsx)(s.gN6,{color:r||e.isOpaque?"black":"gray.500",children:a?(0,l.jsx)(s.Atw,{as:u(),href:e.link,isCurrentPage:r,children:e.title}):(0,l.jsx)(s.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:r,children:e.title})},e.title)}))})},f=["breadcrumbs","isSticky","children"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.breadcrumbs,n=e.isSticky,r=void 0===n||n,c=e.children,u=(0,a.Z)(e,f);return(0,l.jsxs)(s.xuv,p(p(p({bgColor:"white",paddingY:5},r?{position:"sticky",top:0,left:0,zIndex:10}:{}),u),{},{children:[(0,i.isArray)(t)&&(0,l.jsx)(s.xuv,{marginBottom:c?4:0,children:(0,l.jsx)(d,{breadcrumbs:t})}),(0,o.isValidElement)(t)&&t,c]}))}},12467:function(e,t,n){"use strict";var r=n(98784),a=n(6848),s=n(47134),i=n(75846),o=n(75523),c=n(24246),u=function(){var e=(0,i.fd)().isLoading,t=(0,a.C)(i.U3),n=(0,o.MO)().isLoading,r=(0,a.C)(o.qb),c=(0,s.te)().isLoading;return{dataUses:t,dataSubjects:(0,a.C)(s.ZL),dataCategories:r,isLoading:e||n||c}};t.Z=function(){var e=u(),t=e.dataUses,n=e.dataCategories,a=e.dataSubjects,s=e.isLoading,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=".",r=e.split(n).slice(0,t);return r.join(n)},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t(e);if(!r)return e;var a=t(i(e,n)),s=!!r.parent_key;return s&&(null===a||void 0===a?void 0:a.name)!==r.name?(0,c.jsxs)("span",{children:[(0,c.jsxs)("strong",{children:[null===a||void 0===a?void 0:a.name,":"]})," ",r.name]},e):(0,c.jsx)("strong",{children:r.name},e)},l=function(e){return(0,r.find)(t,{fides_key:e})},d=function(e){return(0,r.find)(n,{fides_key:e})},f=function(e){return(0,r.find)(a,{fides_key:e})};return{getDataUses:function(){return t},getDataUseByKey:l,getDataUseDisplayName:function(e){return o(e,l,1)},getDataCategories:function(){return n},getDataCategoryByKey:d,getDataCategoryDisplayName:function(e){return o(e,d,2)},getDataSubjects:function(){return a},getDataSubjectByKey:f,getDataSubjectDisplayName:function(e){var t=f(e);return t?t.name:e},getPrimaryKey:i,isLoading:s}}},64929:function(e,t,n){"use strict";n.d(t,{C:function(){return r},P:function(){return a}});var r=function e(t,n){var r;if(null==n&&t.every((function(e){return void 0===e.parent_key})))r=t;else{var a=null!==n&&void 0!==n?n:null;r=t.filter((function(e){return e.parent_key===a}))}return r.map((function(n){var r,a,s=n.fides_key;return{value:n.fides_key,label:""===n.name||null==n.name?n.fides_key:n.name,description:n.description,children:e(t,s),is_default:null!==(r=n.is_default)&&void 0!==r&&r,active:null!==(a=n.active)&&void 0!==a&&a}}))},a=function(e){var t=e.split(".");return 1===t.length?"":t.slice(0,t.length-1).join(".")}},84802:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(27378),a=n(68512),s=n(28171),i=n(73679),o=n(90849),c=n(97865),u=n(92222),l=n(59003),d=n(55162),f=n(28841),_=n(98784),p=n.n(_),g=n(6848),x=n(81719),S=n(12467),E=n(91728),h=n(1326),j=n(14221),v=n(61561),m=n(90089),O=n(24246),T=["children","heading","onCancel","onConfirm","isLoading","cancelButtonText","cancelButtonThemingProps","continueButtonText","continueButtonThemingProps","data-testid"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.children,n=e.heading,r=e.onCancel,a=e.onConfirm,s=e.isLoading,i=e.cancelButtonText,o=e.cancelButtonThemingProps,c=e.continueButtonText,u=(e.continueButtonThemingProps,e["data-testid"]),l=void 0===u?"standard-dialog":u,d=(0,m.Z)(e,T),_=d.onClose;return(0,O.jsxs)(f.u_l,y(y({closeOnOverlayClick:s},d),{},{children:[(0,O.jsx)(f.ZAr,{}),(0,O.jsxs)(f.hzk,{"data-testid":l,children:[n&&(0,O.jsx)(f.xBx,{children:n}),(0,O.jsx)(f.olH,{disabled:s}),t&&(0,O.jsx)(f.fef,{children:t}),(0,O.jsxs)(f.mzw,{gap:3,width:"100%",sx:{"& button":{width:"100%"}},children:[(0,O.jsx)(f.zxk,y(y({variant:"outline",onClick:function(){r&&r(),_()},"data-testid":"".concat(l?"".concat(l,"-"):"","cancel-btn"),isDisabled:s},o),{},{children:i||"Cancel"})),(0,O.jsx)(f.zxk,y(y({colorScheme:"primary",onClick:a,"data-testid":"".concat(l?"".concat(l,"-"):"","continue-btn"),isLoading:s},o),{},{children:c||"Continue"}))]})]})]}))};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t=(0,r.useState)(j.T2.csv),n=t[0],a=t[1],s=e.onConfirm;return(0,O.jsx)(b,D(D({heading:"Export report",continueButtonText:"Download",size:"xl"},e),{},{onConfirm:function(){return s(n)},"data-testid":"export-modal",children:(0,O.jsxs)(f.kCb,{direction:"column",gap:3,pb:3,children:[(0,O.jsx)(f.xvT,{textAlign:"left",children:"Export your data map report using the options below. Depending on the number of rows, the file may take a few minutes to process."}),(0,O.jsxs)(f.NIc,{children:[(0,O.jsx)(f.lXp,{children:"Choose Format"}),(0,O.jsxs)(f.PhF,{value:n,onChange:function(e){return a(e.target.value)},"data-testid":"export-format-select",children:[(0,O.jsx)("option",{value:j.T2.csv,children:"CSV"}),(0,O.jsx)("option",{value:j.T2.xlsx,children:"XLSX"})]})]})]})}))},P=n(52261),I=n(47134),N=n(75846),L=n(64929),w=n(10612),k=["label","children"],G=["onClose","onFilterChange"];function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){var t=e.label,n=e.children,r=(0,m.Z)(e,k);return(0,O.jsxs)(f.Qdk,U(U({},r),{},{children:[(0,O.jsx)(f.X6q,{children:(0,O.jsxs)(f.KFZ,{height:"100%","data-testid":"filter-modal-accordion-button",textAlign:"left",fontWeight:600,children:[(0,O.jsx)(f.xuv,{flex:1,children:t}),(0,O.jsx)(f.XEm,{boxSize:7})]})}),(0,O.jsx)(f.Hk3,{children:n})]}))},V=function(e){var t=e.onClose,n=e.onFilterChange,a=(0,m.Z)(e,G);(0,N.fd)(),(0,I.te)(),(0,w.MO)();var s=(0,g.C)(N.U3),i=(0,g.C)(I.ZL),o=(0,g.C)(w.qb),c=(0,r.useState)([]),u=c[0],l=c[1],d=(0,r.useState)([]),_=d[0],p=d[1],x=(0,r.useState)([]),S=x[0],E=x[1],h=(0,r.useMemo)((function(){return(0,L.C)(s)}),[s]),j=(0,r.useMemo)((function(){return(0,L.C)(i)}),[i]),v=(0,r.useMemo)((function(){return(0,L.C)(o)}),[o]);return(0,O.jsx)(b,U(U({heading:"Filter Datamap Report"},a),{},{onCancel:function(){l([]),p([]),E([]),n({dataUses:[],dataSubjects:[],dataCategories:[]}),t()},onConfirm:function(){n({dataUses:u,dataSubjects:_,dataCategories:S}),t()},onClose:t,cancelButtonText:"Reset filters",continueButtonText:"Done","data-testid":"datamap-report-filter-modal",children:(0,O.jsxs)(f.UQy,{allowToggle:!0,children:[(0,O.jsx)(F,{label:"Data uses",children:(0,O.jsx)(P.ZP,{nodes:h,selected:u,onSelected:l,"data-testid":"filter-modal-checkbox-tree-uses"})}),(0,O.jsx)(F,{label:"Data categories",children:(0,O.jsx)(P.ZP,{nodes:v,selected:S,onSelected:E,"data-testid":"filter-modal-checkbox-tree-categories"})}),(0,O.jsx)(F,{label:"Data subjects",children:(0,O.jsx)(P.ZP,{nodes:j,selected:_,onSelected:p,"data-testid":"filter-modal-checkbox-tree-subjects"})})]})}))},Y=n(44047),Z=n(288);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z,W=(0,u.Cl)(),K={items:[],total:0,page:1,size:25,pages:1};!function(e){e.SYSTEM_NAME="system_name",e.DATA_USE="data_use",e.DATA_CATEGORY="data_categories",e.DATA_SUBJECT="data_subjects",e.LEGAL_NAME="legal_name",e.DPO="dpo",e.LEGAL_BASIS_FOR_PROCESSING="legal_basis_for_processing",e.ADMINISTRATING_DEPARTMENT="administrating_department",e.COOKIE_MAX_AGE_SECONDS="cookie_max_age_seconds",e.PRIVACY_POLICY="privacy_policy",e.LEGAL_ADDRESS="legal_address",e.COOKIE_REFRESH="cookie_refresh",e.DATA_SECURITY_PRACTICES="data_security_practices",e.DATA_SHARED_WITH_THIRD_PARTIES="DATA_SHARED_WITH_THIRD_PARTIES",e.DATA_STEWARDS="data_stewards",e.DECLARATION_NAME="declaration_name",e.DESCRIPTION="description",e.DOES_INTERNATIONAL_TRANSFERS="does_international_transfers",e.DPA_LOCATION="dpa_location",e.EGRESS="egress",e.EXEMPT_FROM_PRIVACY_REGULATIONS="exempt_from_privacy_regulations",e.FEATURES="features",e.FIDES_KEY="fides_key",e.FLEXIBLE_LEGAL_BASIS_FOR_PROCESSING="flexible_legal_basis_for_processing",e.IMPACT_ASSESSMENT_LOCATION="impact_assessment_location",e.INGRESS="ingress",e.JOINT_CONTROLLER_INFO="joint_controller_info",e.LEGAL_BASIS_FOR_PROFILING="legal_basis_for_profiling",e.LEGAL_BASIS_FOR_TRANSFERS="legal_basis_for_transfers",e.LEGITIMATE_INTEREST_DISCLOSURE_URL="legitimate_interest_disclosure_url",e.LINK_TO_PROCESSOR_CONTRACT="link_to_processor_contract",e.PROCESSES_PERSONAL_DATA="processes_personal_data",e.REASON_FOR_EXEMPTION="reason_for_exemption",e.REQUIRES_DATA_PROTECTION_ASSESSMENTS="requires_data_protection_assessments",e.RESPONSIBILITY="responsibility",e.RETENTION_PERIOD="retention_period",e.SHARED_CATEGORIES="shared_categories",e.SPECIAL_CATEGORY_LEGAL_BASIS="special_category_legal_basis",e.SYSTEM_DEPENDENCIES="system_dependencies",e.THIRD_COUNTRY_SAFEGUARDS="third_country_safeguards",e.THIRD_PARTIES="third_parties",e.USES_COOKIES="uses_cookies",e.USES_NON_COOKIE_ACCESS="uses_non_cookie_access",e.USES_PROFILING="uses_profiling",e.SYSTEM_UNDECLARED_DATA_CATEGORIES="system_undeclared_data_categories",e.DATA_USE_UNDECLARED_DATA_CATEGORIES="data_use_undeclared_data_categories"}(z||(z={}));var X=function(e){var t=[];switch(e){case Z.fI.SYSTEM_DATA_USE:t=[z.SYSTEM_NAME];break;case Z.fI.DATA_USE_SYSTEM:t=[z.DATA_USE];break;default:t=[z.SYSTEM_NAME]}return t},q=function(e){var t=[];return Z.fI.SYSTEM_DATA_USE===e&&(t=[z.SYSTEM_NAME,z.DATA_USE]),Z.fI.DATA_USE_SYSTEM===e&&(t=[z.DATA_USE,z.SYSTEM_NAME]),t},J=function(){var e,t=(0,x._)("datamap-report-table-state",void 0),n=(0,c.Z)(t,2),a=n[0],s=n[1],m=(0,r.useMemo)((function(){return a}),[]),T=(0,Y.x8)().isLoading,A=(0,d.oi)(),y=A.PAGE_SIZES,b=A.pageSize,R=A.setPageSize,D=A.onPreviousPageClick,P=A.isPreviousPageDisabled,I=A.onNextPageClick,N=A.isNextPageDisabled,L=A.startRange,w=A.endRange,k=A.pageIndex,G=A.setTotalPages,M=A.resetPageIndexToDefault,U=(0,f.qY0)(),F=U.isOpen,B=U.onClose,J=U.onOpen,Q=(0,S.Z)(),$=Q.getDataUseDisplayName,ee=Q.getDataCategoryDisplayName,te=Q.getDataSubjectDisplayName,ne=Q.isLoading,re=(0,r.useState)(),ae=re[0],se=re[1],ie=(0,r.useState)(),oe=ie[0],ce=ie[1],ue=(0,r.useState)(),le=ue[0],de=ue[1],fe=(0,r.useState)(!1),_e=fe[0],pe=fe[1],ge=(0,r.useState)(""),xe=ge[0],Se=ge[1],Ee=(0,x._)(j.Pn.GROUP_BY,Z.fI.SYSTEM_DATA_USE),he=(0,c.Z)(Ee,2),je=he[0],ve=he[1],me=(0,x._)(j.Pn.COLUMN_ORDER,function(e){var t=[];return Z.fI.SYSTEM_DATA_USE===e&&(t=[z.SYSTEM_NAME,z.DATA_USE,z.DATA_CATEGORY,z.DATA_SUBJECT]),Z.fI.DATA_USE_SYSTEM===e&&(t=[z.DATA_USE,z.SYSTEM_NAME,z.DATA_CATEGORY,z.DATA_SUBJECT]),t}(je)),Oe=(0,c.Z)(me,2),Te=Oe[0],Ae=Oe[1],ye=(0,x._)(j.Pn.TABLE_GROUPING,X(je)),be=(0,c.Z)(ye,2),Re=be[0],De=be[1],Ce=function(e){ve(e),pe(!0),M()},Pe=(0,v.tH)({pageIndex:k,pageSize:b,groupBy:je,search:xe,dataUses:ae,dataSubjects:le,dataCategories:oe}),Ie=Pe.data,Ne=Pe.isLoading,Le=Pe.isFetching,we=(0,v.Eo)(),ke=(0,c.Z)(we,2),Ge=ke[0],Me=ke[1],Ue=Me.isLoading,Fe=Me.isSuccess,Ve=(0,r.useMemo)((function(){var e=Ie||K,t=e.items;return _e&&pe(!1),G(e.pages),{totalRows:e.total,data:t}}),[Ie]),Ye=Ve.data,Ze=Ve.totalRows;(0,r.useEffect)((function(){var e=X(je);Ie&&De(e)}),[Ie]),(0,Y.GH)();var Be=(0,g.C)(Y.fN),He=(0,r.useMemo)((function(){var e,t=null!==Ie&&void 0!==Ie&&null!==(e=Ie.items)&&void 0!==e&&e.length?Object.keys(Ie.items[0]):[],n=Object.values(z);return t.filter((function(e){return!n.includes(e)})).filter((function(e){return e.startsWith("privacy_declaration_")||e.startsWith("system_")})).map((function(e){var t=Be.find((function(t){return e.includes(p().snakeCase(t.name))})),n=e.replace(/^(system_|privacy_declaration_)/,""),r=p().upperFirst(n.replaceAll("_"," "));return W.accessor((function(t){return t[e]}),{id:e,cell:function(e){return Array.isArray(e.getValue())?(0,O.jsx)(d.WP,H({value:e.getValue()},e)):(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:r},e))},meta:{displayText:r,showHeaderMenu:"string[]"===(null===t||void 0===t?void 0:t.field_type)}})}))}),[Ie,Be]),ze=(0,r.useMemo)((function(){return[W.accessor((function(e){return e.system_name}),{enableGrouping:!0,id:z.SYSTEM_NAME,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"System"},e))},meta:{displayText:"System"}}),W.accessor((function(e){return e.data_uses}),{id:z.DATA_USE,cell:function(e){var t=e.getValue();return(0,O.jsx)(d.WP,H({suffix:"data uses",value:(0,_.isArray)(t)?(0,_.map)(t,$):$(t||"")},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data use"},e))},meta:{displayText:"Data use"}}),W.accessor((function(e){return e.data_categories}),{id:z.DATA_CATEGORY,cell:function(e){var t=e.getValue();return(0,O.jsx)(d.WP,H({suffix:"data categories",value:(0,_.isArray)(t)?(0,_.map)(t,ee):ee(t||"")},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data categories"},e))},meta:{displayText:"Data categories",showHeaderMenu:!0}}),W.accessor((function(e){return e.data_subjects}),{id:z.DATA_SUBJECT,cell:function(e){var t=e.getValue();return(0,O.jsx)(d.WP,H({suffix:"data subjects",value:(0,_.isArray)(t)?(0,_.map)(t,te):te(t||"")},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data subject"},e))},meta:{displayText:"Data subject",showHeaderMenu:!0}}),W.accessor((function(e){return e.legal_name}),{id:z.LEGAL_NAME,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Legal name"},e))},meta:{displayText:"Legal name"}}),W.accessor((function(e){return e.dpo}),{id:z.DPO,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data privacy officer"},e))},meta:{displayText:"Data privacy officer"}}),W.accessor((function(e){return e.legal_basis_for_processing}),{id:z.LEGAL_BASIS_FOR_PROCESSING,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Legal basis for processing"},e))},meta:{displayText:"Legal basis for processing"}}),W.accessor((function(e){return e.administrating_department}),{id:z.ADMINISTRATING_DEPARTMENT,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Administrating department"},e))},meta:{displayText:"Administrating department"}}),W.accessor((function(e){return e.cookie_max_age_seconds}),{id:z.COOKIE_MAX_AGE_SECONDS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Cookie max age seconds"},e))},meta:{displayText:"Cookie max age seconds"}}),W.accessor((function(e){return e.privacy_policy}),{id:z.PRIVACY_POLICY,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Privacy policy"},e))},meta:{displayText:"Privacy policy"}}),W.accessor((function(e){return e.legal_address}),{id:z.LEGAL_ADDRESS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Legal address"},e))},meta:{displayText:"Legal address"}}),W.accessor((function(e){return e.cookie_refresh}),{id:z.COOKIE_REFRESH,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,{value:"Cookie refresh",table:e.table,header:e.header,column:e.column})},meta:{displayText:"Cookie refresh"}}),W.accessor((function(e){return e.data_security_practices}),{id:z.DATA_SECURITY_PRACTICES,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data security practices"},e))},meta:{displayText:"Data security practices"}}),W.accessor((function(e){return e.data_shared_with_third_parties}),{id:z.DATA_SHARED_WITH_THIRD_PARTIES,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data shared with third parties"},e))},meta:{displayText:"Data shared with third parties"}}),W.accessor((function(e){return e.data_stewards}),{id:z.DATA_STEWARDS,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"data stewards",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data stewards"},e))},meta:{displayText:"Data stewards",showHeaderMenu:!0}}),W.accessor((function(e){return e.declaration_name}),{id:z.DECLARATION_NAME,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Declaration name"},e))},meta:{displayText:"Declaration name"}}),W.accessor((function(e){return e.does_international_transfers}),{id:z.DOES_INTERNATIONAL_TRANSFERS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Does international transfers"},e))},meta:{displayText:"Does international transfers"}}),W.accessor((function(e){return e.dpa_location}),{id:z.DPA_LOCATION,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"DPA Location"},e))},meta:{displayText:"DPA Location"}}),W.accessor((function(e){return e.egress}),{id:z.EGRESS,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"egress",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Egress"},e))},meta:{displayText:"Egress",showHeaderMenu:!0}}),W.accessor((function(e){return e.exempt_from_privacy_regulations}),{id:z.EXEMPT_FROM_PRIVACY_REGULATIONS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Exempt from privacy regulations"},e))},meta:{displayText:"Exempt from privacy regulations"}}),W.accessor((function(e){return e.features}),{id:z.FEATURES,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"features",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Features"},e))},meta:{displayText:"Features",showHeaderMenu:!0}}),W.accessor((function(e){return e.fides_key}),{id:z.FIDES_KEY,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Fides key"},e))},meta:{displayText:"Fides key"}}),W.accessor((function(e){return e.flexible_legal_basis_for_processing}),{id:z.FLEXIBLE_LEGAL_BASIS_FOR_PROCESSING,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Flexible legal basis for processing"},e))},meta:{displayText:"Flexible legal basis for processing"}}),W.accessor((function(e){return e.impact_assessment_location}),{id:z.IMPACT_ASSESSMENT_LOCATION,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Impact assessment location"},e))},meta:{displayText:"Impact assessment location"}}),W.accessor((function(e){return e.ingress}),{id:z.INGRESS,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"ingress",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Ingress"},e))},meta:{displayText:"Ingress",showHeaderMenu:!0}}),W.accessor((function(e){return e.joint_controller_info}),{id:z.JOINT_CONTROLLER_INFO,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Joint controller info"},e))},meta:{displayText:"Joint controller info"}}),W.accessor((function(e){return e.legal_basis_for_profiling}),{id:z.LEGAL_BASIS_FOR_PROFILING,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"profiles",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Legal basis for profiling"},e))},meta:{displayText:"Legal basis for profiling",showHeaderMenu:!0}}),W.accessor((function(e){return e.legal_basis_for_transfers}),{id:z.LEGAL_BASIS_FOR_TRANSFERS,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"transfers",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Legal basis for transfers"},e))},meta:{displayText:"Legal basis for transfers",showHeaderMenu:!0}}),W.accessor((function(e){return e.legitimate_interest_disclosure_url}),{id:z.LEGITIMATE_INTEREST_DISCLOSURE_URL,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Legitimate interest disclosure url"},e))},meta:{displayText:"Legitimate interest disclosure url"}}),W.accessor((function(e){return e.link_to_processor_contract}),{id:z.LINK_TO_PROCESSOR_CONTRACT,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Link to processor contract"},e))},meta:{displayText:"Link to processor contract"}}),W.accessor((function(e){return e.processes_personal_data}),{id:z.PROCESSES_PERSONAL_DATA,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Processes personal data"},e))},meta:{displayText:"Processes personal data"}}),W.accessor((function(e){return e.reason_for_exemption}),{id:z.REASON_FOR_EXEMPTION,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Reason for exemption"},e))},meta:{displayText:"Reason for exemption"}}),W.accessor((function(e){return e.requires_data_protection_assessments}),{id:z.REQUIRES_DATA_PROTECTION_ASSESSMENTS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Requires data protection assessments"},e))},meta:{displayText:"Requires data protection assessments"}}),W.accessor((function(e){return e.responsibility}),{id:z.RESPONSIBILITY,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"responsibilitlies",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Responsibility"},e))},meta:{displayText:"Responsibility",showHeaderMenu:!0}}),W.accessor((function(e){return e.retention_period}),{id:z.RETENTION_PERIOD,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Retention period"},e))},meta:{displayText:"Retention period"}}),W.accessor((function(e){return e.shared_categories}),{id:z.SHARED_CATEGORIES,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"shared categories",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Shared categories"},e))},meta:{displayText:"Shared categories",showHeaderMenu:!0}}),W.accessor((function(e){return e.special_category_legal_basis}),{id:z.SPECIAL_CATEGORY_LEGAL_BASIS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Special category legal basis"},e))},meta:{displayText:"Special category legal basis"}}),W.accessor((function(e){return e.system_dependencies}),{id:z.SYSTEM_DEPENDENCIES,cell:function(e){return(0,O.jsx)(d.WP,H({suffix:"dependencies",value:e.getValue()},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"System dependencies"},e))},meta:{displayText:"System dependencies",showHeaderMenu:!0}}),W.accessor((function(e){return e.third_country_safeguards}),{id:z.THIRD_COUNTRY_SAFEGUARDS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Third country safeguards"},e))},meta:{displayText:"Third country safeguards"}}),W.accessor((function(e){return e.third_parties}),{id:z.THIRD_PARTIES,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Third parties"},e))},meta:{displayText:"Third parties"}}),W.accessor((function(e){return e.system_undeclared_data_categories}),{id:z.SYSTEM_UNDECLARED_DATA_CATEGORIES,cell:function(e){var t=e.getValue();return(0,O.jsx)(d.WP,H({suffix:"system undeclared data categories",value:(0,_.isArray)(t)?(0,_.map)(t,ee):ee(t||"")},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"System undeclared data categories"},e))},meta:{displayText:"System undeclared data categories",showHeaderMenu:!0}}),W.accessor((function(e){return e.data_use_undeclared_data_categories}),{id:z.DATA_USE_UNDECLARED_DATA_CATEGORIES,cell:function(e){var t=e.getValue();return(0,O.jsx)(d.WP,H({suffix:"data use undeclared data categories",value:(0,_.isArray)(t)?(0,_.map)(t,ee):ee(t||"")},e))},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Data use undeclared data categories"},e))},meta:{displayText:"Data use undeclared data categories",showHeaderMenu:!0}}),W.accessor((function(e){return e.uses_cookies}),{id:z.USES_COOKIES,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Uses cookies"},e))},meta:{displayText:"Uses cookies"}}),W.accessor((function(e){return e.uses_non_cookie_access}),{id:z.USES_NON_COOKIE_ACCESS,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Uses non cookie access"},e))},meta:{displayText:"Uses non cookie access"}}),W.accessor((function(e){return e.uses_profiling}),{id:z.USES_PROFILING,cell:function(e){return(0,O.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,O.jsx)(d.Rr,H({value:"Uses profiling"},e))},meta:{displayText:"Uses profiling"}})].concat((0,i.Z)(He))}),[He,$,te,ee]),We=(0,f.qY0)(),Ke=We.isOpen,Xe=We.onOpen,qe=We.onClose,Je=(0,f.qY0)(),Qe=Je.isOpen,$e=Je.onOpen,et=Je.onClose,tt=(0,l.b7)({getCoreRowModel:(0,u.sC)(),getGroupedRowModel:(0,u.qe)(),getExpandedRowModel:(0,u.rV)(),columns:ze,manualPagination:!0,data:Ye,initialState:H({columnVisibility:(e={},(0,o.Z)(e,z.SYSTEM_UNDECLARED_DATA_CATEGORIES,!1),(0,o.Z)(e,z.DATA_USE_UNDECLARED_DATA_CATEGORIES,!1),e)},m),state:{expanded:!0,grouping:Re,columnOrder:Te},columnResizeMode:"onChange",enableColumnResizing:!0,onStateChange:function(e){var t=e instanceof Function?e(tt.getState()):e;s(t)}}),nt=function(){switch(je){case Z.fI.SYSTEM_DATA_USE:return"system";case Z.fI.DATA_USE_SYSTEM:return"data use";default:return"system"}};if(Ne||T||ne)return(0,O.jsx)(d.I4,{rowHeight:36,numRows:15});return(0,O.jsxs)(f.kCb,{flex:1,direction:"column",overflow:"auto",children:[(0,O.jsx)(V,{isOpen:F,onClose:B,onFilterChange:function(e){se((0,h.du)(e.dataUses,"data_uses")),ce((0,h.du)(e.dataCategories,"data_categories")),de((0,h.du)(e.dataSubjects,"data_subjects"))}}),(0,O.jsx)(d.F1,{isOpen:Ke,onClose:qe,headerText:"Data map settings",prefixColumns:q(je),tableInstance:tt,onColumnOrderChange:function(e){Ae(e)}}),(0,O.jsx)(C,{isOpen:Qe,onClose:et,onConfirm:function(e){Ge({pageIndex:k,pageSize:b,groupBy:je,search:xe,dataUses:ae,dataSubjects:le,dataCategories:oe,format:e}).then((function(){Fe&&et()}))},isLoading:Ue}),(0,O.jsxs)(d.Q$,{children:[(0,O.jsx)(d.HO,{globalFilter:xe,setGlobalFilter:function(e){M(),Se(e)},placeholder:"System name, Fides key, or ID"}),(0,O.jsxs)(f.kCb,{alignItems:"center",gap:2,children:[(0,O.jsxs)(f.v2r,{children:[(0,O.jsxs)(f.j2t,{as:f.zxk,size:"xs",variant:"outline",rightIcon:(0,O.jsx)(f.v4q,{}),spinnerPlacement:"end",isLoading:_e,loadingText:"Group by ".concat(nt()),"data-testid":"group-by-menu",children:["Group by ",nt()]}),(0,O.jsxs)(f.qyq,{zIndex:11,"data-testid":"group-by-menu-list",children:[(0,O.jsx)(f.iiZ,{onClick:function(){Ce(Z.fI.SYSTEM_DATA_USE)},isChecked:Z.fI.SYSTEM_DATA_USE===je,value:Z.fI.SYSTEM_DATA_USE,"data-testid":"group-by-system-data-use",children:"System"}),(0,O.jsx)(f.iiZ,{onClick:function(){Ce(Z.fI.DATA_USE_SYSTEM)},isChecked:Z.fI.DATA_USE_SYSTEM===je,value:Z.fI.DATA_USE_SYSTEM,"data-testid":"group-by-data-use-system",children:"Data use"})]})]}),(0,O.jsx)(f.zxk,{"data-testid":"edit-columns-btn",size:"xs",variant:"outline",onClick:Xe,children:"Edit columns"}),(0,O.jsx)(f.zxk,{"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",onClick:J,children:"Filter"}),(0,O.jsx)(f.hU,{"aria-label":"Export report","data-testid":"export-btn",size:"xs",variant:"outline",onClick:$e,icon:(0,O.jsx)(E.nM,{})})]})]}),(0,O.jsx)(d.ZK,{tableInstance:tt}),(0,O.jsx)(d.s8,{totalRows:Ze,pageSizes:y,setPageSize:R,onPreviousPageClick:D,isPreviousPageDisabled:P||Le,onNextPageClick:I,isNextPageDisabled:N||Le,startRange:L,endRange:w})]})},Q=function(){return(0,O.jsxs)(a.Z,{title:"Datamap Report",mainProps:{padding:"0 40px 24px"},children:[(0,O.jsx)(s.Z,{"data-testid":"datamap-report-heading",breadcrumbs:[{title:"Data map report"}]}),(0,O.jsx)(J,{})]})}},86548:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reporting/datamap",function(){return n(84802)}])},76649:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r},uX:function(){return i}});const r=(e,t)=>s(e,t),a=Symbol("SOME"),s=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return a in e?e.some((e=>s(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>s(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>s(t,n[e])))},i=e=>t=>r(e,t);class o{static narrow(e){return new o((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof o?e.NF:e instanceof Function?e:t=>r(e,t);return new o((e=>t(e)&&n(e)))}}new o((e=>!0))}},function(e){e.O(0,[8033,6936,1114,338,5162,9774,2888,179],(function(){return t=86548,e(e.s=t);var t}));var t=e.O();_N_E=t}]);