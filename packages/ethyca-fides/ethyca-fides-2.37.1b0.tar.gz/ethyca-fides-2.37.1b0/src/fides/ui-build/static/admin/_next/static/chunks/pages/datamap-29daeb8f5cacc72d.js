(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{66521:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(27378),i=n(24246),o=(0,r.createRef)(),s=(0,r.createContext)(o);t.Z=function(e){var t=e.children;return(0,i.jsx)(s.Provider,{value:o,children:t})}},76459:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(43350),i=n(80040),o=n(90849),s=n(27378),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),(0,o.Z)(this,"tableInstance",void 0),this.tableInstance=t,this.updateTableInstance=this.updateTableInstance.bind(this)}return(0,i.Z)(e,[{key:"updateTableInstance",value:function(e){this.tableInstance=e}}]),e}(),l=s.createContext(new a);t.Z=l},85249:function(e,t,n){"use strict";var r=n(28841),i=n(27378),o=n(60378),s=n(44845),a=n(24246);t.Z=function(e){var t=e.globalFilter,n=e.setGlobalFilter,l=e.placeholder,c=(0,i.useState)(t),u=c[0],d=c[1],p=(0,o.useAsyncDebounce)((function(e){n(e||void 0)}),200);return(0,a.jsx)(r.xuv,{maxWidth:"510px",width:"100%",children:(0,a.jsx)(s.Z,{onChange:function(e){d(e),p(e)},onClear:function(){d(void 0),n(void 0)},search:u||"",placeholder:l})})}},13955:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ot}});var r=n(27378),i=n(88486),o=n(51471),s=n(28841),a=n(65218),l=n.n(a),c=n(6848),u=n(90849),d=n(90089),p=n(89348),f=n(40397),h=n(73679),x=n(55732),m=n(97865),b=n(34707),v=n.n(b),g=n(78624),y=n(24753),j=n(51860),O=n(33167),w=n(34090),C=n(14275),k=n(14633),S=n(43139),P=n(288),D=n(24246),_=["customFieldValues"],E=["onSubmit","initialValues","onDelete"];function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=k.Ry().shape({data_categories:k.IX(k.Z_()).min(1,"Must assign at least one data category").label("Data categories"),data_use:k.Z_().required().label("Data use"),data_subjects:k.IX(k.Z_()).min(1,"Must assign at least one data subject").label("Data subjects")}),T={data_categories:[],data_subjects:[],data_use:"",dataset_references:[],customFieldValues:{},id:"",cookies:[]},F=function(e){e.customFieldValues;var t,n=(0,d.Z)(e,_);return I(I({},n),{},{name:null!==(t=e.name)&&void 0!==t?t:"",cookies:n.cookies.map((function(e){return{name:e,path:"/"}}))})},V=function(e){var t=e.allDataUses,n=e.allDataCategories,r=e.allDataSubjects,i=e.allDatasets,o=e.privacyDeclarationId,a=e.includeCookies,l=e.includeCustomFields,c=i?i.map((function(e){var t;return{label:null!==(t=e.name)&&void 0!==t?t:e.fides_key,value:e.fides_key}})):[];return(0,D.jsxs)(s.Kqy,{spacing:4,children:[(0,D.jsx)(S.AP,{id:"data_use",label:"Data use",name:"data_use",options:t.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",variant:"stacked",singleValueBlock:!0,isDisabled:!!o}),(0,D.jsx)(S.j0,{id:"name",label:"Processing Activity",name:"name",variant:"stacked",tooltip:"The personal data processing activity or activities associated with this data use.",disabled:!!o}),(0,D.jsx)(S.AP,{name:"data_categories",label:"Data categories",options:n.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What type of data is your system processing? This could be various types of user or system data.",isMulti:!0,variant:"stacked",isDisabled:!0}),(0,D.jsx)(S.AP,{name:"data_subjects",label:"Data subjects",options:r.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"Whose data are you processing? This could be customers, employees or any other type of user in your system.",isMulti:!0,variant:"stacked",isDisabled:!0}),a?(0,D.jsx)(S.VT,{name:"cookies",label:"Cookies",options:[],isMulti:!0,variant:"stacked",isClearable:!1}):null,i?(0,D.jsx)(S.AP,{name:"dataset_references",label:"Dataset references",options:c,tooltip:"Referenced Dataset fides keys used by the system.",isMulti:!0,variant:"stacked"}):null,l?(0,D.jsx)(C.uc,{resourceType:P.P6.PRIVACY_DECLARATION,resourceFidesKey:o}):null]})},M=function(e){var t=e.onSubmit,n=e.initialValues,i=e.allDataUses,o=e.privacyDeclarationId,a=(0,C.mZ)({resourceType:P.P6.PRIVACY_DECLARATION,resourceFidesKey:o}),l=a.customFieldValues,c=a.upsertCustomFields,u=(0,r.useMemo)((function(){return function(e,t){var n,r;return e?I(I({},e),{},{customFieldValues:t||{},cookies:null!==(n=null===(r=e.cookies)||void 0===r?void 0:r.map((function(e){return e.name})))&&void 0!==n?n:[]}):T}(n,l)}),[n,l]),d=(0,r.useState)(!1),p=d[0],f=d[1],h=(0,r.useMemo)((function(){var e=i.filter((function(e){return e.fides_key===u.data_use}))[0];if(e)return u.name?"".concat(e.name," - ").concat(u.name):e.name}),[i,u]),m=function(){var e=(0,x.Z)(v().mark((function e(n,r){var i,o,s,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.customFieldValues,o=F(n),e.next=4,t(o,r);case 4:if(!(s=e.sent)){e.next=12;break}if(!((a=s.filter((function(e){return e.data_use===n.data_use&&(!e.name||e.name===n.name)}))).length>0)){e.next=10;break}return e.next=10,c({customFieldValues:i,fides_key:a[0].id});case 10:r.resetForm({values:n}),f(!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{handleSubmit:m,renderHeader:function(e){var t=e.dirty,n=e.boxProps,r=e.hideSaved;return(0,D.jsxs)(s.xuv,I(I({display:"flex",alignItems:"center",justifyContent:"space-between"},n),{},{children:[h?(0,D.jsx)(s.X6q,{as:"h4",size:"xs",fontWeight:"medium",mr:4,children:h}):null,!r&&p&&!t&&u.data_use?(0,D.jsxs)(s.xvT,{fontSize:"sm","data-testid":"saved-indicator",children:[(0,D.jsx)(s.StI,{})," Saved"]}):null]}))},initialValues:u}},R=function(e){var t=e.onSubmit,n=e.initialValues,r=e.onDelete,o=(0,d.Z)(e,E),a=M({onSubmit:t,initialValues:n,allDataUses:o.allDataUses,privacyDeclarationId:null===n||void 0===n?void 0:n.id}),l=a.handleSubmit,c=a.renderHeader,u=a.initialValues;return(0,D.jsx)(w.J9,{enableReinitialize:!0,initialValues:u,onSubmit:l,validationSchema:z,children:function(e){var t=e.dirty;return(0,D.jsxs)(w.l0,{children:[(0,D.jsx)(i.Gt,{id:"PrivacyDeclaration",name:"New Privacy Declaration"}),(0,D.jsxs)(s.Kqy,{spacing:4,children:[(0,D.jsx)(s.xuv,{"data-testid":"header",children:c({dirty:t})}),(0,D.jsx)(V,I({onDelete:r},o))]})]})}})},W=["privacyDeclaration","onEdit","onDelete","includeCustomFields","includeCookies"],A=["privacyDeclarations"];function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=function(e){var t=e.privacyDeclaration,n=e.onEdit,r=e.onDelete,o=e.includeCustomFields,a=e.includeCookies,l=(0,d.Z)(e,W),c=M(B({initialValues:t,onSubmit:function(e){return n(t,e)},privacyDeclarationId:t.id},l)),u=c.initialValues,p=c.renderHeader,f=c.handleSubmit;return(0,D.jsx)(s.Qdk,{children:function(e){var n=e.isExpanded;return(0,D.jsx)(w.J9,{enableReinitialize:!0,initialValues:u,onSubmit:f,validationSchema:z,children:function(e){var c=e.dirty;return(0,D.jsxs)(w.l0,{"data-testid":"".concat(t.data_use,"-form"),children:[(0,D.jsx)(i.Gt,{id:"".concat(t.id,"-form"),name:t.id}),(0,D.jsxs)(s.KFZ,{py:4,borderBottomWidth:n?"0px":"1px",backgroundColor:n?"gray.50":void 0,"data-testid":"accordion-header-".concat(t.data_use),children:[p({dirty:c,boxProps:{flex:"1",textAlign:"left"},hideSaved:!n}),(0,D.jsx)(s.XEm,{})]}),(0,D.jsx)(s.Hk3,{backgroundColor:"gray.50",pt:0,children:(0,D.jsx)(s.Kqy,{spacing:4,children:(0,D.jsx)(V,B({privacyDeclarationId:t.id,onDelete:r,includeCustomFields:o,includeCookies:a},l))})})]})}})}})},L=function(e){var t=e.privacyDeclarations,n=(0,d.Z)(e,A);return(0,D.jsx)(s.UQy,{allowToggle:!0,border:"transparent","data-testid":"privacy-declaration-accordion",children:t.map((function(e){return(0,D.jsx)(G,B({privacyDeclaration:e},n),e.id)}))})},q=["system","addButtonProps","includeCustomFields","includeCookies","onSave"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t=e.system,n=(e.addButtonProps,e.includeCustomFields),i=e.includeCookies,o=e.onSave,a=(0,d.Z)(e,q),l=(0,s.pmc)(),c=(0,j.qQ)(),u=(0,m.Z)(c,1)[0],p=(0,r.useState)(!1),f=p[0],b=p[1],w=(0,r.useState)(void 0),C=w[0],k=w[1],S=(0,r.useMemo)((function(){return C?t.privacy_declarations.filter((function(e){return e.id!==C.id})):t.privacy_declarations}),[C,t]),P=function(e){return S.filter((function(t){return t.data_use===e.data_use&&t.name===e.name})).length>0&&(l((0,y.Vo)("A declaration already exists with that data use in this system. Please supply a different data use.")),!0)},_=function(){var e=(0,x.Z)(v().mark((function e(n,r){var i,s,a,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.map((function(e){var t;return U(U({},e),{},{name:null!==(t=e.name)&&void 0!==t?t:""})})),s=U(U({},t),{},{privacy_declarations:i}),a=function(e){if(!(0,O.isErrorResult)(e))return l.closeAll(),l((0,y.t5)(r?"Data use deleted":"Data use saved")),o&&o(e.data),e.data.privacy_declarations;var t=(0,g.e$)(e.error,"An unexpected error occurred while updating the system. Please try again.");l((0,y.Vo)(t))},e.next=5,u(s);case 5:return c=e.sent,e.abrupt("return",a(c));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,x.Z)(v().mark((function e(n,r){var i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id===n.id||!P(r)){e.next=2;break}return e.abrupt("return",void 0);case 2:return i=t.privacy_declarations.map((function(e){return e.id===n.id?r:e})),e.abrupt("return",_(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,x.Z)(v().mark((function e(t){var n,r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P(t)){e.next=2;break}return e.abrupt("return",void 0);case 2:return l.closeAll(),n=[].concat((0,h.Z)(S),[t]),e.next=6,_(n);case 6:return(r=e.sent)&&(i=r.filter((function(e){return(!e.name||e.name===t.name)&&e.data_use===t.data_use}))[0],k(i)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,x.Z)(v().mark((function e(n){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privacy_declarations.filter((function(e){return e.id!==n.id})),e.abrupt("return",_(r,!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,x.Z)(v().mark((function e(t){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return(n=e.sent)&&(b(!1),k(void 0)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){b(!1)}),[t.fides_key]),(0,D.jsxs)(s.Kqy,{spacing:3,children:[(0,D.jsx)(L,U({privacyDeclarations:S,onEdit:E,onDelete:I,includeCustomFields:n,includeCookies:i},a)),f?(0,D.jsx)(s.xuv,{backgroundColor:"gray.50",p:4,"data-testid":"new-declaration-form",children:(0,D.jsx)(R,U({initialValues:C,onSubmit:Z,onDelete:z,includeCustomFields:n,includeCookies:i},a))}):null,0===t.privacy_declarations.length?(0,D.jsx)(s.xvT,{fontSize:"sm",lineHeight:5,fontWeight:"medium",pl:2,children:"No data uses"}):null]})},Y=n(60041);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J={name:"",description:""},$=function(e){var t,n=e.system,r="/systems/configure/".concat(n.fides_key),o=function(e){var t=(0,j.dB)(),n=(0,m.Z)(t,1)[0],r=(0,s.pmc)(),i=function(){var t=(0,x.Z)(v().mark((function t(i,o){var s,a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[Q(Q({},e),{},{name:i.name,description:i.description})],t.next=3,n(s);case 3:a=t.sent,(0,Y.D4)(a)?r((0,y.Vo)((0,g.e$)(a.error))):(r((0,y.t5)("Successfully saved system info")),o.resetForm({values:i}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{handleUpsertSystem:i,validationSchema:k.Ry().shape({name:k.Z_().required().label("Name"),description:k.Z_().required().label("Description")})}}(n),a=o.handleUpsertSystem,l=o.validationSchema;return(0,D.jsxs)(s.xuv,{children:[(0,D.jsxs)(s.kCb,{alignItems:"center",children:[(0,D.jsx)(s.xvT,{color:"gray.600",size:"md",lineHeight:6,fontWeight:"semibold",marginBottom:2,children:"System details"}),(0,D.jsx)(s.LZC,{}),(0,D.jsxs)(s._pl,{color:"complimentary.500",href:r,children:["View more",(0,D.jsx)(s.h0n,{ml:2})]})]}),(0,D.jsx)(s.xuv,{width:"100%",padding:4,borderTop:"1px solid",borderColor:"gray.200",children:(0,D.jsx)(w.J9,{enableReinitialize:!0,initialValues:null!==(t=n)&&void 0!==t?t:J,validationSchema:l,onSubmit:a,children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid;return(0,D.jsxs)(w.l0,{children:[(0,D.jsx)(i.Gt,{id:"SystemInfoDrawer",name:"System Info"}),(0,D.jsx)(s.xuv,{marginTop:3,children:(0,D.jsx)(S.j0,{label:"System name",name:"name",variant:"stacked"})}),(0,D.jsx)(s.xuv,{marginTop:3,children:(0,D.jsx)(S.Ks,{label:"System Description",name:"description",variant:"stacked"})}),(0,D.jsx)(s.kCb,{marginTop:6,justifyContent:"flex-end",children:(0,D.jsx)(s.zxk,{textAlign:"right",type:"submit",disabled:!n||!r,colorScheme:"primary",isLoading:t,size:"sm",children:"Save"})})]})}})})]})},ee=["isLoading"];function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(e){var t,n=e.selectedSystemId,i=e.resetSelectedSystemId,o=(0,r.useMemo)((function(){return Boolean(n)}),[n]),a=(0,f.f)({includeDatasets:!1,includeDisabled:!1}),l=(a.isLoading,(0,d.Z)(a,ee)),c=(0,j.rn)(n,{skip:!n}).data;return(0,D.jsx)(s.xuv,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,overflow:"hidden",children:(0,D.jsx)(s.Mi4,{transition:{enter:{ease:"easeInOut",duration:.5},exit:{ease:"easeInOut",duration:.5}},direction:"right",in:o,unmountOnExit:!0,style:{zIndex:11,pointerEvents:"none",position:"absolute"},children:(0,D.jsxs)(s.xuv,{position:"absolute",right:"0px",height:"100%",width:"100%",maxWidth:"480px",pointerEvents:"auto",borderWidth:0,boxShadow:"0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04)",display:n?"unset":"none",backgroundColor:"white",children:[(0,D.jsx)(s.xuv,{id:"drawer-header",borderBottomWidth:1,paddingX:6,paddingY:3,children:(0,D.jsxs)(s.kCb,{children:[(0,D.jsx)(s.kCb,{justifyContent:"space-between",alignItems:"center",height:"40px",children:(0,D.jsx)(s.xvT,{fontWeight:"semibold",fontSize:"lg",lineHeight:"7",color:"gray.900",children:null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:"System Information"})}),(0,D.jsx)(s.LZC,{}),(0,D.jsx)(s.kCb,{alignItems:"center",children:(0,D.jsx)(s.hU,{icon:(0,D.jsx)(s.Two,{}),"aria-label":"Close error message",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},onClick:i})})]})}),(0,D.jsx)(s.xuv,{id:"drawer-body",height:"calc(100% - 46px)",overflowY:"auto",padding:6,style:{scrollbarGutter:"stable"},children:c?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)($,{system:c}),(0,D.jsx)(s.xvT,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,children:"Data uses"}),(0,D.jsx)(s.xuv,{borderTop:"1px solid",borderColor:"gray.200",children:(0,D.jsx)(s.xuv,{pb:3,children:(0,D.jsx)(X,ne({system:c,addButtonProps:{ml:4}},l))})}),(0,D.jsx)(s.xvT,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,paddingBottom:2,children:"Data flow"}),(0,D.jsx)(p.q,{system:c})]}):null})]})})})},ie=n(66521),oe=n(60378),se=n(47134),ae=n(75846),le=n(63138),ce=n(14221),ue=n(75523),de=function(e){var t=e.column,n=e.value,i=function(){var e=r.useState(!1),t=(0,m.Z)(e,2),n=t[0],i=t[1],o=r.useState(!1),s=(0,m.Z)(o,2),a=s[0],l=s[1];return{mouseOver:a,isCellExpanded:n,handleToggleExpanded:function(){return i(!n)},handleMouseEnter:function(){l(!0)},handleMouseLeave:function(){l(!1)}}}(),o=i.isCellExpanded,a=i.handleMouseEnter,l=i.handleMouseLeave,u=i.handleToggleExpanded,d=i.mouseOver,p=function(e){var t,n,r,i,o=e.column,s=e.value,a=(0,c.C)(ue.L5),l=(0,c.C)(ae.C3),u=(0,c.C)(se.FG);if(o.id===ce.Ux)return{label:(s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=a.get(e))||void 0===n?void 0:n.name)&&void 0!==t?t:e})).join(", "):void 0)||(null!==(t=null===(n=a.get(s))||void 0===n?void 0:n.name)&&void 0!==t?t:s),expanded:s};if(o.id===ce.vy)return{label:s,expanded:null!==(r=null===(i=l.get(s))||void 0===i?void 0:i.fides_key)&&void 0!==r?r:s};if(o.id===ce.OL){var d,p,f=s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=u.get(e))||void 0===n?void 0:n.fides_key)&&void 0!==t?t:e})).join(", "):void 0;return{label:s,expanded:f||(null!==(d=null===(p=u.get(s))||void 0===p?void 0:p.fides_key)&&void 0!==d?d:s)}}return{label:s}}({column:t,value:n});return(0,D.jsx)(s.xuv,{position:"relative",onMouseEnter:a,onMouseLeave:l,height:"100%",children:(0,D.jsxs)(s.xuv,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[(0,D.jsxs)(s.xuv,{overflow:"hidden",flex:1,p:2,children:[(0,D.jsx)(s.xvT,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",isTruncated:!o,children:p.label}),o&&p.expanded!==p.label?(0,D.jsx)(s.xuv,{fontStyle:"italic",mt:2,children:(0,D.jsx)(s.xvT,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",children:p.expanded})}):null]}),(d||o)&&p.expanded&&""!==p.expanded?(0,D.jsx)("button",{type:"button",style:{position:"relative",right:"10px"},onClick:function(e){e.stopPropagation(),u()},children:o?(0,D.jsx)(s.O1q,{width:"18px",height:"18px",my:"-4px"}):(0,D.jsx)(s.mCO,{width:"18px",height:"18px",my:"-4px"})}):null]})})},pe=n(76459);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=function(e){var t,n,r,i=e.option,o=e.columnId,a=e.filterValue,l=e.toggleFilterOption,u=(0,c.C)(ue.L5),d=o===ce.Ux&&null!==(t=null===(n=u.get(i))||void 0===n?void 0:n.name)&&void 0!==t?t:i;return(0,D.jsx)(s.XZJ,{value:i,width:"193px",height:"20px",mb:"25px",isChecked:null!==(r=a[i])&&void 0!==r&&r,onChange:function(e){var t=e.target;l(i,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,D.jsx)(s.xvT,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:d})},i)};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve={minWidth:30,width:150,maxWidth:300,Cell:de,Filter:function(e){var t=e.column,n=function(e){var t,n=(0,r.useContext)(pe.Z).tableInstance,i=r.useMemo((function(){var t=new Set;return e.preFilteredRows.forEach((function(n){t.add(n.values[e.id])})),Array.from(t)}),[e.id,e.preFilteredRows]),o=r.useMemo((function(){var e={};return i.forEach((function(t){e[t]=!1})),e}),[i]);return{filterValue:null!==(t=e.filterValue)&&void 0!==t?t:o,clearFilterOptions:function(){var t={};i.forEach((function(e){t[e]=!1})),e.setFilter(t)},toggleFilterOption:function(t,r){var i,s=he(he({},null!==(i=e.filterValue)&&void 0!==i?i:o),{},(0,u.Z)({},t,r));Object.values(s).every((function(e){return!e}))?null===n||void 0===n||n.setAllFilters(null===n||void 0===n?void 0:n.state.filters.filter((function(t){return t.id!==e.id}))):e.setFilter(s)},options:i,header:e.Header}}(t),i=n.filterValue,o=n.toggleFilterOption,a=n.options,l=(0,r.useState)(!1),c=l[0],d=l[1],p=c?a:a.slice(0,15),f=a.length>15;return(0,D.jsx)(s.UQy,{width:"100%",allowToggle:!0,children:(0,D.jsxs)(s.Qdk,{border:"0px",children:[(0,D.jsx)(s.X6q,{height:"56px",children:(0,D.jsxs)(s.KFZ,{height:"100%",children:[(0,D.jsx)(s.xuv,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:t.Header}),(0,D.jsx)(s.XEm,{})]})}),(0,D.jsxs)(s.Hk3,{children:[(0,D.jsx)(s.MIq,{columns:3,children:p.map((function(e){return(0,D.jsx)(xe,{columnId:t.id,option:e,filterValue:i,toggleFilterOption:o},e)}))}),!c&&f?(0,D.jsx)(s.zxk,{size:"sm",variant:"ghost",onClick:function(){d(!0)},children:"View more"}):null,c&&f?(0,D.jsx)(s.zxk,{size:"sm",variant:"ghost",onClick:function(){d(!1)},children:"View less"}):null]})]})},t.id)},filter:"multifield"},ge={multifield:function(e,t,n){var r=t[0];return e.filter((function(e){var t=e.values[r];return n[t]}))}},ye=n(60245),je=n(90768),Oe=n(91728),we=n(38687),Ce=n(61561),ke=n(85249),Se=n(68972),Pe=n(2926),De=n(34522),_e=function(e){var t=e.isOpen,n=e.onClose,i=(0,r.useRef)(null),o=(0,r.useContext)(pe.Z).tableInstance;if(!o)return null;var a=function(e,t){if(!e||!e.columns||!e.rows)return"";var n=e.columns,r=e.rows;if("csv"===t)return(0,Se.P)([n].concat((0,h.Z)(r)));var i=De.P6.aoa_to_sheet([n].concat((0,h.Z)(r))),o=De.P6.book_new();return De.P6.book_append_sheet(o,i,"Datamap"),o},l=function(e,t){var n=(new Date).toISOString(),r="report_".concat(n,".").concat(t);if("string"===typeof e){if("csv"===t){var i=new Blob([e],{type:"text/csv;charset=utf-8"});(0,Pe.saveAs)(i,r)}}else(0,De.Fv)(e,r)},c=function(){var e=(0,x.Z)(v().mark((function e(t){var r,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(),o){e.next=3;break}return e.abrupt("return");case 3:r={columns:o.columns.filter((function(e){return e.isVisible})).map((function(e){return e.Header})),rows:o.rows.map((function(e){return e.subRows})).flatMap((function(e){return e})).map((function(e){return e.cells.map((function(e){return e.value}))}))},i=a(r,t),l(i,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,D.jsxs)(s.u_l,{initialFocusRef:i,isCentered:!0,isOpen:t,onClose:n,size:"lg",children:[(0,D.jsx)(s.ZAr,{}),(0,D.jsxs)(s.hzk,{minWidth:"605px",children:[(0,D.jsx)(s.xBx,{children:(0,D.jsxs)(s.kCb,{flexDir:"column",gap:"16px",children:[(0,D.jsx)(s.xvT,{children:"Export"}),(0,D.jsx)(s.izJ,{color:"gray.200"})]})}),(0,D.jsx)(s.olH,{}),(0,D.jsx)(s.fef,{pb:"8px",pt:"8px",children:(0,D.jsx)(s.kCb,{justifyContent:"center",width:"100%",children:(0,D.jsx)(s.xvT,{fontSize:"sm",lineHeight:"20px",children:"To export the current view of the Data Map table, please select the appropriate format below. Your export will contain only the visible columns and rows."})})}),(0,D.jsx)(s.mzw,{children:(0,D.jsxs)(s.kCb,{borderTop:"1px solid",borderTopColor:"gray.200",justifyContent:"space-between",pt:"24px",width:"100%",children:[(0,D.jsx)(s.zxk,{colorScheme:"primary",size:"sm",mr:3,flexGrow:1,onClick:function(){return c("xlsx")},children:"Export Excel (.xls)"}),(0,D.jsx)(s.zxk,{colorScheme:"primary",size:"sm",flexGrow:1,onClick:function(){return c("csv")},children:"Export CSV (.csv)"})]})})]})]})},Ee=function(e){var t=e.heading,n=e.children;return(0,D.jsxs)(s.xuv,{padding:"24px 8px 8px 24px",children:[(0,D.jsx)(s.X6q,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:t}),n]})},Ze=function(e){var t=e.isOpen,n=e.onClose,i=(0,r.useContext)(pe.Z).tableInstance,o=(0,r.useMemo)((function(){return i||{headerGroups:[]}}),[i]).headerGroups,a=function(e,t){return e.filter((function(e){return e.id===t})).map((function(e){return e.render("Filter",{key:e.id})}))},l=(0,r.useMemo)((function(){return o.length>0?o[0].headers.map((function(e){return e})):[]}),[o]);return(0,D.jsxs)(s.u_l,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,D.jsx)(s.ZAr,{}),(0,D.jsxs)(s.hzk,{children:[(0,D.jsx)(s.xBx,{children:"Filters"}),(0,D.jsx)(s.olH,{}),(0,D.jsx)(s.izJ,{}),(0,D.jsx)(s.fef,{maxH:"85vh",padding:"0px",overflowX:"auto",children:function(e,t){return e.some((function(e){return t.indexOf(e.id)>-1}))}(l,[ce.vy,ce.Ux,ce.OL])?(0,D.jsxs)(Ee,{heading:"Privacy attributes",children:[a(l,ce.vy),a(l,ce.Ux),a(l,ce.OL)]}):null}),(0,D.jsx)(s.mzw,{children:(0,D.jsxs)(s.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,D.jsx)(s.zxk,{variant:"outline",size:"sm",mr:3,onClick:function(){null===i||void 0===i||i.setAllFilters([])},flexGrow:1,children:"Reset Filters"}),(0,D.jsx)(s.zxk,{colorScheme:"primary",size:"sm",onClick:n,flexGrow:1,children:"Done"})]})})]})]})},Ie=n(65201),ze=n(36737),Te=n(22348);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ve=function(e){var t=e.id,n=e.index,i=e.isVisible,o=e.moveColumn,a=e.setColumnVisible,l=e.text,c=function(e){var t=e.id,n=e.index,i=e.moveColumn,o=e.setColumnVisible,s=(0,r.useRef)(null),a=(0,ze.L)({accept:ce._Q.DraggableColumnListItem,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(s.current){var o=e.index,a=n;if(o!==a){var l=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect(),c=(l.bottom-l.top)/2,u=t.getClientOffset().y-l.top;o<a&&u<c||o>a&&u>c||(i(o,a),Object.assign(e,{index:a}))}}}}),l=(0,m.Z)(a,2),c=l[0].handlerId,u=l[1],d=(0,Te.c)({type:ce._Q.DraggableColumnListItem,item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:!!e.isDragging()}}}),p=(0,m.Z)(d,3),f=p[0].isDragging,h=p[1],x=p[2];return h(u(s)),{isDragging:f,ref:s,handlerId:c,preview:x,handleColumnVisibleToggle:function(e){o(n,e.target.checked)}}}({index:n,id:t,moveColumn:o,setColumnVisible:a}),u=c.ref,d=c.isDragging,p=c.handlerId,f=c.preview,h=c.handleColumnVisibleToggle;return(0,D.jsxs)(s.HCh,{alignItems:"center",display:"flex",minWidth:0,ref:f,"data-handler-id":p,opacity:d?.2:1,children:[(0,D.jsx)(s.xuv,{ref:u,cursor:d?"grabbing":"grab",children:(0,D.jsx)(s.DE2,{as:s.zGR,color:"gray.300",flexShrink:0,height:"20px",width:"20px",_hover:{color:"gray.700"}})}),(0,D.jsxs)(s.NIc,{alignItems:"center",display:"flex",minWidth:0,title:l,children:[(0,D.jsx)(s.lXp,{color:"gray.700",fontSize:"normal",fontWeight:400,htmlFor:"".concat(t),mb:"0",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,children:l}),(0,D.jsx)(s.rsf,{colorScheme:"complimentary",id:"".concat(t),mr:2,isChecked:i,onChange:h})]})]})},Me=function(e){var t=e.columns,n=(0,r.useState)(null!==t&&void 0!==t?t:[]),i=n[0],o=n[1];return(0,r.useEffect)((function(){o((null===t||void 0===t?void 0:t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})))||[])}),[t]),{columns:i,moveColumn:(0,r.useCallback)((function(e,t){o((function(n){return(0,Ie.ZP)(n,(function(n){var r=n[e];n.splice(e,1),n.splice(t,0,r)}))}))}),[]),setColumnVisible:(0,r.useCallback)((function(e,t){o((function(n){return(0,Ie.ZP)(n,(function(n){n[e]&&(n[e].isVisible=t)}))}))}),[])}},Re=function(e){var t=e.isOpen,n=e.onClose,i=(0,ye.I0)(),o=(0,c.C)(Ce.eo),a=Me({columns:o}),l=(0,r.useCallback)((function(){i((0,Ce.Bx)(a.columns)),n()}),[n,i,a.columns]);return(0,D.jsxs)(s.u_l,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,D.jsx)(s.ZAr,{}),(0,D.jsxs)(s.hzk,{children:[(0,D.jsx)(s.xBx,{pb:0,children:"Data map settings"}),(0,D.jsx)(s.olH,{}),(0,D.jsxs)(s.fef,{children:[(0,D.jsx)(s.xvT,{fontSize:"sm",color:"gray.500",mb:2,children:"You can toggle columns on and off to hide or show them in the table. Additionally, you can drag columns up or down to change the order"}),(0,D.jsxs)(s.mQc,{colorScheme:"complimentary",children:[(0,D.jsx)(s.tdY,{children:(0,D.jsx)(s.OK9,{color:"complimentary.500",children:"Columns"})}),(0,D.jsx)(s.nPR,{children:(0,D.jsx)(s.x45,{p:0,pt:4,maxHeight:"270px",overflowY:"scroll",children:(0,D.jsx)(s.aVo,{spacing:4,children:a.columns.filter((function(e){return e.value!==ce.Br})).map((function(e,t){return(0,D.jsx)(Ve,{id:e.id,index:t+1,isVisible:e.isVisible,moveColumn:a.moveColumn,setColumnVisible:a.setColumnVisible,text:e.text},e.id)}))})})})]})]}),(0,D.jsx)(s.mzw,{children:(0,D.jsxs)(s.xuv,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,D.jsx)(s.zxk,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Cancel"}),(0,D.jsx)(s.zxk,{colorScheme:"primary",size:"sm",onClick:l,flexGrow:1,children:"Save"})]})})]})]})},We=function(){var e,t=(0,ye.I0)(),n=function(){var e=(0,c.C)(Ce.hd),t=(0,s.qY0)(),n=t.isOpen,r=t.onOpen,i=t.onClose,o=(0,s.qY0)(),a=o.isOpen,l=o.onOpen,u=o.onClose,d=(0,s.qY0)();return{isExportModalOpen:n,isMapOpen:e,isSettingsModalOpen:a,isFilterModalOpen:d.isOpen,onSettingsModalOpen:l,onSettingsModalClose:u,onFilterModalOpen:d.onOpen,onFilterModalClose:d.onClose,onExportClick:function(){r()},onExportModalClose:i,onExportModalOpen:r}}(),i=n.isExportModalOpen,o=n.isFilterModalOpen,a=n.isSettingsModalOpen,l=n.onSettingsModalOpen,u=n.onSettingsModalClose,d=n.onFilterModalOpen,p=n.onFilterModalClose,f=n.onExportClick,h=n.onExportModalClose,x=n.isMapOpen,m=(0,r.useContext)(pe.Z).tableInstance,b=(0,je.hz)(),v=b.systemsCount,g=b.dictionaryService;if(!m)return null;var y=(null===(e=m.rows)||void 0===e?void 0:e.length)||0,j=null===m||void 0===m?void 0:m.state.filters.map((function(e){return Object.values(e.value)})).flatMap((function(e){return e})).filter((function(e){return!0===e})).length;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(s.kCb,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,D.jsx)(s.kCb,{flexGrow:1,children:(0,D.jsx)(ke.Z,{globalFilter:m.state.globalFilter,setGlobalFilter:m.setGlobalFilter})}),(0,D.jsxs)(s.kCb,{children:[v>0?(0,D.jsxs)(s.kCb,{alignItems:"center",borderRadius:"md",gap:1,marginRight:4,children:[(0,D.jsxs)(s.xvT,{fontSize:"xs",children:[y," of ",v," systems displayed"]}),g?(0,D.jsx)(we.Z,{label:"Note that Global Vendor List (GVL) and Additional Consent (AC) systems are not currently included in these reports"}):null]}):null,(0,D.jsxs)(s.zxk,{"aria-label":"Open Filter Settings",variant:"solid",backgroundColor:"#824EF2",color:"white",size:"sm",marginRight:4,onClick:d,_hover:{opacity:.8},_active:{opacity:.8},rightIcon:(0,D.jsx)(s.r1k,{}),children:["Filter",j>0?(0,D.jsx)(s.Vp9,{ml:2,backgroundColor:"complimentary.800",borderRadius:"full",color:"white",children:j}):null]}),(0,D.jsxs)(s.hE2,{isAttached:!0,size:"sm",marginRight:4,children:[(0,D.jsx)(s.zxk,{colorScheme:x?"primary":void 0,onClick:function(){t((0,Ce.kE)("map"))},"data-testid":"map-btn",children:"Map"}),(0,D.jsx)(s.zxk,{colorScheme:x?void 0:"primary",onClick:function(){t((0,Ce.kE)("table"))},"data-testid":"table-btn",children:"Table"})]}),(0,D.jsx)(s.hU,{"aria-label":"Open Column Settings",variant:"ghost",size:"sm",marginRight:1,onClick:l,icon:(0,D.jsx)(Oe.A5,{})}),(0,D.jsx)(s.v2r,{children:(0,D.jsx)(s.j2t,{as:s.hU,"aria-label":"Export data",icon:(0,D.jsx)(Oe.nM,{}),onClick:f,size:"sm",variant:"ghost"})})]})]}),(0,D.jsx)(Ze,{isOpen:o,onClose:p}),(0,D.jsx)(_e,{isOpen:i,onClose:h}),(0,D.jsx)(Re,{isOpen:a,onClose:u})]})},Ae="#F7F7F7",He=["key"],Be=["key"];function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe=function(e){var t=e.rowHeading,n=e.renderRowSubheading,i=e.renderOverflowMenu,o=e.rows,a=e.prepareRow,l=e.getTableBodyProps,c=e.onSubrowClick;return(0,D.jsx)(s.p3B,Le(Le({backgroundColor:Ae},l()),{},{children:o.map((function(e){return a(e),[(0,r.createElement)(s.Tr,Le(Le({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal,"data-testid":"grouped-row-".concat(e.groupByVal)}),(0,D.jsxs)(s.Td,Le(Le({display:"flex",justifyContent:"space-between",colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,D.jsxs)(s.Kqy,{children:[t?(0,D.jsx)(s.xvT,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:t}):null,(0,D.jsx)(s.xvT,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",mb:1,children:n(e)})]}),i?i(e):null]}))),e.subRows.map((function(t,n){a(t);var r=t.getRowProps(),i=r.key,o=(0,d.Z)(r,He);return(0,D.jsx)(s.Tr,Le(Le({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:n===e.subRows.length-1?"6px":"",borderBottomRightRadius:n===e.subRows.length-1?"6px":""},o),{},{_hover:{bg:"gray.50"},cursor:c?"pointer":void 0,backgroundColor:"white",onClick:c?function(){return c(t)}:void 0,ml:4,mr:4,_last:{mb:4},children:t.cells.map((function(e,n){var r=e.getCellProps(),i=r.key,o=(0,d.Z)(r,Be);return(0,D.jsx)(s.Td,Le(Le({},o),{},{borderRightWidth:n===t.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,"data-testid":"subrow-".concat(i),children:e.render("Cell")}),i)}))}),i)}))]}))}))},Ne=["key"],Ue=["key"];function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=function(){return(0,D.jsx)(s.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})},Qe=function(e){var t=e.headerGroups;return(0,D.jsx)(s.hrZ,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:Ae,children:t.map((function(e){var t=e.getHeaderGroupProps(),n=t.key,r=(0,d.Z)(t,Ne);return(0,D.jsxs)(s.Tr,Ye(Ye({},r),{},{height:"inherit",children:[(0,D.jsx)(Ke,{}),e.headers.map((function(e,t){var n=e.getHeaderProps(),r=n.key,i=(0,d.Z)(n,Ue);return(0,D.jsxs)(s.Th,Ye(Ye({},i),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===t?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,D.jsx)(s.xvT,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,D.jsx)(s.xuv,Ye(Ye({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,D.jsx)(Ke,{})]}),n)}))})};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=function(e){var t=e.setSelectedSystemId,n=(0,r.useContext)(pe.Z).tableInstance;if(!n)return null;var i=n.getTableProps,o=n.getTableBodyProps,a=n.headerGroups,l=n.prepareRow,c=n.rows;return(0,D.jsx)(s.xuv,{boxSize:"100%",overflow:"auto",children:(0,D.jsxs)(s.iA_,$e($e({},i()),{},{size:"sm","data-testid":"datamap-table",children:[(0,D.jsx)(Qe,{headerGroups:a}),(0,D.jsx)(qe,{rowHeading:"System Name",renderRowSubheading:function(e){return e.groupByVal},onSubrowClick:function(e){e.values[ce.sD]&&t(e.values[ce.sD])},getTableBodyProps:o,prepareRow:l,rows:c})]}))})},tt=n(60709),nt=function(){return(0,D.jsx)(s.M5Y,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,D.jsx)(s.xuv,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,D.jsxs)(s.Kqy,{spacing:4,children:[(0,D.jsx)(s.xvT,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology\u2014fear not\u2014Fides is here to simplify this."}),(0,D.jsx)(s.xvT,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,D.jsx)(s.xvT,{children:"Let's get started!"}),(0,D.jsx)(s.xuv,{children:(0,D.jsx)(s.zxk,{as:"a",href:tt.xo,width:"fit-content",colorScheme:"primary","data-testid":"add-systems-btn",children:"Add Systems"})})]})})})},rt=l()((function(){return Promise.all([n.e(4804),n.e(7670),n.e(6412)]).then(n.bind(n,53027))}),{ssr:!1,loadableGenerated:{webpack:function(){return[53027]}}}),it=function(){var e=function(){var e=(0,c.C)(Ce.hd),t=(0,c.C)(Ce.Xt),n=(0,r.useContext)(ie.Y),o=(0,i.oI)().attemptAction,s=(0,r.useState)(),a=s[0],l=s[1],u=(0,r.useCallback)((function(e){o().then((function(t){t&&l(e)}))}),[o,l]),d=(0,r.useCallback)((function(){o().then((function(e){var t;e&&a&&(n.current&&(null===(t=n.current)||void 0===t||t.$id(a).unselect()),l(void 0))}))}),[o,n,a]);return{isMapOpen:e,isGettingStarted:t,selectedSystemId:a,setSelectedSystemId:u,resetSelectedSystemId:d}}(),t=e.isMapOpen,n=e.isGettingStarted,o=e.setSelectedSystemId,a=e.selectedSystemId,l=e.resetSelectedSystemId,u=function(){var e=(0,c.T)(),t=(0,r.useContext)(pe.Z).updateTableInstance,n=(0,c.C)(le.eo),i=(0,le.Ex)({organizationName:"default_organization"}),o=i.data,s=i.isLoading;(0,ue.MO)(),(0,ae.fd)(),(0,se.te)();var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){if(o){var t=o.columns,n=o.rows;e((0,le.dd)(t)),a.current||(a.current=!0,0===n.length?e((0,le.ym)(!0)):e((0,le.ym)(!1)))}}),[o,e]);var l=(0,r.useMemo)((function(){return o?o.rows:[]}),[o]),u=(0,r.useMemo)((function(){return(n||[]).map((function(e){var t=e.text,n=e.value,r=e.isVisible;return{id:n,accessor:function(e){return e[n]},Header:t,isVisible:r,aggregate:function(e,t){var n=new Set(t);return e.forEach((function(e){n.has(e)||n.add(e)})),Array.from(n.values()).join(", ")}}}))}),[n]),d=(0,oe.useTable)({columns:u,data:l,defaultColumn:ve,filterTypes:ge,initialState:{groupBy:[ce.Br,ce.vy]}},oe.useFilters,oe.useGlobalFilter,oe.useFlexLayout,oe.useResizeColumns,oe.useGroupBy,oe.useExpanded);return(0,r.useEffect)((function(){return t(d)}),[d,t]),(0,r.useEffect)((function(){d.setHiddenColumns((null===n||void 0===n?void 0:n.filter((function(e){return!e.isVisible})).map((function(e){return e.value})))||[])}),[n,d]),be(be({},d),{},{isLoading:s})}();return u.isLoading?(0,D.jsx)(s.M5Y,{width:"100%",flex:"1",children:(0,D.jsx)(s.$jN,{})}):n?(0,D.jsx)(nt,{}):(0,D.jsxs)(s.kCb,{direction:"column",height:"100%",children:[(0,D.jsx)(s.xuv,{marginBottom:3,marginRight:10,children:(0,D.jsx)(We,{})}),(0,D.jsxs)(s.kCb,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[t?(0,D.jsx)(s.xuv,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,D.jsx)(rt,{setSelectedSystemId:o})}):null,t?null:(0,D.jsx)(s.xuv,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,D.jsx)(et,{setSelectedSystemId:o})}),(0,D.jsx)(re,{selectedSystemId:a,resetSelectedSystemId:l})]})]})},ot=function(){var e=(0,r.useMemo)((function(){return new pe.m}),[]);return(0,D.jsx)(o.Z,{title:"View Map",mainProps:{padding:"40px 0 0 40px"},children:(0,D.jsx)(pe.Z.Provider,{value:e,children:(0,D.jsxs)(ie.Z,{children:[(0,D.jsx)(it,{}),(0,D.jsx)(i.eB,{})]})})})}},53910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return n(13955)}])},36786:function(){},43197:function(){}},function(e){e.O(0,[9556,2160,6936,378,8146,338,3702,3119,7697,9774,2888,179],(function(){return t=53910,e(e.s=t);var t}));var t=e.O();_N_E=t}]);