import{E as ee,M as be,b_ as He,O as le,aF as We,aE as E,R as se,S as o,as as Ze,az as Le,F as Xe,h as v,r as ve,aw as j,Y as q,b$ as De,aG as Qe,j as Je,an as Ee,_ as K,Z as m,aH as V,c0 as et,al as ae,aK as R,ap as P,c1 as tt,aN as Oe,V as de,W as ce,aR as f,$ as C,U as ge,aI as re,X as I,ak as A,ao as fe,l as at,aM as lt,bH as st,c2 as rt,m as ot,aY as nt,aZ as it,a$ as we,D as ut,b0 as dt,aX as ct,av as me,b8 as mt,bo as vt,aS as ft,aT as ht,bm as ye,by as ke,ar as pt,c3 as bt,bf as gt,c4 as yt,c5 as Te,Q as Se,s as Ve,a0 as kt,p as St,a7 as Ae,c6 as _t,i as je,c7 as Ct,au as wt,K as X,aU as Be,b5 as Tt,c8 as Vt,b7 as Bt,c9 as Pt,bg as It,aD as Pe}from"./admin-drawer-panel-DNngWUEM.js";import{b as Mt,u as Nt,c as Ie,f as Rt,V as Ft}from"./VDialog-opmV0YZz.js";import{u as W,i as Lt,C as Dt,A as Et,g as Ot,e as At,j as jt}from"./main-DX-k2724.js";import{b as $t,c as zt,d as Ut}from"./VSelect-sIYW_-ud.js";import{c as xt}from"./to-case-BR2frjFx.js";import{P as Gt}from"./unauthorized-BbXjAe5l.js";import{m as qt,a as Kt,u as Yt,V as Me,b as Ht}from"./VSelectionControl-C8DP9rgp.js";import{a as Wt}from"./settings-drawer-DyS0A2pN.js";const Zt=ee({...be(),...He({variant:"text"})},"VToolbarItems"),Al=le()({name:"VToolbarItems",props:Zt(),setup(e,t){let{slots:a}=t;return We({VBtn:{color:E(e,"color"),height:"inherit",variant:E(e,"variant")}}),se(()=>{var r;return o("div",{class:["v-toolbar-items",e.class],style:e.style},[(r=a.default)==null?void 0:r.call(a)])}),{}}}),Xt=ee({id:String,text:String,...Ze(Mt({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),Qt=le()({name:"VTooltip",props:Xt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const r=Le(e,"modelValue"),{scopeId:n}=Nt(),l=Xe(),i=v(()=>e.id||`v-tooltip-${l}`),s=ve(),u=v(()=>e.location.split(" ").length>1?e.location:e.location+" center"),c=v(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),g=v(()=>e.transition?e.transition:r.value?"scale-transition":"fade-transition"),p=v(()=>j({"aria-describedby":i.value},e.activatorProps));return se(()=>{const h=Ie.filterProps(e);return o(Ie,j({ref:s,class:["v-tooltip",e.class],style:e.style,id:i.value},h,{modelValue:r.value,"onUpdate:modelValue":k=>r.value=k,transition:g.value,absolute:!0,location:u.value,origin:c.value,persistent:!0,role:"tooltip",activatorProps:p.value,_disableGlobalStack:!0},n),{activator:a.activator,default:function(){var $;for(var k=arguments.length,O=new Array(k),M=0;M<k;M++)O[M]=arguments[M];return(($=a.default)==null?void 0:$.call(a,...O))??e.text}})}),Rt({},s)}});function Jt(e,t){const a=typeof e=="string"?q(e):e,r=ea(a,t);return{mounted:r,updated:r,unmounted(n){De(null,n)}}}function ea(e,t){return function(a,r,n){var p,h,k;const l=typeof t=="function"?t(r):t,i=((p=r.value)==null?void 0:p.text)??r.value??(l==null?void 0:l.text),s=Qe(r.value)?r.value:{},u=()=>i??a.innerHTML,c=(n.ctx===r.instance.$?(h=ta(n,r.instance.$))==null?void 0:h.provides:(k=n.ctx)==null?void 0:k.provides)??r.instance.$.provides,g=Je(e,j(l,s),u);g.appContext=Object.assign(Object.create(null),r.instance.$.appContext,{provides:c}),De(g,a)}}function ta(e,t){const a=new Set,r=l=>{var i,s;for(const u of l){if(!u)continue;if(u===e)return!0;a.add(u);let c;if(u.suspense?c=r([u.ssContent]):Array.isArray(u.children)?c=r(u.children):(i=u.component)!=null&&i.vnode&&(c=r([(s=u.component)==null?void 0:s.subTree])),c)return c;a.delete(u)}return!1};if(!r([t.subTree]))throw new Error("Could not find original vnode");const n=Array.from(a).reverse();for(const l of n)if(l.component)return l.component;return t}const jl=Jt(Qt,e=>{var t;return{activator:"parent",location:((t=e.arg)==null?void 0:t.replace("-"," "))??"top",text:typeof e.value=="boolean"?void 0:e.value}}),aa={name:"BookCover",props:{group:{type:String,required:!0},pks:{type:Array,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},mtime:{type:Number,default:Date.now()}},data(){return{showPlaceholder:!1}},computed:{...Ee(W,["coverSettings"]),coverSrc(){return Lt({group:this.group,pks:this.pks},this.coverSettings,this.mtime)},childCountClasses(){return{childCount:!0,multiGroup:this.pks.length>1}}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},la={class:"bookCover"};function sa(e,t,a,r,n,l){return m(),V("div",la,[o(et,{src:l.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(m(),V("div",{key:0,class:ae({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):R("",!0),a.group!=="c"?(m(),V("span",{key:1,class:ae(l.childCountClasses)},P(a.childCount),3)):R("",!0)])}const ra=K(aa,[["render",sa],["__scopeId","data-v-e08491cb"]]),oa=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],na=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ia=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],ua=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Ne=(e,t,a)=>{let r=e;return typeof t=="string"||Array.isArray(t)?r=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(r=e.toLocaleString(void 0,a)),r};function da(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const a=t.bits?t.binary?ua:ia:t.binary?na:oa,r=t.space?" ":"";if(t.signed&&e===0)return` 0${r}${a[0]}`;const n=e<0,l=n?"-":t.signed?"+":"";n&&(e=-e);let i;if(t.minimumFractionDigits!==void 0&&(i={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(i={maximumFractionDigits:t.maximumFractionDigits,...i}),e<1){const g=Ne(e,t.locale,i);return l+g+r+a[0]}const s=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),a.length-1);e/=(t.binary?1024:1e3)**s,i||(e=e.toPrecision(3));const u=Ne(Number(e),t.locale,i),c=a[s];return l+u+r+c}const Re=Dt.browser.vuetifyNullCode,ca=new Set(["",Re,Re.toString(),void 0]),ma=function(e){let t;return e===void 0?t=e:e instanceof Object?t={value:e.pk,title:e.name}:t={value:e,title:e.toString()},e.url&&(t.url=e.url),t},va=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},fa=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},ha=function(e,t,a=!1){const r=e||[],n=t&&t.toLowerCase();let l=[];for(const s of r){if(!s||ca.has(s.pk))continue;const u=ma(s);u&&(!n||u.title&&u.title.toLowerCase().includes(n))&&l.push(u)}const i=a?fa:va;return l.sort(i)},pa={name:"MetadataTags",props:{label:{type:String,required:!0},values:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},data(){return{mdiFilter:tt,mdiOpenInNew:Oe}},computed:{...de(W,{filterValues(e){const t=this.filter||this.label.toLowerCase();return e.settings.filters[t]},topGroup:e=>e.settings.topGroup}),model(){return ha(this.values)},chipClass(e){return{browseChip:this.filter&&e}}},methods:{...ce(W,["setSettings"]),chipColor(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""},onClick(e){if(!this.filter||!e)return;const t=["f","s"].includes(this.topGroup)?this.topGroup:"r",a=t==="s"&&this.filter==="storyArcs";if(!a){const i={filters:{[this.filter]:[e]}};this.setSettings(i)}const l={name:"browser",params:{group:t,pk:a?e:0,page:1}};this.$router.push(l)}}},ba={key:0,class:"tags"},ga={class:"chipGroupLabel"},ya=["href"];function ka(e,t,a,r,n,l){return l.model&&l.model.length>0?(m(),V("div",ba,[f("div",ga,P(a.label),1),o(zt,{column:!0,multiple:"",value:l.model},{default:C(()=>[(m(!0),V(ge,null,re(l.model,i=>(m(),I($t,{key:`${a.label}/${i.value}`,color:l.chipColor(i.value),value:i.value,onClick:s=>l.onClick(i.value)},{default:C(()=>[i.url?(m(),V("a",{key:0,href:i.url,target:"_blank"},[A(P(i.title),1),o(fe,null,{default:C(()=>[A(P(n.mdiOpenInNew),1)]),_:1})],8,ya)):(m(),V("span",{key:1,class:ae(l.chipClass)},P(i.title),3))]),_:2},1032,["color","value","onClick"]))),128))]),_:1},8,["value"])])):R("",!0)}const $e=K(pa,[["render",ka],["__scopeId","data-v-ea0e4633"]]),Sa={name:"MetadataContributorsTable",components:{MetadataTags:$e},props:{value:{type:Array,default:void 0}},computed:{contributorsDict(){const e={};if(!this.value)return e;for(const{role:r,person:n}of this.value){const l=xt(r.name)+"s";e[l]||(e[l]=[]),e[l].push(n)}const t=Object.keys(e).sort((r,n)=>r.localeCompare(n)),a={};for(const r of t)a[r]=e[r].sort((n,l)=>n.name.localeCompare(l.name));return a}}},_a={key:0},Ca=f("h3",null,"Contributors",-1);function wa(e,t,a,r,n,l){const i=q("MetadataTags");return Object.keys(l.contributorsDict).length>0?(m(),V("div",_a,[Ca,(m(!0),V(ge,null,re(Object.entries(l.contributorsDict),([s,u])=>(m(),I(i,{key:s,values:u,label:s,filter:"contributors"},null,8,["values","label"]))),128))])):R("",!0)}const Ta=K(Sa,[["render",wa]]),Va={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:[Boolean,String],default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:Oe}},computed:{computedValue(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value},linkValue(){return this.link===!0?this.computedValue:this.link?this.link:!1},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group},pathArray(){if(this.computedValue)return this.computedValue.split("/")},folderPath(){if(this.pathArray)return this.pathArray.slice(0,-1).join("/")},basePath(){if(this.pathArray)return this.pathArray.at(-1)},groupTo(){var n;const e=W();if(this.group!=="f"&&!e.settings.show[this.group]||this.group==="f"&&!e.page.adminFlags.folderView)return;const a=(((n=this.obj)==null?void 0:n.group)==this.group?this.obj.ids:[this.value.pk]).join(",");if(!a)return;const r=this.$router.currentRoute.value.params;if(!(r.group===this.group&&r.pks===a))return{name:"browser",params:{group:this.group,pks:a}}}}},Ba={class:"textLabel"},Pa={class:"textValue"},Ia=["href"],Ma={key:3,class:"textContent"},Na={key:4,id:"basePath"};function Ra(e,t,a,r,n,l){const i=q("router-link");return l.computedValue?(m(),V("div",{key:0,class:ae(["text",{highlight:l.highlight}])},[f("div",Ba,P(a.label),1),f("div",Pa,[l.groupTo&&a.group==="f"?(m(),I(i,{key:0,id:"folderPath",to:l.groupTo,title:"Browse Folder"},{default:C(()=>[A(P(l.folderPath)+"/ ",1)]),_:1},8,["to"])):l.groupTo?(m(),I(i,{key:1,class:"textContent",to:l.groupTo,title:`Browse ${a.label}`},{default:C(()=>[A(P(l.computedValue),1)]),_:1},8,["to","title"])):a.link?(m(),V("a",{key:2,href:l.linkValue,target:"_blank"},[A(P(l.computedValue)+" ",1),o(fe,{size:"small"},{default:C(()=>[A(P(n.mdiOpenInNew),1)]),_:1})],8,Ia)):(m(),V("div",Ma,P(l.computedValue),1)),l.groupTo&&a.group==="f"?(m(),V("span",Na,P(l.basePath),1)):R("",!0)])],2)):R("",!0)}const Fa=K(Va,[["render",Ra],["__scopeId","data-v-e94baf62"]]),ze=new Set("rtl","btt");Object.freeze(ze);const La=({ids:e,page:t,readingDirection:a,pageCount:r},n)=>{if(e.length<1||n&&!r)return;const l=e[0];if(t)t=Number(t);else if(ze.has(a)){const i=Number(r)-1;t=Math.max(i,0)}else t=0;return{name:"reader",params:{pk:l,page:t}}},Fe=at("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pks:t}){const a=W();await Et.getMetadata({group:e,pks:t},a.settings).then(r=>{const n={...r.data};return n.loaded=!0,this.md=n,!0}).catch(r=>{console.error(r),this.clearMetadata()})},clearMetadata(){this.md=void 0}}}),Da=1160,Ea=.05,Oa=250,Aa={name:"MetadataButton",components:{BookCover:ra,CloseButton:lt,MetadataContributorsTable:Ta,MetadataTags:$e,MetadataText:Fa,PlaceholderLoading:Gt},props:{group:{type:String,required:!0},book:{type:Object,required:!0},children:{type:Number,default:1},toolbar:{type:Boolean,default:!1}},data(){return{mdiDownload:st,mdiTagOutline:rt,dialog:!1,progress:0}},computed:{...Ee(ot,["isUserAdmin"]),...de(W,{twentyFourHourTime:e=>{var t;return(t=e.settings)==null?void 0:t.twentyFourHourTime},readingDirectionTitles:e=>e.choices.static.readingDirection,identifierTypes:e=>e.choices.static.identifierType,importMetadata:e=>{var t,a;return(a=(t=e.page)==null?void 0:t.adminFlags)==null?void 0:a.importMetadata}}),...de(Fe,{md:e=>e.md}),...de(W,{q:e=>e.settings.q}),showContainer(){var e;return((e=this.md)==null?void 0:e.loaded)||!1},downloadFileName(){var t;const e=this.md;return e?(t=this.md)!=null&&t.filename?e.filename:Ot({seriesName:e.series.name||"",volumeName:e.volume.name||"",issueNumber:e.issueNumber,issueSuffix:e.issueSuffix})+"."+this.fileType.toLowerCase():"Unknown.cbz"},buttonVariant(){return this.toolbar?"plain":"text"},downloadURL(){return this.book?At(this.book):""},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},readButtonIcon(){return this.isReadButtonEnabled?nt:it},readerRoute(){var e;return(e=this.md)!=null&&e.ids?La(this.md,this.importMetadata):{}},formattedIssue(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return jt(this.md)},readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=we.format(this.md.page);e+=`Read ${a} of `}const t=we.format(this.md.pageCount);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.size)>0?da(this.md.size):0},fileType(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.fileType)||"Unknown"},titledIdentifiers(){var t;const e=[];if(!((t=this==null?void 0:this.md)!=null&&t.identifiers))return e;for(const a of this.md.identifiers){const r=a.name.split(":"),n=r[0],l=r[1],i=this.identifierTypeTitle(n);let s="";i&&i!=="None"&&(s+=i+":"),s+=l,e.push({...a,name:s})}return e},multiGroup(){var e;return(e=this.md)!=null&&e.ids?this.md.ids.length>1:!1}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...ce(Fe,["clearMetadata","loadMetadata"]),...ce(ut,["downloadIOSPWAFix"]),...ce(W,["identifierTypeTitle"]),dialogOpened(){const e=this.book.ids?this.book.ids:[this.book.pk],t={group:this.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(Ea,this.children/Da)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Oa)},formatDateTime(e){return dt(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.md.filename)}}},ja=e=>(ft("data-v-e4f269a4"),e=e(),ht(),e),$a={id:"metadataHeader"},za={id:"metadataBookCoverWrapper"},Ua={class:"inlineRow"},xa={class:"inlineRow"},Ga={class:"inlineRow"},qa={key:1,class:"inlineRow"},Ka={id:"metadataBody"},Ya={class:"mdSection"},Ha={class:"quintRow"},Wa={class:"mdSection"},Za={class:"quarterRow"},Xa={class:"lastSmallRow"},Qa={class:"halfRow mdSection"},Ja={class:"mdSection"},el={class:"mdSection"},tl={class:"mdSection"},al={class:"mdSection"},ll={class:"mdSection"},sl={class:"mdSection inlineRow"},rl={class:"inlineRow"},ol={id:"footerLinks"},nl={id:"bottomRightButtons"},il={key:1,id:"placeholderContainer"},ul=ja(()=>f("div",{id:"placeholderTitle"},"Tags Loading",-1));function dl(e,t,a,r,n,l){const i=q("CloseButton"),s=q("MetadataText"),u=q("BookCover"),c=q("MetadataTags"),g=q("MetadataContributorsTable"),p=q("PlaceholderLoading");return m(),I(Ft,{modelValue:n.dialog,"onUpdate:modelValue":t[5]||(t[5]=h=>n.dialog=h),fullscreen:"",transition:"dialog-bottom-transition"},{activator:C(({props:h})=>[o(me,j({"aria-label":"tags",class:"tagButton cardControlButton",variant:l.buttonVariant,icon:n.mdiTagOutline,title:"Tags"},h,{onClick:t[0]||(t[0]=ct(()=>{},["prevent"]))}),null,16,["variant","icon"])]),default:C(()=>[l.showContainer?(m(),V("div",{key:0,id:"metadataContainer",onKeyup:t[3]||(t[3]=vt(h=>n.dialog=!1,["esc"]))},[f("header",$a,[o(i,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[1]||(t[1]=h=>n.dialog=!1)}),e.q?(m(),I(s,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):R("",!0),f("div",za,[o(u,{id:"bookCover",group:a.group,pks:e.md.ids,"child-count":e.md.childCount,finished:e.md.finished,mtime:e.md.mtime},null,8,["group","pks","child-count","finished","mtime"]),o(mt,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),f("div",Ua,[o(s,{id:"publisher",value:e.md.publisher,group:"p",label:"Publisher",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),o(s,{id:"imprint",value:e.md.imprint,group:"i",label:"Imprint",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),f("div",xa,[o(s,{id:"series",value:e.md.series,label:"Series",group:"s",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),f("div",Ga,[o(s,{id:"volume",value:e.md.volume,label:"Volume",group:"v",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),o(s,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),o(s,{id:"issue",value:l.formattedIssue,label:"Issue",group:"c",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),o(s,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"]),o(s,{value:e.md.name,label:"Title"},null,8,["value"])]),e.md.year||e.md.month||e.md.day?(m(),V("div",qa,[o(s,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),o(s,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),o(s,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):R("",!0)]),f("div",Ka,[f("section",Ya,[f("div",Ha,[o(s,{value:l.pages,label:"Pages"},null,8,["value"]),o(s,{label:"Finished",value:(!!e.md.finished).toString()},null,8,["value"]),o(s,{label:"Reading Direction",value:l.readingDirectionText},null,8,["value"]),o(s,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"]),o(s,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),f("section",Wa,[f("div",Za,[e.md.createdAt?(m(),I(s,{key:0,value:l.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):R("",!0),e.md.updatedAt?(m(),I(s,{key:1,value:l.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):R("",!0),o(s,{value:l.size,label:"Size"},null,8,["value"]),o(s,{value:l.fileType,label:"File Type"},null,8,["value"])]),f("div",Xa,[o(s,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),f("section",Qa,[o(s,{value:e.md.country,label:"Country"},null,8,["value"]),o(s,{value:e.md.language,label:"Language"},null,8,["value"])]),f("section",Ja,[o(c,{values:l.titledIdentifiers,label:"Identifiers"},null,8,["values"])]),f("section",el,[o(s,{value:e.md.summary,label:"Summary"},null,8,["value"]),o(s,{value:e.md.review,label:"Review"},null,8,["value"])]),f("section",tl,[o(s,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),o(s,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),o(s,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),f("section",al,[o(c,{values:e.md.genres,label:"Genres",filter:"genres"},null,8,["values"]),o(c,{values:e.md.characters,label:"Characters",filter:"characters"},null,8,["values"]),o(c,{values:e.md.teams,label:"Teams",filter:"teams"},null,8,["values"]),o(c,{values:e.md.locations,label:"Locations",filter:"locations"},null,8,["values"]),o(c,{values:e.md.seriesGroups,label:"Series Groups",filter:"seriesGroups"},null,8,["values"]),o(c,{values:e.md.stories,label:"Stories",filter:"stories"},null,8,["values"]),o(c,{values:e.md.storyArcNumbers,label:"Story Arcs",filter:"storyArcs"},null,8,["values"]),o(c,{values:e.md.tags,label:"Tags",filter:"tags"},null,8,["values"])]),f("section",ll,[o(g,{value:e.md.contributors},null,8,["value"])]),f("section",sl,[o(s,{value:e.md.notes,label:"Notes"},null,8,["value"])]),f("section",rl,[o(s,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),o(s,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])]),f("footer",ol,[a.group==="c"?(m(),I(me,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:l.download},{default:C(()=>[a.group==="c"?(m(),I(fe,{key:0},{default:C(()=>[A(P(n.mdiDownload),1)]),_:1})):R("",!0),A(" Download ")]),_:1},8,["onClick"])):R("",!0),l.isReadButtonShown?(m(),I(me,{key:1,to:l.readerRoute,title:"Read Comic",disabled:!l.isReadButtonEnabled},{default:C(()=>[o(fe,null,{default:C(()=>[A(P(l.readButtonIcon),1)]),_:1}),A(" Read ")]),_:1},8,["to","disabled"])):R("",!0),f("span",nl,[o(i,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[2]||(t[2]=h=>n.dialog=!1)})])])],32)):(m(),V("div",il,[o(i,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[4]||(t[4]=h=>n.dialog=!1)}),ul,o(p,{"model-value":n.progress,indeterminate:n.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const $l=K(Aa,[["render",dl],["__scopeId","data-v-e4f269a4"]]),cl={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function ml(e,t,a,r,n,l){return m(),I(Ut,j(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:l.style,variant:"plain"}),ye({item:C(({item:i,props:s})=>[o(pt,j(s,{density:"compact",variant:"plain",title:i.title,value:i.value}),null,16,["title","value"])]),_:2},[re(e.$slots,(i,s)=>({name:s,fn:C(u=>[ke(e.$slots,s,j({props:i},u),void 0,!0)])}))]),1040,["label","aria-label","style"])}const zl=K(cl,[["render",ml],["__scopeId","data-v-e88da460"]]),Ul=bt("v-spacer","div","VSpacer"),vl={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function fl(e,t,a,r,n,l){return m(),I(me,{variant:"plain",density:"compact",class:ae(["paginationNavButton",l.classes]),size:"medium"},ye({_:2},[re(e.$slots,(i,s)=>({name:s,fn:C(u=>[ke(e.$slots,s,j({props:i},u),void 0,!0)])}))]),1032,["class"])}const xl=K(vl,[["render",fl],["__scopeId","data-v-0450dab6"]]),_e=Symbol.for("vuetify:v-slider");function hl(e,t,a){const r=a==="vertical",n=t.getBoundingClientRect(),l="touches"in e?e.touches[0]:e;return r?l.clientY-(n.top+n.height/2):l.clientX-(n.left+n.width/2)}function pl(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const bl=ee({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...gt(),...yt({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),gl=e=>{const t=v(()=>parseFloat(e.min)),a=v(()=>parseFloat(e.max)),r=v(()=>+e.step>0?parseFloat(e.step):0),n=v(()=>Math.max(Te(r.value),Te(t.value)));function l(i){if(i=parseFloat(i),r.value<=0)return i;const s=Ae(i,t.value,a.value),u=t.value%r.value,c=Math.round((s-u)/r.value)*r.value+u;return parseFloat(Math.min(c,a.value).toFixed(n.value))}return{min:t,max:a,step:r,decimals:n,roundValue:l}},yl=e=>{let{props:t,steps:a,onSliderStart:r,onSliderMove:n,onSliderEnd:l,getActiveThumb:i}=e;const{isRtl:s}=Se(),u=E(t,"reverse"),c=v(()=>t.direction==="vertical"),g=v(()=>c.value!==u.value),{min:p,max:h,step:k,decimals:O,roundValue:M}=a,$=v(()=>parseInt(t.thumbSize,10)),Y=v(()=>parseInt(t.tickSize,10)),x=v(()=>parseInt(t.trackSize,10)),z=v(()=>(h.value-p.value)/k.value),Z=E(t,"disabled"),U=v(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),y=v(()=>t.error||t.disabled?void 0:t.trackColor??t.color),F=v(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),w=Ve(!1),T=Ve(0),L=ve(),D=ve();function b(d){var Ce;const _=t.direction==="vertical",Ue=_?"top":"left",xe=_?"height":"width",Ge=_?"clientY":"clientX",{[Ue]:qe,[xe]:Ke}=(Ce=L.value)==null?void 0:Ce.$el.getBoundingClientRect(),Ye=pl(d,Ge);let pe=Math.min(Math.max((Ye-qe-T.value)/Ke,0),1)||0;return(_?g.value:g.value!==s.value)&&(pe=1-pe),M(p.value+pe*(h.value-p.value))}const G=d=>{l({value:b(d)}),w.value=!1,T.value=0},H=d=>{D.value=i(d),D.value&&(D.value.focus(),w.value=!0,D.value.contains(d.target)?T.value=hl(d,D.value,t.direction):(T.value=0,n({value:b(d)})),r({value:b(d)}))},N={passive:!0,capture:!0};function Q(d){n({value:b(d)})}function oe(d){d.stopPropagation(),d.preventDefault(),G(d),window.removeEventListener("mousemove",Q,N),window.removeEventListener("mouseup",oe)}function ne(d){var _;G(d),window.removeEventListener("touchmove",Q,N),(_=d.target)==null||_.removeEventListener("touchend",ne)}function he(d){var _;H(d),window.addEventListener("touchmove",Q,N),(_=d.target)==null||_.addEventListener("touchend",ne,{passive:!1})}function B(d){d.preventDefault(),H(d),window.addEventListener("mousemove",Q,N),window.addEventListener("mouseup",oe,{passive:!1})}const S=d=>{const _=(d-p.value)/(h.value-p.value)*100;return Ae(isNaN(_)?0:_,0,100)},J=E(t,"showTicks"),te=v(()=>J.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(d=>({value:d,position:S(d),label:d.toString()})):Object.keys(t.ticks).map(d=>({value:parseFloat(d),position:S(parseFloat(d)),label:t.ticks[d]})):z.value!==1/0?kt(z.value+1).map(d=>{const _=p.value+d*k.value;return{value:_,position:S(_)}}):[]:[]),ie=v(()=>te.value.some(d=>{let{label:_}=d;return!!_})),ue={activeThumbRef:D,color:E(t,"color"),decimals:O,disabled:Z,direction:E(t,"direction"),elevation:E(t,"elevation"),hasLabels:ie,isReversed:u,indexFromEnd:g,min:p,max:h,mousePressed:w,numTicks:z,onSliderMousedown:B,onSliderTouchstart:he,parsedTicks:te,parseMouseMove:b,position:S,readonly:E(t,"readonly"),rounded:E(t,"rounded"),roundValue:M,showTicks:J,startOffset:T,step:k,thumbSize:$,thumbColor:U,thumbLabel:E(t,"thumbLabel"),ticks:E(t,"ticks"),tickSize:Y,trackColor:y,trackContainerRef:L,trackFillColor:F,trackSize:x,vertical:c};return St(_e,ue),ue},kl=ee({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...be()},"VSliderThumb"),Sl=le()({name:"VSliderThumb",directives:{Ripple:_t},props:kl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:r}=t;const n=je(_e),{isRtl:l,rtlClasses:i}=Se();if(!n)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:s,step:u,disabled:c,thumbSize:g,thumbLabel:p,direction:h,isReversed:k,vertical:O,readonly:M,elevation:$,mousePressed:Y,decimals:x,indexFromEnd:z}=n,Z=v(()=>c.value?void 0:$.value),{elevationClasses:U}=Ct(Z),{textColorClasses:y,textColorStyles:F}=wt(s),{pageup:w,pagedown:T,end:L,home:D,left:b,right:G,down:H,up:N}=Pt,Q=[w,T,L,D,b,G,H,N],oe=v(()=>u.value?[1,2,3]:[1,5,10]);function ne(B,S){if(!Q.includes(B.key))return;B.preventDefault();const J=u.value||.1,te=(e.max-e.min)/J;if([b,G,H,N].includes(B.key)){const ue=(O.value?[l.value?b:G,k.value?H:N]:z.value!==l.value?[b,N]:[G,N]).includes(B.key)?1:-1,d=B.shiftKey?2:B.ctrlKey?1:0;S=S+ue*J*oe.value[d]}else if(B.key===D)S=e.min;else if(B.key===L)S=e.max;else{const ie=B.key===T?1:-1;S=S-ie*J*(te>100?te/10:10)}return Math.max(e.min,Math.min(e.max,S))}function he(B){const S=ne(B,e.modelValue);S!=null&&r("update:modelValue",S)}return se(()=>{const B=X(z.value?100-e.position:e.position,"%");return o("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&Y.value},e.class,i.value],style:[{"--v-slider-thumb-position":B,"--v-slider-thumb-size":X(g.value)},e.style],role:"slider",tabindex:c.value?-1:0,"aria-label":e.name,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!M.value,"aria-orientation":h.value,onKeydown:M.value?void 0:he},[o("div",{class:["v-slider-thumb__surface",y.value,U.value],style:{...F.value}},null),Be(o("div",{class:["v-slider-thumb__ripple",y.value],style:F.value},null),[[Tt("ripple"),e.ripple,null,{circle:!0,center:!0}]]),o(Vt,{origin:"bottom center"},{default:()=>{var S;return[Be(o("div",{class:"v-slider-thumb__label-container"},[o("div",{class:["v-slider-thumb__label"]},[o("div",null,[((S=a["thumb-label"])==null?void 0:S.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(u.value?x.value:1)])])]),[[Bt,p.value&&e.focused||p.value==="always"]])]}})])}),{}}}),_l=ee({start:{type:Number,required:!0},stop:{type:Number,required:!0},...be()},"VSliderTrack"),Cl=le()({name:"VSliderTrack",props:_l(),emits:{},setup(e,t){let{slots:a}=t;const r=je(_e);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:n,parsedTicks:l,rounded:i,showTicks:s,tickSize:u,trackColor:c,trackFillColor:g,trackSize:p,vertical:h,min:k,max:O,indexFromEnd:M}=r,{roundedClasses:$}=It(i),{backgroundColorClasses:Y,backgroundColorStyles:x}=Pe(g),{backgroundColorClasses:z,backgroundColorStyles:Z}=Pe(c),U=v(()=>`inset-${h.value?"block":"inline"}-${M.value?"end":"start"}`),y=v(()=>h.value?"height":"width"),F=v(()=>({[U.value]:"0%",[y.value]:"100%"})),w=v(()=>e.stop-e.start),T=v(()=>({[U.value]:X(e.start,"%"),[y.value]:X(w.value,"%")})),L=v(()=>s.value?(h.value?l.value.slice().reverse():l.value).map((b,G)=>{var N;const H=b.value!==k.value&&b.value!==O.value?X(b.position,"%"):void 0;return o("div",{key:b.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":b.position>=e.start&&b.position<=e.stop,"v-slider-track__tick--first":b.value===k.value,"v-slider-track__tick--last":b.value===O.value}],style:{[U.value]:H}},[(b.label||a["tick-label"])&&o("div",{class:"v-slider-track__tick-label"},[((N=a["tick-label"])==null?void 0:N.call(a,{tick:b,index:G}))??b.label])])}):[]);return se(()=>o("div",{class:["v-slider-track",$.value,e.class],style:[{"--v-slider-track-size":X(p.value),"--v-slider-tick-size":X(u.value)},e.style]},[o("div",{class:["v-slider-track__background",z.value,{"v-slider-track__background--opacity":!!n.value||!g.value}],style:{...F.value,...Z.value}},null),o("div",{class:["v-slider-track__fill",Y.value],style:{...T.value,...x.value}},null),s.value&&o("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":s.value==="always"}]},[L.value])])),{}}}),wl=ee({...qt(),...bl(),...Kt(),modelValue:{type:[Number,String],default:0}},"VSlider"),Tl=le()({name:"VSlider",props:wl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:r}=t;const n=ve(),{rtlClasses:l}=Se(),i=gl(e),s=Le(e,"modelValue",void 0,y=>i.roundValue(y??i.min.value)),{min:u,max:c,mousePressed:g,roundValue:p,onSliderMousedown:h,onSliderTouchstart:k,trackContainerRef:O,position:M,hasLabels:$,readonly:Y}=yl({props:e,steps:i,onSliderStart:()=>{r("start",s.value)},onSliderEnd:y=>{let{value:F}=y;const w=p(F);s.value=w,r("end",w)},onSliderMove:y=>{let{value:F}=y;return s.value=p(F)},getActiveThumb:()=>{var y;return(y=n.value)==null?void 0:y.$el}}),{isFocused:x,focus:z,blur:Z}=Yt(e),U=v(()=>M(s.value));return se(()=>{const y=Me.filterProps(e),F=!!(e.label||a.label||a.prepend);return o(Me,j({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||$.value,"v-slider--focused":x.value,"v-slider--pressed":g.value,"v-slider--disabled":e.disabled},l.value,e.class],style:e.style},y,{focused:x.value}),{...a,prepend:F?w=>{var T,L;return o(ge,null,[((T=a.label)==null?void 0:T.call(a,w))??(e.label?o(Ht,{id:w.id.value,class:"v-slider__label",text:e.label},null):void 0),(L=a.prepend)==null?void 0:L.call(a,w)])}:void 0,default:w=>{let{id:T,messagesId:L}=w;return o("div",{class:"v-slider__container",onMousedown:Y.value?void 0:h,onTouchstartPassive:Y.value?void 0:k},[o("input",{id:T.value,name:e.name||T.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:s.value},null),o(Cl,{ref:O,start:0,stop:U.value},{"tick-label":a["tick-label"]}),o(Sl,{ref:n,"aria-describedby":L.value,focused:x.value,min:u.value,max:c.value,modelValue:s.value,"onUpdate:modelValue":D=>s.value=D,position:U.value,elevation:e.elevation,onFocus:z,onBlur:Z,ripple:e.ripple,name:e.name},{"thumb-label":a["thumb-label"]})])}})}),{}}}),Vl={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function Bl(e,t,a,r,n,l){return m(),I(Tl,j({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":C(({index:i})=>[A(P(i+a.min),1)]),_:1},16,["min"])}const Gl=K(Vl,[["render",Bl],["__scopeId","data-v-01b67afd"]]),Pl={name:"PaginationToolbar"};function Il(e,t,a,r,n,l){return m(),I(Wt,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},ye({_:2},[re(e.$slots,(i,s)=>({name:s,fn:C(u=>[ke(e.$slots,s,j({props:i},u),void 0,!0)])}))]),1024)}const ql=K(Pl,[["render",Il],["__scopeId","data-v-cfa8cce0"]]);export{ra as B,$l as M,ca as N,xl as P,jl as T,Al as V,zl as a,Ul as b,Gl as c,ql as d,La as g,da as p,ha as t};
