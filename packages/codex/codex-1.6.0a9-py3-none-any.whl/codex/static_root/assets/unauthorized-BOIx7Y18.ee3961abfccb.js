import{E as W,O,az as G,cs as ce,r as me,a3 as fe,h as Q,F as ge,R as K,ct as he,S as a,aw as z,U as q,bh as N,c9 as ve,ao as D,cu as ye,cv as Z,aL as _e,V,D as be,m,bu as ke,W as j,_ as S,Y as k,Z as u,X as c,$ as r,aq as J,ak as w,ap as A,aP as pe,aQ as we,ar as ee,bp as R,ce as Ve,aK as T,cw as Se,aH as Ce,be as Le,M as te,b1 as ae,cx as Pe,N as Ae,P as De,aD as Me,aE as Ie,b4 as se,c1 as xe,K as Be,av as Ee,aB as Ue,b_ as Fe,bC as Re,an as $e,aR as ze}from"./admin-drawer-panel-1pnfvY8O.js";import{C as Ne}from"./change-password-dialog-CjZdzaIk.js";import{S as Te,V as $,a as We}from"./VTextField-CkWbil3K.js";import{a as Oe,c as Ke,u as qe,V as X,d as Y}from"./VSelectionControl-CVQ9wkE2.js";import{V as je}from"./VDialog-87AymJC5.js";import{n as He,o as Ge}from"./main-CMQwJ9aG.js";const Qe=W({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Oe(),...Ke()},"VSwitch"),Xe=O()({name:"VSwitch",inheritAttrs:!1,props:Qe(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,s){let{attrs:l,slots:t}=s;const o=G(e,"indeterminate"),i=G(e,"modelValue"),{loaderClasses:d}=ce(e),{isFocused:n,focus:f,blur:C}=qe(e),_=me(),L=fe&&window.matchMedia("(forced-colors: active)").matches,M=Q(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),I=ge(),x=Q(()=>e.id||`switch-${I}`);function b(){o.value&&(o.value=!1)}function P(h){var v,y;h.stopPropagation(),h.preventDefault(),(y=(v=_.value)==null?void 0:v.input)==null||y.click()}return K(()=>{const[h,v]=he(l),y=X.filterProps(e),oe=Y.filterProps(e);return a(X,z({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":o.value},d.value,e.class]},h,y,{modelValue:i.value,"onUpdate:modelValue":B=>i.value=B,id:x.value,focused:n.value,style:e.style}),{...t,default:B=>{let{id:ne,messagesId:ie,isDisabled:le,isReadonly:re,isValid:H}=B;const E={model:i,isValid:H};return a(Y,z({ref:_},oe,{modelValue:i.value,"onUpdate:modelValue":[p=>i.value=p,b],id:ne.value,"aria-describedby":ie.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:le.value,readonly:re.value,onFocus:f,onBlur:C},v),{...t,default:p=>{let{backgroundColorClasses:U,backgroundColorStyles:g}=p;return a("div",{class:["v-switch__track",L?void 0:U.value],style:g.value,onClick:P},[t["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[t["track-true"](E)]),t["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[t["track-false"](E)])])},input:p=>{let{inputNode:U,icon:g,backgroundColorClasses:ue,backgroundColorStyles:de}=p;return a(q,null,[U,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":g||e.loading},e.inset||L?void 0:ue.value],style:e.inset?void 0:de.value},[t.thumb?a(N,{defaults:{VIcon:{icon:g,size:"x-small"}}},{default:()=>[t.thumb({...E,icon:g})]}):a(ve,null,{default:()=>[e.loading?a(ye,{name:"v-switch",active:!0,color:H.value===!1?void 0:M.value},{default:F=>t.loader?t.loader(F):a(Z,{active:F.isActive,color:F.color,indeterminate:!0,size:"16",width:"2"},null)}):g&&a(D,{key:String(g),icon:g,size:"x-small"},null)]})])])}})}})}),{}}}),Ye={name:"AuthLoginDialog",components:{SubmitFooter:Te},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:_e}},computed:{...V(be,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...V(m,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...ke(m,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:s})=>this.submitButtonEnabled=s).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){window.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){window.removeEventListener("keyup",this._keyUpListener)},methods:{...j(m,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>this.showLoginDialog=this.formErrors&&this.formErrors.length>0).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:s})=>{if(!s)return;const l=this.registerMode?"register":"login";return this.doAuth(l)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function Ze(e,s,l,t,o,i){const d=k("SubmitFooter");return u(),c(je,{modelValue:e.showLoginDialog,"onUpdate:modelValue":s[7]||(s[7]=n=>e.showLoginDialog=n),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:r(({props:n})=>[a(ee,pe(we(n)),{default:r(()=>[a(J,null,{default:r(()=>[a(D,null,{default:r(()=>[w(A(o.mdiLogin),1)]),_:1}),w(" "+A(i.loginLabel),1)]),_:1})]),_:2},1040)]),default:r(()=>[a(We,{id:"authDialog",ref:"form"},{default:r(()=>[a($,{modelValue:o.credentials.username,"onUpdate:modelValue":s[0]||(s[0]=n=>o.credentials.username=n),autocomplete:"username",label:"Username",rules:o.rules.username,clearable:"",autofocus:"",onKeydown:s[1]||(s[1]=R(n=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),a($,{ref:"password",modelValue:o.credentials.password,"onUpdate:modelValue":s[2]||(s[2]=n=>o.credentials.password=n),autocomplete:o.registerMode?"new-password":"current-password",label:"Password",rules:o.rules.password,clearable:"",type:"password",onKeydown:s[3]||(s[3]=R(n=>{o.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),a(Ve,null,{default:r(()=>[o.registerMode?(u(),c($,{key:0,ref:"passwordConfirm",modelValue:o.credentials.passwordConfirm,"onUpdate:modelValue":s[4]||(s[4]=n=>o.credentials.passwordConfirm=n),autocomplete:"new-password",label:"Confirm Password",rules:o.rules.passwordConfirm,clearable:"",type:"password",onKeydown:R(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):T("",!0)]),_:1}),e.adminFlags.registration?(u(),c(Xe,{key:0,modelValue:o.registerMode,"onUpdate:modelValue":s[5]||(s[5]=n=>o.registerMode=n),label:"Register"},{default:r(()=>[w(" Register ")]),_:1},8,["modelValue"])):T("",!0),a(d,{verb:o.registerMode?"Register":"Login",table:"",disabled:!o.submitButtonEnabled,onSubmit:i.submit,onCancel:s[6]||(s[6]=n=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const Je=S(Ye,[["render",Ze],["__scopeId","data-v-c963c3d4"]]),et={name:"AuthLogoutItem",data:function(){return{mdiLogout:Se}},computed:{...V(m,{username:e=>e.user.username})},methods:{...j(m,["logout"])}};function tt(e,s,l,t,o,i){return u(),c(ee,{onClick:e.logout},{default:r(()=>[a(J,null,{default:r(()=>[a(D,null,{default:r(()=>[w(A(e.mdiLogout),1)]),_:1}),w("Logout "+A(e.username),1)]),_:1})]),_:1},8,["onClick"])}const at=S(et,[["render",tt]]),st={name:"AuthMenu",components:{ChangePasswordDialog:Ne,AuthLoginDialog:Je,AuthLogoutItem:at},computed:{...V(m,{user:e=>e.user})},methods:{...j(m,["logout"])}};function ot(e,s,l,t,o,i){const d=k("AuthLogoutItem"),n=k("ChangePasswordDialog"),f=k("AuthLoginDialog");return u(),Ce(q,null,[e.user?(u(),c(d,{key:0})):T("",!0),e.user?(u(),c(n,{key:1,user:e.user},null,8,["user"])):(u(),c(f,{key:2}))],64)}const nt=S(st,[["render",ot]]),it={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function lt(e,s,l,t,o,i){return u(),c(Z,z({"aria-label":"loading",class:"codexProgressCircular",indeterminate:l.indeterminate},e.$attrs),null,16,["indeterminate"])}const rt=S(it,[["render",lt],["__scopeId","data-v-7bb4cf22"]]),ut=W({actionText:String,bgColor:String,color:String,icon:Le,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...te(),...ae(),...Pe({size:void 0}),...Ae()},"VEmptyState"),dt=O()({name:"VEmptyState",props:ut(),emits:{"click:action":e=>!0},setup(e,s){let{emit:l,slots:t}=s;const{themeClasses:o}=De(e),{backgroundColorClasses:i,backgroundColorStyles:d}=Me(Ie(e,"bgColor")),{dimensionStyles:n}=se(e),{displayClasses:f}=He();function C(_){l("click:action",_)}return K(()=>{var P,h,v;const _=!!(t.actions||e.actionText),L=!!(t.headline||e.headline),M=!!(t.title||e.title),I=!!(t.text||e.text),x=!!(t.media||e.image||e.icon),b=e.size||(e.image?200:96);return a("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},o.value,i.value,f.value,e.class],style:[d.value,n.value,e.style]},[x&&a("div",{key:"media",class:"v-empty-state__media"},[t.media?a(N,{key:"media-defaults",defaults:{VImg:{src:e.image,height:b},VIcon:{size:b,icon:e.icon}}},{default:()=>[t.media()]}):a(q,null,[e.image?a(xe,{key:"image",src:e.image,height:b},null):e.icon?a(D,{key:"icon",color:e.color,size:b,icon:e.icon},null):void 0])]),L&&a("div",{key:"headline",class:"v-empty-state__headline"},[((P=t.headline)==null?void 0:P.call(t))??e.headline]),M&&a("div",{key:"title",class:"v-empty-state__title"},[((h=t.title)==null?void 0:h.call(t))??e.title]),I&&a("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Be(e.textWidth)}},[((v=t.text)==null?void 0:v.call(t))??e.text]),t.default&&a("div",{key:"content",class:"v-empty-state__content"},[t.default()]),_&&a("div",{key:"actions",class:"v-empty-state__actions"},[a(N,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color,text:e.actionText}}},{default:()=>{var y;return[((y=t.actions)==null?void 0:y.call(t,{props:{onClick:C}}))??a(Ee,{onClick:C},null)]}})])])}),{}}}),ct=W({scrollable:Boolean,...te(),...ae(),...Ue({tag:"main"})},"VMain"),mt=O()({name:"VMain",props:ct(),setup(e,s){let{slots:l}=s;const{dimensionStyles:t}=se(e),{mainStyles:o,layoutIsReady:i}=Ge(),{ssrBootStyles:d}=Fe();return K(()=>a(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,d.value,t.value,e.style]},{default:()=>{var n,f;return[e.scrollable?a("div",{class:"v-main__scroller"},[(n=l.default)==null?void 0:n.call(l)]):(f=l.default)==null?void 0:f.call(l)]}})),i}}),ft={name:"UnauthorizedEmptyState",components:{AuthMenu:nt,PlaceholderLoading:rt},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:Re}},computed:{...$e(m,["isAuthChecked","isAuthorized","isUserAdmin"]),...V(m,{registration:e=>e.adminFlags.registration}),text(){return this.registration?"":"Registration is disabled"}}},gt={class:"login"};function ht(e,s,l,t,o,i){const d=k("AuthMenu"),n=k("PlaceholderLoading");return u(),c(mt,{id:"unauthorized"},{default:r(()=>[e.isAuthChecked?(u(),c(dt,{key:0,class:"empty",headline:"Unauthorized",text:i.text,icon:o.mdiLockOutline},{default:r(()=>[ze("div",gt,[a(d)])]),_:1},8,["text","icon"])):(u(),c(n,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const wt=S(ft,[["render",ht],["__scopeId","data-v-f524aeea"]]);export{nt as A,rt as P,wt as U,mt as V,dt as a};
